{"code":"(this[\"webpackJsonppwa-demo\"]=this[\"webpackJsonppwa-demo\"]||[]).push([[4,30],{167:function(e,n,t){\"use strict\";t.d(n,\"a\",(function(){return p}));var r=t(160),o=t(37),a=t(175),i=t(6),c=t.n(i),s=t(158),u=t(157),d=t(161);function l(){var e=Object(s.a)([\"\\n  height: 52px;\\n  border-radius: 15px; \\n  font-family: 'Source Sans Pro'; /* It could be removed if default on body changes */\\n  font-weight: bold;\\n  font-size: 14px;\\n  font-weight: bold;\\n  width: 100%;\\n\\n  \",\"\\n\"]);return l=function(){return e},e}var f=u.default.button(l(),(function(e){var n=e.dark,t=e.disabled?d.a.purple_50:d.a.purple;return n?\"\\n    background-color: \".concat(t,\";\\n    color: \").concat(d.a.white,\";\\n    border: none;\\n  \"):\"\\n    background-color: \".concat(d.a.white,\";\\n    color: \").concat(t,\";\\n    border: 1px solid \").concat(t,\";\\n  \")})),p=c.a.memo((function(e){var n=e.children,t=Object(a.a)(e,[\"children\"]);return Object(o.jsx)(f,Object(r.a)(Object(r.a)({type:\"button\"},t),{},{children:n}))}))},169:function(e,n,t){\"use strict\";t.d(n,\"a\",(function(){return l}));var r=t(37),o=t(6),a=t.n(o),i=t(167),c=t(158);function s(){var e=Object(c.a)([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  max-width: \",\";\\n  margin: 0 auto;\\n\\n  button {\\n    flex: 1;\\n\\n    &:first-of-type {\\n      margin-left: 0px !important;\\n    }\\n\\n    &:last-of-type {\\n      margin-left: 20px;\\n    }\\n  }\\n\\n  @media screen and (\",\"){\\n    max-width: 470px;\\n  }\\n\"]);return s=function(){return e},e}var u=t(157).default.div(s(),(function(e){return\"calc(100% - \".concat(2*e.theme.layout.generalPaddingAmount,\"px)\")}),(function(e){return e.theme.breakpoints.tablet})),d=a.a.memo((function(e){var n=e.invert,t=void 0!==n&&n,o=e.leftLabel,a=e.leftDisabled,c=e.leftHandler,s=e.rightLabel,d=e.rightDisabled,l=e.rightHandler;return Object(r.jsxs)(u,{children:[Object(r.jsx)(i.a,{dark:t,disabled:a,onClick:c,children:o}),s&&l&&Object(r.jsx)(i.a,{dark:!t,disabled:d,onClick:l,children:s})]})})),l=a.a.memo(d)},172:function(e,n,t){\"use strict\";t.d(n,\"b\",(function(){return d})),t.d(n,\"a\",(function(){return l}));var r=t(158),o=t(157),a=t(161);function i(){var e=Object(r.a)([\"\\n  font-family: 'Open Sans';\\n  font-weight: 700;\\n  font-size: 24px;\\n  line-height: 1;\\n  color: \",\";\\n\"]);return i=function(){return e},e}function c(){var e=Object(r.a)([\"\\n  \",\"\\n  color: \",\";\\n  \",\"\\n\"]);return c=function(){return e},e}function s(){var e=Object(r.a)([\"\\n  font-family: 'Source Sans Pro';\\n  font-size: 0.875rem;\\n  line-height: 20px;\\n\"]);return s=function(){return e},e}var u=Object(o.css)(s()),d=o.default.div(c(),u,(function(e){return e.dark?a.a.darkBlack:a.a.black}),(function(e){return e.fontSize?\"font-size: \".concat(e.fontSize,\";\"):\"\"})),l=o.default.div(i(),a.a.darkBlack)},208:function(e,n,t){\"use strict\";t.r(n);var r=t(37),o=t(166),a=t(176),i=t.n(a),c=t(177),s=t(6),u=t.n(s),d=t(178),l=t.n(d),f=t(843),p=t(216),m=t(225),h=t(228),g=t(160),b=t(164),v=t(822),x=t.n(v),j=t(179),O=function(){var e=this,n=[];this.onmessage=function(t){\"encode\"===t.data[0]?function(e){for(var t=e.length,r=new Uint8Array(2*t*1),o=0;o<t;o+=1){var a=2*o*1,i=e[o];i>1?i=1:i<-1&&(i=-1),i*=32768,r[a]=i,r[a+1]=i>>8}n.push(r)}(t.data[1]):\"dump\"===t.data[0]?function(e){var t=n.length?n[0].length:0,r=n.length*t,o=new Uint8Array(44+r),a=new DataView(o.buffer);a.setUint32(0,1380533830,!1),a.setUint32(4,36+r,!0),a.setUint32(8,1463899717,!1),a.setUint32(12,1718449184,!1),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,1,!0),a.setUint32(24,e,!0),a.setUint32(28,1*e*2,!0),a.setUint16(32,2,!0),a.setUint16(34,16,!0),a.setUint32(36,1684108385,!1),a.setUint32(40,r,!0);for(var i=0;i<n.length;i+=1)o.set(n[i],i*t+44);n=[];var c=[o.buffer];postMessage(c,[c[0]])}(t.data[1]):\"close\"===t.data[0]&&e.close()}},y=function(){var e=null,n=1152,t=[];function r(e){var n=new Float32Array(e),t=new Int16Array(e.length);return function(e,n){for(var t=0;t<e.length;t+=1){var r=Math.max(-1,Math.min(1,e[t]));n[t]=r<0?32768*r:32767*r}}(n,t),t}onmessage=function(o){var a;\"encode\"===o.data[0]?function(o){for(var a=r(o),i=a.length,c=0;i>=0;c+=n){var s=a.subarray(c,c+n),u=e.encodeBuffer(s);t.push(u),i-=n}}(o.data[1]):\"dump\"===o.data[0]?function(){var n=e.flush();n.length>0&&t.push(n),postMessage(t),t=[]}(o.data[1]):\"init\"===o.data[0]?(a=o.data[1],importScripts(a.baseUrl+\"/workers/encoders/lame.min.js\"),e=new lamejs.Mp3Encoder(1,a.sampleRate,128)):\"close\"===o.data[0]&&this.close()}},C=function(){var e,n=Object({NODE_ENV:\"production\",PUBLIC_URL:\"\",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_WORKERS_HOST||\"https://virufy.org/demo\";importScripts(\"\".concat(n,\"/workers/encoders/libflac.dev.js\"));var t=1,r=44100,o=5,a=16,i=1,c=0,s=[],u=[];function d(e,n){s.push(e),c+=e.byteLength}function l(){if(0!==(e=Flac.init_libflac_encoder(r,t,a,o,0))){var n=Flac.init_encoder_stream(e,d);i&=0==n,console.log(\"flac init     : \".concat(i)),console.log(\"status encoder: \".concat(n)),!0}else console.error(\"Error initializing the encoder.\")}function f(n){for(var r=n.length,o=new Uint32Array(r),a=new DataView(o.buffer),i=0,c=0;c<r;c+=1)a.setInt32(i,32767*n[c],!0),i+=4;var s=Flac.FLAC__stream_encoder_process_interleaved(e,o,o.length/t);1!=s&&console.log(\"Error: encode_buffer_pcm_as_flac returned false. \".concat(s))}function p(e,n){var t=function(e,n){for(var t=new Uint8Array(n),r=0,o=e.length,a=0;a<o;a+=1){var i=e[a];t.set(i,r),r+=i.length}return t}(e,n);return new Blob([t],{type:\"audio/flac\"})}this.onmessage=function(n){if(\"init\"===n.data[0])!function(e){var n=e;n||(n={bps:a,channels:t,samplerate:r,compression:o}),n.channels=n.channels?n.channels:t,n.samplerate=n.samplerate?n.samplerate:r,n.bps=n.bps?n.bps:a,n.compression=n.compression?n.compression:o,o=n.compression,a=n.bps,r=n.samplerate,t=n.channels,Flac.isReady()?l():Flac.onready=function(){setTimeout((function(){l()}),0)}}(n.data[1]);else if(\"encode\"===n.data[0])!function(e){if(Flac.isReady()){if(u.length>0)for(var n=u.length,t=u.splice(0,n),r=0;r<n;++r)f(t[r]);f(e)}else u.push(e),console.info(\"buffered audio data for Flac encdoing\")}(n.data[1]);else if(\"dump\"===n.data[0]){var d;Flac.isReady()?(i&=Flac.FLAC__stream_encoder_finish(e),console.log(\"flac finish: \".concat(i)),d=p(s,c),Flac.FLAC__stream_encoder_delete(e)):console.error(\"Flac was not initialized: could not encode data!\"),s.splice(0,s.length),c=0,u.splice(0,u.length),postMessage(d),!1}}},w=function e(n){var t=this;Object(j.a)(this,e),this.cleanup=function(){t.config.onRecording&&t.em.removeEventListener(\"recording\",t.recordingFn),t.config.onAudioProcesss&&t.em.removeEventListener(\"onaudioprocess\",t.onAudioProcessFn)},this.createWorker=function(e){var n=e.toString().replace(/^function\\s*\\(\\)\\s*{/,\"\").replace(/}$/,\"\"),t=new Blob([n]);return new Worker(URL.createObjectURL(t))},this.startRecording=function(e){if(\"inactive\"===t.state&&navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){if(t.audioCtx=new AudioContext({sampleRate:t.config.sampleRate}),t.micGainNode=t.audioCtx.createGain(),t.outputGainNode=t.audioCtx.createGain(),t.config.createDynamicsCompressorNode&&(t.dynamicsCompressorNode=t.audioCtx.createDynamicsCompressor()),t.config.createAnalyserNode&&(t.analyserNode=t.audioCtx.createAnalyser()),(t.config.forceScriptProcessor||t.config.broadcastAudioProcessEvents||!t.config.usingMediaRecorder)&&(t.processorNode=t.audioCtx.createScriptProcessor(t.config.processorBufferSize,1,1)),t.audioCtx.createMediaStreamDestination?t.destinationNode=t.audioCtx.createMediaStreamDestination():t.destinationNode=t.audioCtx.destination,!t.config.usingMediaRecorder){if(\"mp3\"===t.config.manualEncoderId){t.encoderWorker=t.createWorker(y);t.encoderWorker.postMessage([\"init\",{baseUrl:\"https://virufy.org/demo\",sampleRate:t.audioCtx.sampleRate}]),t.encoderMimeType=\"audio/mpeg\"}else\"flac\"===t.config.manualEncoderId?(t.encoderWorker=t.createWorker(C),t.encoderWorker.postMessage([\"init\",{sampleRate:t.audioCtx.sampleRate}]),t.encoderMimeType=\"audio/flac\"):(t.encoderWorker=t.createWorker(O),t.encoderMimeType=\"audio/wav\");t.encoderWorker.addEventListener(\"message\",(function(e){var n=new Event(\"dataavailable\");\"ogg\"===t.config.manualEncoderId||\"flac\"===t.config.manualEncoderId?n.data=e.data:n.data=new Blob(e.data,{type:t.encoderMimeType}),t._onDataAvailable(n)}))}var n={audio:{echoCancellation:t.config.enableEchoCancellation}};return t.config.deviceId&&(n.audio.deviceId=t.config.deviceId),navigator.mediaDevices.getUserMedia(n).then((function(n){t._startRecordingWithStream(n,e)})).catch((function(e){console.log(e)}))}},this.setMicGain=function(e){t.config.micGain=e,t.audioCtx&&t.micGainNode&&t.micGainNode.gain.setValueAtTime(e,t.audioCtx.currentTime)},this._startRecordingWithStream=function(e,n){t.micAudioStream=e,t.inputStreamNode=t.audioCtx.createMediaStreamSource(t.micAudioStream),t.audioCtx=t.inputStreamNode.context,t.onGraphSetupWithInputStream&&t.onGraphSetupWithInputStream(t.inputStreamNode),t.inputStreamNode.connect(t.micGainNode),t.micGainNode.gain.setValueAtTime(t.config.micGain,t.audioCtx.currentTime);var r=t.micGainNode;t.dynamicsCompressorNode&&(t.micGainNode.connect(t.dynamicsCompressorNode),r=t.dynamicsCompressorNode),t.state=\"recording\",t.processorNode?(r.connect(t.processorNode),t.processorNode.connect(t.outputGainNode),t.processorNode.onaudioprocess=function(e){return t._onAudioProcess(e)}):r.connect(t.outputGainNode),t.analyserNode&&r.connect(t.analyserNode),t.outputGainNode.connect(t.destinationNode),t.config.usingMediaRecorder?(t.mediaRecorder=new MediaRecorder(t.destinationNode.stream,{mimeType:t.encoderMimeType||\"audio/wav\"}),t.mediaRecorder.addEventListener(\"dataavailable\",(function(e){return t._onDataAvailable(e)})),t.mediaRecorder.addEventListener(\"error\",(function(e){return t._onError(e)})),t.mediaRecorder.start(n)):(t.outputGainNode.gain.setValueAtTime(0,t.audioCtx.currentTime),n&&(console.log(\"Time slicing without MediaRecorder is not yet supported. The resulting recording will not be playable.\"),t.slicing=setInterval((function(){\"recording\"===this.state&&this.encoderWorker.postMessage([\"dump\",this.context.sampleRate])}),n)))},this._onAudioProcess=function(e){t.config.broadcastAudioProcessEvents&&t.em.dispatchEvent(new CustomEvent(\"onaudioprocess\",{detail:{inputBuffer:e.inputBuffer,outputBuffer:e.outputBuffer}})),t.config.usingMediaRecorder||\"recording\"===t.state&&(t.config.broadcastAudioProcessEvents?t.encoderWorker.postMessage([\"encode\",e.outputBuffer.getChannelData(0)]):t.encoderWorker.postMessage([\"encode\",e.inputBuffer.getChannelData(0)]))},this.stopRecording=function(){\"inactive\"!==t.state&&(t.config.usingMediaRecorder?(t.state=\"inactive\",t.mediaRecorder.stop()):(t.state=\"inactive\",t.encoderWorker.postMessage([\"dump\",t.audioCtx.sampleRate]),clearInterval(t.slicing)))},this._onDataAvailable=function(e){if(t.chunks.push(e.data),t.chunkType=e.data.type,\"inactive\"===t.state){var n=new Blob(t.chunks,{type:t.chunkType}),r=URL.createObjectURL(n),o={ts:(new Date).getTime(),blobUrl:r,mimeType:n.type,size:n.size};t.chunks=[],t.chunkType=null,t.destinationNode&&(t.destinationNode.disconnect(),t.destinationNode=null),t.outputGainNode&&(t.outputGainNode.disconnect(),t.outputGainNode=null),t.analyserNode&&(t.analyserNode.disconnect(),t.analyserNode=null),t.processorNode&&(t.processorNode.disconnect(),t.processorNode=null),t.encoderWorker&&(t.encoderWorker.postMessage([\"close\"]),t.encoderWorker=null),t.dynamicsCompressorNode&&(t.dynamicsCompressorNode.disconnect(),t.dynamicsCompressorNode=null),t.micGainNode&&(t.micGainNode.disconnect(),t.micGainNode=null),t.inputStreamNode&&(t.inputStreamNode.disconnect(),t.inputStreamNode=null),t.config.stopTracksAndCloseCtxWhenFinished&&(t.micAudioStream.getTracks().forEach((function(e){return e.stop()})),t.micAudioStream=null,t.audioCtx.close(),t.audioCtx=null),t.em.dispatchEvent(new CustomEvent(\"recording\",{detail:{recording:o}}))}},this._onError=function(e){console.log(\"error\",e),t.em.dispatchEvent(new Event(\"error\"))},window.AudioContext=window.AudioContext||window.webkitAudioContext,this.em=document.createDocumentFragment(),this.state=\"inactive\",this.chunks=[],this.chunkType=\"\",this.encoderMimeType=\"audio/wav\",this.config={broadcastAudioProcessEvents:void 0!==n.broadcastAudioProcessEvents&&n.broadcastAudioProcessEvents,createAnalyserNode:void 0!==n.createAnalyserNode&&n.createAnalyserNode,createDynamicsCompressorNode:void 0!==n.createDynamicsCompressorNode&&n.createDynamicsCompressorNode,forceScriptProcessor:void 0!==n.forceScriptProcessor&&n.forceScriptProcessor,manualEncoderId:void 0!==n.manualEncoderId?n.manualEncoderId:\"wav\",micGain:void 0!==n.micGain?n.micGain:1,processorBufferSize:void 0!==n.processorBufferSize?n.processorBufferSize:2048,stopTracksAndCloseCtxWhenFinished:void 0===n.stopTracksAndCloseCtxWhenFinished||n.stopTracksAndCloseCtxWhenFinished,usingMediaRecorder:void 0!==n.usingMediaRecorder?n.usingMediaRecorder:\"undefined\"!==typeof window.MediaRecorder,enableEchoCancellation:void 0===n.enableEchoCancellation||n.enableEchoCancellation,sampleRate:void 0!==n.sampleRate?n.sampleRate:44100,onRecording:n.onRecording,onAudioPress:n.onAudioPress},n.onRecording&&(this.recordingFn=function(e){return n.onRecording(e)},this.em.addEventListener(\"recording\",this.recordingFn)),n.onAudioProcesss&&(this.onAudioProcessFn=function(e){return n.onAudioProcesss(e)},this.em.addEventListener(\"onaudioprocess\",this.onAudioProcessFn))},R=t(245),k=t(246),S=t(175),E=t(829),N=t.n(E),T=t(167),A=t(158),M=t(157);function B(){var e=Object(A.a)([\"\\n  font-family: 'Source Sans Pro';\\n  text-align: center;\\n  line-height: 25px;\\n  font-size: 18px;\\n  margin-top: 10px;\\n  margin-bottom: 30px;\\n\"]);return B=function(){return e},e}function _(){var e=Object(A.a)([\"\\n  font-family: 'Biko';\\n  font-size: 30px;\\n  line-height: 30px;\\n  margin-bottom: 10px;\\n  font-weight: 600;\\n\"]);return _=function(){return e},e}function U(){var e=Object(A.a)([\"\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n\\n  @media screen and (\",\") {\\n    margin: auto;\\n\"]);return U=function(){return e},e}var F=M.default.div(U(),(function(e){return e.theme.breakpoints.tablet})),P=M.default.div(_()),D=M.default.div(B());N.a.setAppElement(\"#root\");var I=u.a.memo((function(e){var n=e.modalTitle,t=e.children,o=e.onConfirm,a=Object(S.a)(e,[\"modalTitle\",\"children\",\"onConfirm\"]),i=Object(f.a)().t;return Object(r.jsx)(N.a,Object(g.a)(Object(g.a)({},a),{},{style:{content:{height:\"281px\",maxWidth:\"348px\",margin:\"auto\",borderRadius:\"10px\",border:\"none\"},overlay:{backgroundColor:\"rgba(0, 0, 0, 0.5)\"}},children:Object(r.jsxs)(F,{className:\"ModalBody\",children:[Object(r.jsx)(P,{children:n}),Object(r.jsx)(D,{children:t}),Object(r.jsx)(T.a,{onClick:o,dark:!0,children:i(\"recordingsIntroduction:retryButton\",\"Retry\")})]})}))})),L=t.p+\"static/media/start.e0d4d3a6.svg\",z=t(269),G=t(161);function W(){var e=Object(A.a)([\"\\n  visibility: \",\";\\n\"]);return W=function(){return e},e}function V(){var e=Object(A.a)([\"\\n  font-size: 16px;\\n  line-height: 20px;\\n  color: \",\";\\n  font-family: 'Source Sans Pro';\\n  display: flex; \\n  margin-left: 20px;\\n  margin-top:10px;\\n\"]);return V=function(){return e},e}function H(){var e=Object(A.a)([\"\\n  width: 70px;\\n  height: 41px;\\n  font-size: 1.25rem;\\n  color: \",\";\\n  font-weight: bold;\\n  font-family: 'Source Sans Pro';\\n  border: 1px solid \",\";\\n  border-radius: 15px;\\n  display: flex; \\n  align-items: center; \\n  justify-content: center; \\n  margin-bottom: 28px;\\n\\n  @media screen and (\",\") {\\n    font-size: 1.75rem;\\n    margin-top: 22px;\\n  }\\n\"]);return H=function(){return e},e}function K(){var e=Object(A.a)([\"\\n  width: 15px;\\n  height: 15px;\\n\"]);return K=function(){return e},e}function Z(){var e=Object(A.a)([\"\\n  width: 27px;\\n  height: 27px;\\n\"]);return Z=function(){return e},e}function J(){var e=Object(A.a)([\"\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n  transition: opacity 0.25s;\\n\"]);return J=function(){return e},e}function Y(){var e=Object(A.a)([\"\\n  background-color: \",\";\\n  width: 56px;\\n  height: 56px;\\n  position: relative;\\n  outline: none !important;\\n  border: none;\\n  border-radius: 50%;\\n  padding: 0;\\n  transition: background-color 0.25s;\\n  opacity: \",\";\\n\\n  @supports not (-webkit-touch-callout: none) {\\n    /* CSS for other than iOS devices */\\n    -webkit-tap-highlight-color: transparent;\\n  }\\n\\n  &:active {\\n    background-color: \",\";\\n  }\\n\\n  &:before {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    bottom: 0;\\n    left: 0;\\n    right: 0;\\n    background-color: transparent;\\n    z-index: 1;\\n    border-radius: 50%;\\n  }\\n\\n  @media screen and (\",\") {\\n    width: 66px;\\n    height: 66px;\\n  }\\n\"]);return Y=function(){return e},e}function q(){var e=Object(A.a)([\"\\n  font-size: 14px;\\n  color: \",\";\\n  margin-top: 8px;\\n  margin-bottom: 0px;\\n\"]);return q=function(){return e},e}function Q(){var e=Object(A.a)([\"\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n\"]);return Q=function(){return e},e}function $(){var e=Object(A.a)([\"\\n  display:flex;\\n  justify-content: space-between;\\n  width: 144px;\\n  margin: auto;\\n\"]);return $=function(){return e},e}function X(){var e=Object(A.a)([\"\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: flex-start;\\n\"]);return X=function(){return e},e}var ee=M.default.div(X()),ne=M.default.div($()),te=M.default.div(Q()),re=M.default.p(q(),G.a.lightDarkGray),oe=M.default.button(Y(),G.a.purple,(function(e){return e.disabled||e.opacity?\"0.5\":\"1\"}),G.a.purple,(function(e){return e.theme.breakpoints.tablet})),ae=M.default.img(J()),ie=Object(M.default)(ae)(Z()),ce=Object(M.default)(ae)(K()),se=M.default.div(H(),G.a.purple,G.a.purple,(function(e){return e.theme.breakpoints.tablet})),ue=M.default.div(V(),G.a.red),de=M.default.p(W(),(function(e){return e.show?\"flex\":\"hidden\"})),le={usingMediaRecorder:!1,sampleRate:48e3,manualEncoderId:\"wav\",processorBufferSize:2048},fe=function(e){var n=e.className,t=void 0===n?\"\":n,o=e.maxTimeInSeconds,a=void 0===o?30:o,s=e.onNewRecord,d=e.delay,l=void 0===d?500:d,p=e.recordingFile,m=Object(f.a)().t,h=u.a.useRef(),v=u.a.useRef(0),j=u.a.useRef(),O=u.a.useRef(),y=u.a.useRef(),C=u.a.useState(!0),S=Object(b.a)(C,2),E=S[0],N=S[1],T=u.a.useState(),A=Object(b.a)(T,2),M=A[0],B=A[1],_=u.a.useState(!1),U=Object(b.a)(_,2),F=U[0],P=U[1],D=u.a.useState(!1),G=Object(b.a)(D,2),W=G[0],V=G[1],H=u.a.useState(!1),K=Object(b.a)(H,2),Z=K[0],J=K[1],Y=u.a.useCallback((function(e){v.current+=1;for(var n=e.detail,t=n.inputBuffer,r=n.outputBuffer,o=0;o<r.numberOfChannels;o+=1)for(var a=t.getChannelData(o),i=r.getChannelData(o),c=0;c<t.length;c+=1)i[c]=a[c]}),[]),q=u.a.useCallback(function(){var e=Object(c.a)(i.a.mark((function e(n){var t,r,o,a,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.detail,r=t.recording,e.next=4,fetch(r.blobUrl).then((function(e){return e.blob()}));case 4:o=e.sent,a=\"Filename.\".concat(le.manualEncoderId),c=R.a.blobToFile(o,a),u=R.a.sizeAsHuman(c.size,!0),s(c,u);case 9:case\"end\":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[s]);u.a.useEffect((function(){h.current=new w(Object(g.a)(Object(g.a)({},le),{},{onRecording:q,onAudioProcesss:Y}));var e={audio:{echoCancellation:h.current.config.enableEchoCancellation}};if(navigator.mediaDevices.getUserMedia(e).then((function(){N(!0)})).catch((function(){N(!1)})),p){var n=p;if(n.size){var t=new Audio(URL.createObjectURL(n));t.load();var r=function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.removeEventListener(\"loadedmetadata\",r),Object(k.a)(t,!0).then((function(e){var n;null===(n=j.current)||void 0===n||n.setTime(1e3*e)}));case 2:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.addEventListener(\"loadedmetadata\",r)}}return function(){h.current&&h.current.cleanup()}}),[]);var Q=u.a.useCallback((function(){h.current&&(v.current=0,h.current.startRecording().then((function(){var e;(B(!0),V(!1),j.current)&&(j.current.reset(),null===(e=j.current)||void 0===e||e.setTime(0),j.current.start())})).catch((function(e){return console.error(\"ERROR\",e)})))}),[]),$=u.a.useCallback((function(){h.current&&(h.current.stopRecording(),B(!1),j.current&&(j.current.getTime()/1e3<2&&V(!0),j.current.stop()))}),[]),X=u.a.useCallback((function(e){return e<10?\"0\".concat(e):e}),[]),ae=function(e){\"touches\"in e||e.preventDefault()},fe=u.a.useCallback((function(e){e.target&&(e.target.addEventListener(\"touchend\",ae,{passive:!1}),y.current=e.target),O.current=setTimeout((function(){P(!0),J(!0),V(!1)}),l)}),[l]),pe=u.a.useCallback((function(){O.current&&clearTimeout(O.current),Z&&P(!1),J(!1),y.current&&y.current.removeEventListener(\"touchend\",ae)}),[Z]);return Object(r.jsxs)(ee,{className:t,children:[Object(r.jsxs)(ue,{children:[!W&&Object(r.jsx)(de,{show:F,children:m(M?\"recordingsIntroduction:releaseButtonStop\":\"recordingsIntroduction:releaseButtonStart\")}),Object(r.jsx)(I,{isOpen:W,modalTitle:\"Oops.\",onConfirm:Q,children:m(\"recordingsIntroduction:shortRecording\")})]}),Object(r.jsx)(se,{children:Object(r.jsxs)(x.a,{ref:j,startImmediately:!1,checkpoints:[{time:1e3*a,callback:$}],children:[Object(r.jsx)(x.a.Minutes,{}),\":\",Object(r.jsx)(x.a.Seconds,{formatValue:X})]})}),Object(r.jsxs)(ne,{children:[Object(r.jsxs)(te,{children:[Object(r.jsx)(oe,{disabled:!E||M,onClick:Q,onMouseDown:fe,onMouseUp:pe,onTouchStart:fe,onTouchEnd:pe,onMouseLeave:pe,children:Object(r.jsx)(ie,{src:L,alt:\"Start\"})}),Object(r.jsx)(re,{children:m(\"recordingsIntroduction:recordCough.record\")})]}),Object(r.jsxs)(te,{children:[Object(r.jsx)(oe,{disabled:!E||!M,onClick:$,onMouseDown:fe,onMouseUp:pe,onTouchStart:fe,onTouchEnd:pe,onMouseLeave:pe,children:Object(r.jsx)(ce,{src:z.a,alt:\"Stop\"})}),Object(r.jsx)(re,{children:m(\"recordingsIntroduction:recordCough.stop\")})]})]})]})},pe=u.a.memo(fe),me=t(169),he=t.p+\"static/media/upload.21eec1c7.svg\",ge=t(270),be=h.b({recordingFile:h.a().required(\"ERROR.FILE_REQUIRED\").test(\"fileSize\",\"ERROR.FILE_SIZE\",(function(e){return e?e.size<=5*Math.pow(1024,3):!!e})).test(\"fileDuration\",\"ERROR.FILE_DURATION\",function(){var e=Object(c.a)(i.a.mark((function e(n){var t,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=10;break}return t=n,(r=new Audio(URL.createObjectURL(t))).load(),e.next=6,new Promise((function(e){return r.addEventListener(\"loadedmetadata\",e)}));case 6:return e.next=8,new Promise((function(e){r.duration!==1/0&&e(r.duration),r.addEventListener(\"durationchange\",(function(){r.remove(),e(r.duration)})),r.volume=0,r.currentTime=86400,r.play()}));case 8:return o=e.sent,e.abrupt(\"return\",o>=2);case 10:return e.abrupt(\"return\",!!n);case 11:case\"end\":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}).defined(),ve=function(e){var n=e.onNext,t=e.onManualUpload,a=e.defaultValues,i=e.currentLogic,c=e.action,s=l()({bindTo:document&&document.getElementById(\"wizard-buttons\")}).Portal,d=Object(p.c)({mode:\"onChange\",defaultValues:a,resolver:Object(m.yupResolver)(be)}),h=d.handleSubmit,g=d.control,b=d.getValues,v=d.formState,x=Object(f.a)().t,j=v.isValid,O=u.a.useRef(1);return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(ge.MainContainer,{children:[Object(r.jsx)(ge.MicContainer,{children:Object(r.jsx)(p.a,{control:g,name:\"recordingFile\",render:function(e){var n=e.onChange;return Object(r.jsx)(pe,{onNewRecord:n,recordingFile:null===a||void 0===a?void 0:a.recordingFile},O.current)}})}),Object(r.jsxs)(s,{children:[Object(r.jsx)(me.a,{invert:!0,leftLabel:x(\"recordingsRecord:next\"),leftDisabled:!j,leftHandler:h(n)}),Object(r.jsxs)(ge.UploadContainer,{onClick:function(){c(Object(o.a)({},i,{recordingFile:b(\"recordingFile\")||null,uploadedFile:null})),null===t||void 0===t||t()},children:[Object(r.jsx)(ge.UploadImage,{src:he}),Object(r.jsx)(ge.UploadText,{children:x(\"recordingsRecord:upload\")})]})]})]})})};n.default=u.a.memo(ve)},245:function(e,n,t){\"use strict\";n.a={sizeAsHuman:function(e,n){var t=n?1e3:1024;if(Math.abs(e)<t)return\"\".concat(e,\" B\");var r=n?[\"kB\",\"MB\",\"GB\",\"TB\",\"PB\",\"EB\",\"ZB\",\"YB\"]:[\"KiB\",\"MiB\",\"GiB\",\"TiB\",\"PiB\",\"EiB\",\"ZiB\",\"YiB\"],o=-1;do{e/=t,++o}while(Math.abs(e)>=t&&o<r.length-1);return\"\".concat(e.toFixed(1),\" \").concat(r[o])},blobToFile:function(e,n){var t=e;return t.lastModifiedDate=new Date,t.name=n,e}}},246:function(e,n,t){\"use strict\";t.d(n,\"a\",(function(){return o}));var r=t(325);function o(e,n){return new Promise((function(t){e.duration===1/0||r.isSafari&&!(r.isSafari&&e.duration>0)?(e.addEventListener(\"durationchange\",(function(){n?e.remove():(e.pause(),e.volume=1,e.currentTime=0),t(e.duration)})),e.currentTime=86400,e.play()):t(e.duration)}))}},269:function(e,n,t){\"use strict\";n.a=t.p+\"static/media/stop.e6f44abd.svg\"},270:function(e,n,t){\"use strict\";t.r(n),t.d(n,\"MainContainer\",(function(){return h})),t.d(n,\"Text\",(function(){return g})),t.d(n,\"MicContainer\",(function(){return b})),t.d(n,\"UploadContainer\",(function(){return v})),t.d(n,\"UploadImage\",(function(){return x})),t.d(n,\"UploadText\",(function(){return j})),t.d(n,\"StopImg\",(function(){return O}));var r=t(158),o=t(157),a=t(172),i=t(161),c=t(269);function s(){var e=Object(r.a)([\"\\n  display: inline;\\n  height: 10px;\\n  margin: 0px 2px 4px;\\n\"]);return s=function(){return e},e}function u(){var e=Object(r.a)([\"\\n  cursor: pointer;\\n  font-family: Source Sans Pro;\\n  font-weight: bold;\\n  font-size: 0.75rem;\\n  line-height: 24px;\\n  color: \",\";\\n\"]);return u=function(){return e},e}function d(){var e=Object(r.a)([\"\\n  cursor: pointer;\\n  width: 13px;\\n  height: 12px;\\n  margin-right: 7px;\\n\"]);return d=function(){return e},e}function l(){var e=Object(r.a)([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  padding: 0px 20px;\\n  margin: 20px auto;\\n  width: fit-content;\\n\\n\\n  @media screen and (\",\"){\\n    padding: 0px 22px;\\n    margin: 22px auto;\\n  }\\n\"]);return l=function(){return e},e}function f(){var e=Object(r.a)([\"\"]);return f=function(){return e},e}function p(){var e=Object(r.a)([\"\\n  color: \",\";\\n  margin-bottom: 2px;\\n  text-align: left;\\n\\n  @media screen and (\",\"){\\n    max-width: 470px;\\n    margin: 0 auto;\\n    font-size: 16px;\\n  }\\n\\n  @media screen and (\",\"){\\n    @media (orientation: portrait) {\\n      margin-bottom: 248px;\\n    }\\n\\n    @media (orientation: landscape) {\\n      margin-bottom: 24px;\\n    }\\n  }\\n\"]);return p=function(){return e},e}function m(){var e=Object(r.a)([\"\\n  padding: 0px 0px;\\n\"]);return m=function(){return e},e}var h=o.default.div(m()),g=Object(o.default)(a.b)(p(),(function(e){return e.theme.colors.darkBlack}),(function(e){return e.theme.breakpoints.tablet}),(function(e){return e.theme.breakpoints.tablet})),b=o.default.div(f()),v=o.default.div(l(),(function(e){return e.theme.breakpoints.tablet})),x=o.default.img(d()),j=o.default.div(u(),i.a.darkBlack),O=o.default.img.attrs((function(){return{src:c.a}}))(s())}}]);","name":"static/js/4.f559aaac.chunk.js","map":{"version":3,"sources":["static/js/4.f559aaac.chunk.js"],"names":["this","push","167","module","__webpack_exports__","__webpack_require__","d","Button_Button","objectSpread2","jsx_runtime","objectWithoutProperties","react","react_default","n","taggedTemplateLiteral","styled_components_browser_esm","theme","_templateObject","data","Object","StyledButton","button","_ref","dark","color","disabled","purple_50","purple","concat","white","a","memo","children","props","type","169","WizardButtons_WizardButtons","Button","WizardButtonsContainer","div","layout","generalPaddingAmount","breakpoints","tablet","WizardButtons","_ref$invert","invert","leftLabel","leftDisabled","leftHandler","rightLabel","rightDisabled","rightHandler","onClick","172","BlackText","BaseTitle","_templateObject3","_templateObject2","BaseText","darkBlack","black","fontSize","208","r","defineProperty","regenerator","regenerator_default","asyncToGenerator","usePortal","usePortal_default","useTranslation","index_esm","yup","es","slicedToArray","build","build_default","classCallCheck","encoder_wav_worker","_this","recorded","onmessage","e","buffer","length","Uint8Array","i","index","sample","encode","sampleRate","bufferLength","wav","view","DataView","setUint32","setUint16","CHANNELS","set","msg","postMessage","dump","close","encoder_mp3_worker","mp3encoder","maxSamples","mp3Data","convertBuffer","arrayBuffer","Float32Array","out","Int16Array","input","output","s","Math","max","min","floatTo16BitPCM","opts","samplesMono","remaining","left","subarray","encodeBuffer","mp3buf","flush","importScripts","baseUrl","lamejs","Mp3Encoder","encoder_flac_worker","flacEncoder","workersHost","NODE_ENV","PUBLIC_URL","WDS_SOCKET_HOST","undefined","WDS_SOCKET_PATH","WDS_SOCKET_PORT","FAST_REFRESH","REACT_APP_WORKERS_HOST","SAMPLERATE","COMPRESSION","BPS","flacOk","flacLength","flacBuffers","wavBuffers","writeCallbackFn","bytes","byteLength","initFlac","Flac","init_libflac_encoder","statusEncoder","init_encoder_stream","console","log","error","doEncodeFlac","audioData","bufLength","bufferI32","Uint32Array","setInt32","flacReturn","FLAC__stream_encoder_process_interleaved","exportFlacFile","recBuffers","recLength","samples","channelBuffer","recordingLength","result","offset","lng","mergeBuffersUint8","Blob","config","finalConfig","bps","channels","samplerate","compression","isReady","onready","setTimeout","init","len","buffered","splice","info","encodeFlac","FLAC__stream_encoder_finish","FLAC__stream_encoder_delete","RecorderService_RecorderService","RecorderService","cleanup","onRecording","em","removeEventListener","recordingFn","onAudioProcesss","onAudioProcessFn","createWorker","fn","js","toString","replace","blob","Worker","URL","createObjectURL","startRecording","timeslice","state","navigator","mediaDevices","getUserMedia","audioCtx","AudioContext","micGainNode","createGain","outputGainNode","createDynamicsCompressorNode","dynamicsCompressorNode","createDynamicsCompressor","createAnalyserNode","analyserNode","createAnalyser","forceScriptProcessor","broadcastAudioProcessEvents","usingMediaRecorder","processorNode","createScriptProcessor","processorBufferSize","createMediaStreamDestination","destinationNode","destination","manualEncoderId","encoderWorker","encoderMimeType","addEventListener","event","Event","_onDataAvailable","userMediaConstraints","audio","echoCancellation","enableEchoCancellation","deviceId","then","stream","_startRecordingWithStream","catch","setMicGain","newGain","micGain","gain","setValueAtTime","currentTime","micAudioStream","inputStreamNode","createMediaStreamSource","context","onGraphSetupWithInputStream","connect","nextNode","onaudioprocess","_onAudioProcess","mediaRecorder","MediaRecorder","mimeType","evt","_onError","start","slicing","setInterval","dispatchEvent","CustomEvent","detail","inputBuffer","outputBuffer","getChannelData","stopRecording","stop","clearInterval","chunks","chunkType","blobUrl","recording","ts","Date","getTime","size","disconnect","stopTracksAndCloseCtxWhenFinished","getTracks","forEach","track","window","webkitAudioContext","document","createDocumentFragment","onAudioPress","fileHelper","getDuration","lib","lib_default","ModalBody","ModalTitle","ModalContent","setAppElement","RecordErrorModal_RecordErrorModal","modalTitle","onConfirm","t","style","content","height","maxWidth","margin","borderRadius","border","overlay","backgroundColor","className","p","_templateObject11","_templateObject10","_templateObject9","_templateObject8","_templateObject7","_templateObject6","_templateObject5","_templateObject4","style_templateObject3","style_templateObject2","style_templateObject","MicRecorderContainer","MicButtonsContainer","MicButtonWithText","MicNote","lightDarkGray","MicRecorderButton","opacity","MicRecorderImage","img","MicRecorderStartImage","MicRecorderStopImage","MicRecorderTimerContainer","MicRecorderTimerReleaseTextContainer","red","MicRecorderTextP","show","baseConfig","MicRecorder_MicRecorder","_ref$className","_ref$maxTimeInSeconds","maxTimeInSeconds","onNewRecord","_ref$delay","delay","recordingFile","recordingService","useRef","audioSamples","timerRef","timeout","target","_React$useState","useState","_React$useState2","micAllowed","setMicAllowed","_React$useState3","_React$useState4","recordingInProgress","setRecordingInProgress","_React$useState5","_React$useState6","showReleaseText","setShowReleaseText","_React$useState7","_React$useState8","showShortRecordingText","setShowShortRecordingText","_React$useState9","_React$useState10","longPressTriggered","setLongPressTriggered","onAudioProcess","useCallback","current","_e$detail","channel","numberOfChannels","inputData","outputData","onNewRecording","_ref2","mark","_callee","fileName","file","humanReadableSize","wrap","_context","prev","next","fetch","sent","blobToFile","sizeAsHuman","_x","apply","arguments","useEffect","_file","Audio","load","listenerFn","_ref3","_callee2","_context2","_timerRef$current","setTime","handleStartRecording","_timerRef$current2","reset","handleStopRecording","handleFormatValue","value","preventDefault","handleStartLongPress","passive","handleEndLongPress","clearTimeout","isOpen","ref","startImmediately","checkpoints","time","callback","Minutes","Seconds","formatValue","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","onMouseLeave","src","alt","components_MicRecorder_MicRecorder","upload","schema","required","test","pow","duration","Promise","resolver","Infinity","remove","volume","play","abrupt","defined","Record_Record","onNext","onManualUpload","defaultValues","currentLogic","action","Portal","bindTo","getElementById","_useForm","mode","handleSubmit","control","getValues","formState","isValid","micKey","name","render","onChange","uploadedFile","245","si","thresh","abs","units","u","toFixed","theBlob","b","lastModifiedDate","246","react_device_detect__WEBPACK_IMPORTED_MODULE_0__","pause","269","270","MainContainer","Text","MicContainer","UploadContainer","UploadImage","UploadText","StopImg","_home_amil_virufy_demo_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__","styled_components__WEBPACK_IMPORTED_MODULE_1__","components_Texts__WEBPACK_IMPORTED_MODULE_2__","theme__WEBPACK_IMPORTED_MODULE_3__","assets_icons_stop_svg__WEBPACK_IMPORTED_MODULE_4__","colors","attrs"],"mappings":"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"},"input":"(this[\"webpackJsonppwa-demo\"] = this[\"webpackJsonppwa-demo\"] || []).push([[4,30],{\n\n/***/ 167:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* reexport */ Button_Button; });\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(160);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(37);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js + 1 modules\nvar objectWithoutProperties = __webpack_require__(175);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(6);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\nvar taggedTemplateLiteral = __webpack_require__(158);\n\n// EXTERNAL MODULE: ./node_modules/styled-components/dist/styled-components.browser.esm.js\nvar styled_components_browser_esm = __webpack_require__(157);\n\n// EXTERNAL MODULE: ./src/theme/index.ts\nvar theme = __webpack_require__(161);\n\n// CONCATENATED MODULE: ./src/components/Button/style.ts\nfunction _templateObject(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  height: 52px;\\n  border-radius: 15px; \\n  font-family: 'Source Sans Pro'; /* It could be removed if default on body changes */\\n  font-weight: bold;\\n  font-size: 14px;\\n  font-weight: bold;\\n  width: 100%;\\n\\n  \",\"\\n\"]);_templateObject=function _templateObject(){return data;};return data;}var StyledButton=styled_components_browser_esm[\"default\"].button(_templateObject(),function(_ref){var dark=_ref.dark,disabled=_ref.disabled;var color=disabled?theme[\"a\" /* colors */].purple_50:theme[\"a\" /* colors */].purple;return dark?\"\\n    background-color: \".concat(color,\";\\n    color: \").concat(theme[\"a\" /* colors */].white,\";\\n    border: none;\\n  \"):\"\\n    background-color: \".concat(theme[\"a\" /* colors */].white,\";\\n    color: \").concat(color,\";\\n    border: 1px solid \").concat(color,\";\\n  \");});\n// CONCATENATED MODULE: ./src/components/Button/Button.tsx\n// Styles\nvar Button=/*#__PURE__*/react_default.a.memo(function(_ref){var children=_ref.children,props=Object(objectWithoutProperties[\"a\" /* default */])(_ref,[\"children\"]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(StyledButton,Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({type:\"button\"},props),{},{children:children}));});/* harmony default export */ var Button_Button = (Button);\n// CONCATENATED MODULE: ./src/components/Button/index.ts\n\n\n/***/ }),\n\n/***/ 169:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* reexport */ WizardButtons_WizardButtons; });\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(37);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(6);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./src/components/Button/index.ts + 2 modules\nvar Button = __webpack_require__(167);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\nvar taggedTemplateLiteral = __webpack_require__(158);\n\n// EXTERNAL MODULE: ./node_modules/styled-components/dist/styled-components.browser.esm.js\nvar styled_components_browser_esm = __webpack_require__(157);\n\n// CONCATENATED MODULE: ./src/components/WizardButtons/style.ts\nfunction _templateObject(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  max-width: \",\";\\n  margin: 0 auto;\\n\\n  button {\\n    flex: 1;\\n\\n    &:first-of-type {\\n      margin-left: 0px !important;\\n    }\\n\\n    &:last-of-type {\\n      margin-left: 20px;\\n    }\\n  }\\n\\n  @media screen and (\",\"){\\n    max-width: 470px;\\n  }\\n\"]);_templateObject=function _templateObject(){return data;};return data;}var WizardButtonsContainer=styled_components_browser_esm[\"default\"].div(_templateObject(),function(props){return\"calc(100% - \".concat(props.theme.layout.generalPaddingAmount*2,\"px)\");},function(props){return props.theme.breakpoints.tablet;});\n// CONCATENATED MODULE: ./src/components/WizardButtons/WizardButtons.tsx\n/* eslint-disable react/require-default-props */// Components\n// Styles\nvar WizardButtons=/*#__PURE__*/react_default.a.memo(function(_ref){var _ref$invert=_ref.invert,invert=_ref$invert===void 0?false:_ref$invert,leftLabel=_ref.leftLabel,leftDisabled=_ref.leftDisabled,leftHandler=_ref.leftHandler,rightLabel=_ref.rightLabel,rightDisabled=_ref.rightDisabled,rightHandler=_ref.rightHandler;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WizardButtonsContainer,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{dark:invert,disabled:leftDisabled,onClick:leftHandler,children:leftLabel}),rightLabel&&rightHandler&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{dark:!invert,disabled:rightDisabled,onClick:rightHandler,children:rightLabel})]});});/* harmony default export */ var WizardButtons_WizardButtons = (/*#__PURE__*/react_default.a.memo(WizardButtons));\n// CONCATENATED MODULE: ./src/components/WizardButtons/index.tsx\n\n\n/***/ }),\n\n/***/ 172:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"b\", function() { return /* reexport */ BlackText; });\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* reexport */ BaseTitle; });\n\n// UNUSED EXPORTS: BaseText\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\nvar taggedTemplateLiteral = __webpack_require__(158);\n\n// EXTERNAL MODULE: ./node_modules/styled-components/dist/styled-components.browser.esm.js\nvar styled_components_browser_esm = __webpack_require__(157);\n\n// EXTERNAL MODULE: ./src/theme/index.ts\nvar theme = __webpack_require__(161);\n\n// CONCATENATED MODULE: ./src/components/Texts/Texts.ts\nfunction _templateObject3(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  font-family: 'Open Sans';\\n  font-weight: 700;\\n  font-size: 24px;\\n  line-height: 1;\\n  color: \",\";\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  \",\"\\n  color: \",\";\\n  \",\"\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  font-family: 'Source Sans Pro';\\n  font-size: 0.875rem;\\n  line-height: 20px;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}var BaseText=Object(styled_components_browser_esm[\"css\"])(_templateObject());var BlackText=styled_components_browser_esm[\"default\"].div(_templateObject2(),BaseText,function(_ref){var dark=_ref.dark;return dark?theme[\"a\" /* colors */].darkBlack:theme[\"a\" /* colors */].black;},function(props){return props.fontSize?\"font-size: \".concat(props.fontSize,\";\"):'';});var BaseTitle=styled_components_browser_esm[\"default\"].div(_templateObject3(),theme[\"a\" /* colors */].darkBlack);\n// CONCATENATED MODULE: ./src/components/Texts/index.ts\n\n\n/***/ }),\n\n/***/ 208:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(37);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(166);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(176);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(177);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(6);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-useportal/dist/usePortal.js\nvar usePortal = __webpack_require__(178);\nvar usePortal_default = /*#__PURE__*/__webpack_require__.n(usePortal);\n\n// EXTERNAL MODULE: ./node_modules/react-i18next/dist/es/useTranslation.js\nvar useTranslation = __webpack_require__(843);\n\n// EXTERNAL MODULE: ./node_modules/react-hook-form/dist/index.esm.js\nvar index_esm = __webpack_require__(216);\n\n// EXTERNAL MODULE: ./node_modules/@hookform/resolvers/yup.js\nvar yup = __webpack_require__(225);\n\n// EXTERNAL MODULE: ./node_modules/yup/es/index.js + 31 modules\nvar es = __webpack_require__(228);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(160);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(164);\n\n// EXTERNAL MODULE: ./node_modules/react-compound-timer/build/index.js\nvar build = __webpack_require__(822);\nvar build_default = /*#__PURE__*/__webpack_require__.n(build);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(179);\n\n// CONCATENATED MODULE: ./src/helper/audio/encoder-wav-worker.js\n/* eslint-disable func-names *//* harmony default export */ var encoder_wav_worker = (function(){var _this=this;// Parts copied from https://github.com/chris-rudmin/Recorderjs\nvar BYTES_PER_SAMPLE=2;var CHANNELS=1;// 1=mono , 2=Stereo\nvar recorded=[];function encode(buffer){var length=buffer.length;var data=new Uint8Array(length*BYTES_PER_SAMPLE*CHANNELS);for(var i=0;i<length;i+=1){var index=i*BYTES_PER_SAMPLE*CHANNELS;var sample=buffer[i];if(sample>1){sample=1;}else if(sample<-1){sample=-1;}sample*=32768;data[index]=sample;// eslint-disable-next-line no-bitwise\ndata[index+1]=sample>>8;}recorded.push(data);}function dump(sampleRate){var bufferLength=recorded.length?recorded[0].length:0;var length=recorded.length*bufferLength;var wav=new Uint8Array(44+length);var view=new DataView(wav.buffer);// RIFF identifier 'RIFF'\nview.setUint32(0,1380533830,false);// file length minus RIFF identifier length and file description length\nview.setUint32(4,36+length,true);// RIFF type 'WAVE'\nview.setUint32(8,1463899717,false);// format chunk identifier 'fmt '\nview.setUint32(12,1718449184,false);// format chunk length\nview.setUint32(16,16,true);// sample format (raw)\nview.setUint16(20,1,true);// channel count\nview.setUint16(22,CHANNELS,true);// sample rate\nview.setUint32(24,sampleRate,true);// 44100 Khz\n// byte rate (channels * sample rate * block align)\nview.setUint32(28,CHANNELS*sampleRate*BYTES_PER_SAMPLE,true);// kbps = 1411\n// block align (channel count * bytes per sample)\nview.setUint16(32,CHANNELS*BYTES_PER_SAMPLE,true);// bits per sample\nview.setUint16(34,8*BYTES_PER_SAMPLE,true);// 16\n// data chunk identifier 'data'\nview.setUint32(36,1684108385,false);// data chunk length\nview.setUint32(40,length,true);for(var i=0;i<recorded.length;i+=1){wav.set(recorded[i],i*bufferLength+44);}recorded=[];var msg=[wav.buffer];postMessage(msg,[msg[0]]);}this.onmessage=function(e){if(e.data[0]==='encode'){encode(e.data[1]);}else if(e.data[0]==='dump'){dump(e.data[1]);}else if(e.data[0]==='close'){_this.close();}};});\n// CONCATENATED MODULE: ./src/helper/audio/encoder-mp3-worker.js\n/* eslint-disable func-names */ // import 'babel-polyfill'\n// import lamejs from 'lamejs';\n/* harmony default export */ var encoder_mp3_worker = (function(){// Note that relative paths don't work when loaded as a blob\n// https://stackoverflow.com/questions/22172426/using-importsscripts-within-blob-in-a-karma-environment\n// importScripts('https://localhost:8443/workers/encoders/lame.js') // eslint-disable-line\nvar channels=1;// 1 for mono or 2 for stereo\n// let sampleRate = 44100 // 44.1khz (normal mp3 samplerate)\nvar kbps=128;// encode 128kbps mp3\nvar mp3encoder=null;var maxSamples=1152;var mp3Data=[];// array of Uint8Array\nfunction init(opts){/* global lamejs */importScripts(opts.baseUrl+'/workers/encoders/lame.min.js');// eslint-disable-line\nmp3encoder=new lamejs.Mp3Encoder(channels,opts.sampleRate,kbps);}function floatTo16BitPCM(input,output){for(var i=0;i<input.length;i+=1){var s=Math.max(-1,Math.min(1,input[i]));// eslint-disable-next-line no-param-reassign\noutput[i]=s<0?s*0x8000:s*0x7FFF;}}function convertBuffer(arrayBuffer){var data=new Float32Array(arrayBuffer);var out=new Int16Array(arrayBuffer.length);floatTo16BitPCM(data,out);return out;}function encode(arrayBuffer){var samplesMono=convertBuffer(arrayBuffer);var remaining=samplesMono.length;for(var i=0;remaining>=0;i+=maxSamples){var left=samplesMono.subarray(i,i+maxSamples);var data=mp3encoder.encodeBuffer(left);mp3Data.push(data);remaining-=maxSamples;}// var mp3buf = mp3encoder.encodeBuffer(buffer)\n// if (mp3buf.length > 0) {\n//   mp3Data.push(mp3buf)\n// }\n}function dump(){var mp3buf=mp3encoder.flush();if(mp3buf.length>0){mp3Data.push(mp3buf);}// Probably results in native memory copy\npostMessage(mp3Data);// Would like to do this, but not possible because mp3Data is generic array of Uint8Array, and generic\n// arrays are not transferrable types.\n// postMessage(mp3Data, [mp3Data])\n// This might help if/when ever become available again\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer/transfer\n// For now, though, we have not other option except to build a complete copy in javascript. This means\n// we temporarily require twice the memory of whatever was recorded.\nmp3Data=[];}onmessage=function onmessage(e){if(e.data[0]==='encode'){encode(e.data[1]);}else if(e.data[0]==='dump'){dump(e.data[1]);}else if(e.data[0]==='init'){init(e.data[1]);}else if(e.data[0]==='close'){this.close();}};});\n// CONCATENATED MODULE: ./src/helper/audio/encoder-flac-worker.js\n/* eslint-disable */ /* eslint-disable func-names */ /* global Flac *//* harmony default export */ var encoder_flac_worker = (function(){var workersHost= false||Object({\"NODE_ENV\":\"production\",\"PUBLIC_URL\":\"\",\"WDS_SOCKET_HOST\":undefined,\"WDS_SOCKET_PATH\":undefined,\"WDS_SOCKET_PORT\":undefined,\"FAST_REFRESH\":true}).REACT_APP_WORKERS_HOST||'https://virufy.org/demo';importScripts(\"\".concat(workersHost,\"/workers/encoders/libflac.dev.js\"));// eslint-disable-line\nvar flacEncoder;var CHANNELS=1;var SAMPLERATE=44100;var COMPRESSION=5;var BPS=16;var flacOk=1;var flacLength=0;var flacBuffers=[];var INIT=false;var wavBuffers=[];// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction writeCallbackFn(buffer,bytes){flacBuffers.push(buffer);flacLength+=buffer.byteLength;}// HELPER: handle initialization of flac encoder\nfunction initFlac(){flacEncoder=Flac.init_libflac_encoder(SAMPLERATE,CHANNELS,BPS,COMPRESSION,0);/// /\nif(flacEncoder!==0){var statusEncoder=Flac.init_encoder_stream(flacEncoder,writeCallbackFn);flacOk&=statusEncoder==0;console.log(\"flac init     : \".concat(flacOk));// DEBUG\nconsole.log(\"status encoder: \".concat(statusEncoder));// DEBUG\nINIT=true;}else{console.error('Error initializing the encoder.');}}function init(config){var finalConfig=config;if(!finalConfig){finalConfig={bps:BPS,channels:CHANNELS,samplerate:SAMPLERATE,compression:COMPRESSION};}finalConfig.channels=finalConfig.channels?finalConfig.channels:CHANNELS;finalConfig.samplerate=finalConfig.samplerate?finalConfig.samplerate:SAMPLERATE;finalConfig.bps=finalConfig.bps?finalConfig.bps:BPS;finalConfig.compression=finalConfig.compression?finalConfig.compression:COMPRESSION;/// /\nCOMPRESSION=finalConfig.compression;BPS=finalConfig.bps;SAMPLERATE=finalConfig.samplerate;CHANNELS=finalConfig.channels;/// /\nif(!Flac.isReady()){Flac.onready=function(){setTimeout(function(){initFlac();},0);};}else{initFlac();}}// HELPER: actually encode PCM data to Flac\nfunction doEncodeFlac(audioData){var bufLength=audioData.length;var bufferI32=new Uint32Array(bufLength);var view=new DataView(bufferI32.buffer);var volume=1;var index=0;for(var i=0;i<bufLength;i+=1){view.setInt32(index,audioData[i]*(0x7FFF*volume),true);index+=4;}var flacReturn=Flac.FLAC__stream_encoder_process_interleaved(flacEncoder,bufferI32,bufferI32.length/CHANNELS);if(flacReturn!=true){console.log(\"Error: encode_buffer_pcm_as_flac returned false. \".concat(flacReturn));}}// HELPER: handle incoming PCM audio data for Flac encoding:\nfunction encodeFlac(audioData){if(!Flac.isReady()){// if Flac is not ready yet: buffer the audio\nwavBuffers.push(audioData);console.info('buffered audio data for Flac encdoing');}else{if(wavBuffers.length>0){// if there is buffered audio: encode buffered first (and clear buffer)\nvar len=wavBuffers.length;var buffered=wavBuffers.splice(0,len);// eslint-disable-next-line no-plusplus\nfor(var i=0;i<len;++i){doEncodeFlac(buffered[i]);}}doEncodeFlac(audioData);}}function mergeBuffersUint8(channelBuffer,recordingLength){var result=new Uint8Array(recordingLength);var offset=0;var lng=channelBuffer.length;for(var i=0;i<lng;i+=1){var buffer=channelBuffer[i];result.set(buffer,offset);offset+=buffer.length;}return result;}function exportFlacFile(recBuffers,recLength){// convert buffers into one single buffer\nvar samples=mergeBuffersUint8(recBuffers,recLength);// var audioBlob = new Blob([samples], { type: type });\nvar theBlob=new Blob([samples],{type:'audio/flac'});return theBlob;}/*\n   * clear recording buffers\n   */function clear(){flacBuffers.splice(0,flacBuffers.length);flacLength=0;wavBuffers.splice(0,wavBuffers.length);}this.onmessage=function onmessage(e){if(e.data[0]==='init'){init(e.data[1]);}else if(e.data[0]==='encode'){encodeFlac(e.data[1]);}else if(e.data[0]==='dump'){var data;if(!Flac.isReady()){console.error('Flac was not initialized: could not encode data!');}else{flacOk&=Flac.FLAC__stream_encoder_finish(flacEncoder);console.log(\"flac finish: \".concat(flacOk));// DEBUG\ndata=exportFlacFile(flacBuffers,flacLength);Flac.FLAC__stream_encoder_delete(flacEncoder);}clear();postMessage(data);INIT=false;}};});\n// CONCATENATED MODULE: ./src/helper/audio/RecorderService.js\n/* eslint-disable max-len */ /* eslint-disable consistent-return */ /* eslint-disable no-underscore-dangle */ // Vendor Library https://github.com/mogwai/pwa-audio-recorder/tree/master\n// import EncoderOgg from './encoder-ogg-worker';\nvar RecorderService_RecorderService=function RecorderService(config){var _this=this;Object(classCallCheck[\"a\" /* default */])(this,RecorderService);this.cleanup=function(){if(_this.config.onRecording){_this.em.removeEventListener('recording',_this.recordingFn);}if(_this.config.onAudioProcesss){_this.em.removeEventListener('onaudioprocess',_this.onAudioProcessFn);}};this.createWorker=function(fn){var js=fn.toString().replace(/^function\\s*\\(\\)\\s*{/,'').replace(/}$/,'');var blob=new Blob([js]);return new Worker(URL.createObjectURL(blob));};this.startRecording=function(timeslice){if(_this.state!=='inactive'){return;}// This is the case on ios/chrome, when clicking links from within ios/slack (sometimes), etc.\nif(!navigator||!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){// alert('Missing support for navigator.mediaDevices.getUserMedia'); // temp: helps when testing for strange issues on ios/safari\nreturn;}_this.audioCtx=new AudioContext({sampleRate:_this.config.sampleRate});_this.micGainNode=_this.audioCtx.createGain();_this.outputGainNode=_this.audioCtx.createGain();if(_this.config.createDynamicsCompressorNode){_this.dynamicsCompressorNode=_this.audioCtx.createDynamicsCompressor();}if(_this.config.createAnalyserNode){_this.analyserNode=_this.audioCtx.createAnalyser();}// If not using MediaRecorder(i.e. safari and edge), then a script processor is required. It's optional\n// on browsers using MediaRecorder and is only useful if wanting to do custom analysis or manipulation of\n// recorded audio data.\nif(_this.config.forceScriptProcessor||_this.config.broadcastAudioProcessEvents||!_this.config.usingMediaRecorder){_this.processorNode=_this.audioCtx.createScriptProcessor(_this.config.processorBufferSize,1,1);// TODO: Get the number of channels from mic\n}// Create stream destination on chrome/firefox because, AFAICT, we have no other way of feeding audio graph output\n// in to MediaRecorderSafari/Edge don't have this method as of 2018-04.\nif(_this.audioCtx.createMediaStreamDestination){_this.destinationNode=_this.audioCtx.createMediaStreamDestination();}else{_this.destinationNode=_this.audioCtx.destination;}// Create web worker for doing the encoding\nif(!_this.config.usingMediaRecorder){if(_this.config.manualEncoderId==='mp3'){_this.encoderWorker=_this.createWorker(encoder_mp3_worker);var baseUrl= false||'https://virufy.org/demo';_this.encoderWorker.postMessage(['init',{baseUrl:baseUrl,sampleRate:_this.audioCtx.sampleRate}]);_this.encoderMimeType='audio/mpeg';}else if(_this.config.manualEncoderId==='flac'){_this.encoderWorker=_this.createWorker(encoder_flac_worker);_this.encoderWorker.postMessage(['init',{sampleRate:_this.audioCtx.sampleRate}]);_this.encoderMimeType='audio/flac';}else{_this.encoderWorker=_this.createWorker(encoder_wav_worker);_this.encoderMimeType='audio/wav';}_this.encoderWorker.addEventListener('message',function(e){var event=new Event('dataavailable');if(_this.config.manualEncoderId==='ogg'||_this.config.manualEncoderId==='flac'){event.data=e.data;}else{event.data=new Blob(e.data,{type:_this.encoderMimeType});}_this._onDataAvailable(event);});}// Setup media constraints\nvar userMediaConstraints={audio:{echoCancellation:_this.config.enableEchoCancellation}};if(_this.config.deviceId){userMediaConstraints.audio.deviceId=_this.config.deviceId;}// This will prompt user for permission if needed\nreturn navigator.mediaDevices.getUserMedia(userMediaConstraints).then(function(stream){_this._startRecordingWithStream(stream,timeslice);}).catch(function(error){// alert(`Error with getUserMedia: ${error.message}`); // temp: helps when testing for strange issues on ios/safari\nconsole.log(error);});};this.setMicGain=function(newGain){_this.config.micGain=newGain;if(_this.audioCtx&&_this.micGainNode){_this.micGainNode.gain.setValueAtTime(newGain,_this.audioCtx.currentTime);}};this._startRecordingWithStream=function(stream,timeslice){_this.micAudioStream=stream;_this.inputStreamNode=_this.audioCtx.createMediaStreamSource(_this.micAudioStream);_this.audioCtx=_this.inputStreamNode.context;// Kind-of a hack to allow hooking in to audioGraph inputStreamNode\nif(_this.onGraphSetupWithInputStream){_this.onGraphSetupWithInputStream(_this.inputStreamNode);}_this.inputStreamNode.connect(_this.micGainNode);_this.micGainNode.gain.setValueAtTime(_this.config.micGain,_this.audioCtx.currentTime);var nextNode=_this.micGainNode;if(_this.dynamicsCompressorNode){_this.micGainNode.connect(_this.dynamicsCompressorNode);nextNode=_this.dynamicsCompressorNode;}_this.state='recording';if(_this.processorNode){nextNode.connect(_this.processorNode);_this.processorNode.connect(_this.outputGainNode);_this.processorNode.onaudioprocess=function(e){return _this._onAudioProcess(e);};}else{nextNode.connect(_this.outputGainNode);}if(_this.analyserNode){// TODO: If we want the analyser node to receive the processorNode's output, this needs to be changed _and_\n//       processor node needs to be modified to copy input to output. It currently doesn't because it's not\n//       needed when doing manual encoding.\n// this.processorNode.connect(this.analyserNode)\nnextNode.connect(_this.analyserNode);}_this.outputGainNode.connect(_this.destinationNode);if(_this.config.usingMediaRecorder){_this.mediaRecorder=new MediaRecorder(_this.destinationNode.stream,{mimeType:_this.encoderMimeType||'audio/wav'});_this.mediaRecorder.addEventListener('dataavailable',function(evt){return _this._onDataAvailable(evt);});_this.mediaRecorder.addEventListener('error',function(evt){return _this._onError(evt);});_this.mediaRecorder.start(timeslice);}else{// Output gain to zero to prevent feedback. Seems to matter only on Edge, though seems like should matter\n// on iOS too.  Matters on chrome when connecting graph to directly to audioCtx.destination, but we are\n// not able to do that when using MediaRecorder.\n_this.outputGainNode.gain.setValueAtTime(0,_this.audioCtx.currentTime);// this.outputGainNode.gain.value = 0\n// Todo: Note that time slicing with manual wav encoderWav won't work. To allow it would require rewriting the encoderWav\n// to assemble all chunks at end instead of adding header to each chunk.\nif(timeslice){console.log('Time slicing without MediaRecorder is not yet supported. The resulting recording will not be playable.');_this.slicing=setInterval(function anon(){if(this.state==='recording'){this.encoderWorker.postMessage(['dump',this.context.sampleRate]);}},timeslice);}}};this._onAudioProcess=function(e){// console.log('onaudioprocess', e)\n// let inputBuffer = e.inputBuffer\n// let outputBuffer = e.outputBuffer\n// console.log(this.micAudioStream)\n// console.log(this.audioCtx)\n// console.log(this.micAudioStream.getTracks().forEach((track) => console.log(track)))\n// this.onAudioEm.dispatch(new Event('onaudioprocess', {inputBuffer:inputBuffer,outputBuffer:outputBuffer}))\nif(_this.config.broadcastAudioProcessEvents){_this.em.dispatchEvent(new CustomEvent('onaudioprocess',{detail:{inputBuffer:e.inputBuffer,outputBuffer:e.outputBuffer}}));}// // Example handling:\n// let inputBuffer = e.inputBuffer\n// let outputBuffer = e.outputBuffer\n// // Each channel (usually only one)\n// for (let channel = 0; channel < outputBuffer.numberOfChannels; channel++) {\n//   let inputData = inputBuffer.getChannelData(channel)\n//   let outputData = outputBuffer.getChannelData(channel)\n//\n//   // Each sample\n//   for (let sample = 0; sample < inputBuffer.length; sample++) {\n//     // Make output equal to the same as the input (thus processor is doing nothing at this time)\n//     outputData[sample] = inputData[sample]\n//   }\n// }\n// When manually encoding (safari/edge), there's no reason to copy data to output buffer.  We set the output\n// gain to 0 anyways (which is required on Edge if we did copy data to output). However, if using a MediaRecorder\n// and a processor (all other browsers), then it would be required to copy the data otherwise the graph would\n// generate no data for the MediaRecorder to consume.\n// if (this.forceScriptProcessor) {\n// // Copy input to output\n// let inputBuffer = e.inputBuffer\n// let outputBuffer = e.outputBuffer\n// // This doesn't work on iOS/Safari. Guessing it doesn't have copyToChannel support, but haven't verified.\n// for (let channel = 0; channel < outputBuffer.numberOfChannels; channel++) {\n//   outputBuffer.copyToChannel(inputBuffer.getChannelData(channel), channel)\n// }\n// Safari and Edge require manual encoding via web worker. Single channel only for now.\n// Example stereo encoderWav: https://github.com/MicrosoftEdge/Demos/blob/master/microphone/scripts/recorderworker.js\nif(!_this.config.usingMediaRecorder){if(_this.state==='recording'){if(_this.config.broadcastAudioProcessEvents){_this.encoderWorker.postMessage(['encode',e.outputBuffer.getChannelData(0)]);}else{_this.encoderWorker.postMessage(['encode',e.inputBuffer.getChannelData(0)]);}}}};this.stopRecording=function(){if(_this.state==='inactive'){return;}if(_this.config.usingMediaRecorder){_this.state='inactive';_this.mediaRecorder.stop();}else{_this.state='inactive';_this.encoderWorker.postMessage(['dump',_this.audioCtx.sampleRate]);clearInterval(_this.slicing);// TODO: There should be a more robust way to handle this\n// Without something like this, I think  the last recorded sample could be lost due to timing\n// setTimeout(() => {\n//   this.state = 'inactive'\n//   this.encoderWorker.postMessage(['dump', this.audioCtx.sampleRate])\n// }, 100)\n}};this._onDataAvailable=function(evt){// console.log('state', this.mediaRecorder.state)\n// console.log('evt.data', evt.data)\n_this.chunks.push(evt.data);_this.chunkType=evt.data.type;if(_this.state!=='inactive'){return;}var blob=new Blob(_this.chunks,{type:_this.chunkType});var blobUrl=URL.createObjectURL(blob);var recording={ts:new Date().getTime(),blobUrl:blobUrl,mimeType:blob.type,size:blob.size};_this.chunks=[];_this.chunkType=null;if(_this.destinationNode){_this.destinationNode.disconnect();_this.destinationNode=null;}if(_this.outputGainNode){_this.outputGainNode.disconnect();_this.outputGainNode=null;}if(_this.analyserNode){_this.analyserNode.disconnect();_this.analyserNode=null;}if(_this.processorNode){_this.processorNode.disconnect();_this.processorNode=null;}if(_this.encoderWorker){_this.encoderWorker.postMessage(['close']);_this.encoderWorker=null;}if(_this.dynamicsCompressorNode){_this.dynamicsCompressorNode.disconnect();_this.dynamicsCompressorNode=null;}if(_this.micGainNode){_this.micGainNode.disconnect();_this.micGainNode=null;}if(_this.inputStreamNode){_this.inputStreamNode.disconnect();_this.inputStreamNode=null;}if(_this.config.stopTracksAndCloseCtxWhenFinished){// This removes the red bar in iOS/Safari\n_this.micAudioStream.getTracks().forEach(function(track){return track.stop();});_this.micAudioStream=null;_this.audioCtx.close();_this.audioCtx=null;}_this.em.dispatchEvent(new CustomEvent('recording',{detail:{recording:recording}}));};this._onError=function(evt){console.log('error',evt);_this.em.dispatchEvent(new Event('error'));// alert(`error:${evt}`); // for debugging purposes\n};window.AudioContext=window.AudioContext||window.webkitAudioContext;this.em=document.createDocumentFragment();this.state='inactive';this.chunks=[];this.chunkType='';this.encoderMimeType='audio/wav';this.config={broadcastAudioProcessEvents:config.broadcastAudioProcessEvents!==undefined?config.broadcastAudioProcessEvents:false,createAnalyserNode:config.createAnalyserNode!==undefined?config.createAnalyserNode:false,createDynamicsCompressorNode:config.createDynamicsCompressorNode!==undefined?config.createDynamicsCompressorNode:false,forceScriptProcessor:config.forceScriptProcessor!==undefined?config.forceScriptProcessor:false,manualEncoderId:config.manualEncoderId!==undefined?config.manualEncoderId:'wav',micGain:config.micGain!==undefined?config.micGain:1.0,processorBufferSize:config.processorBufferSize!==undefined?config.processorBufferSize:2048,stopTracksAndCloseCtxWhenFinished:config.stopTracksAndCloseCtxWhenFinished!==undefined?config.stopTracksAndCloseCtxWhenFinished:true,usingMediaRecorder:config.usingMediaRecorder!==undefined?config.usingMediaRecorder:typeof window.MediaRecorder!=='undefined',enableEchoCancellation:config.enableEchoCancellation!==undefined?config.enableEchoCancellation:true,sampleRate:config.sampleRate!==undefined?config.sampleRate:44100,onRecording:config.onRecording,onAudioPress:config.onAudioPress};if(config.onRecording){this.recordingFn=function(evt){return config.onRecording(evt);};this.em.addEventListener('recording',this.recordingFn);}if(config.onAudioProcesss){this.onAudioProcessFn=function(evt){return config.onAudioProcesss(evt);};this.em.addEventListener('onaudioprocess',this.onAudioProcessFn);}};\n// EXTERNAL MODULE: ./src/helper/fileHelper.ts\nvar fileHelper = __webpack_require__(245);\n\n// EXTERNAL MODULE: ./src/helper/getDuration.ts\nvar getDuration = __webpack_require__(246);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js + 1 modules\nvar objectWithoutProperties = __webpack_require__(175);\n\n// EXTERNAL MODULE: ./node_modules/react-modal/lib/index.js\nvar lib = __webpack_require__(829);\nvar lib_default = /*#__PURE__*/__webpack_require__.n(lib);\n\n// EXTERNAL MODULE: ./src/components/Button/index.ts + 2 modules\nvar Button = __webpack_require__(167);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\nvar taggedTemplateLiteral = __webpack_require__(158);\n\n// EXTERNAL MODULE: ./node_modules/styled-components/dist/styled-components.browser.esm.js\nvar styled_components_browser_esm = __webpack_require__(157);\n\n// CONCATENATED MODULE: ./src/modals/RecordErrorModal/style.ts\nfunction _templateObject3(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  font-family: 'Source Sans Pro';\\n  text-align: center;\\n  line-height: 25px;\\n  font-size: 18px;\\n  margin-top: 10px;\\n  margin-bottom: 30px;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  font-family: 'Biko';\\n  font-size: 30px;\\n  line-height: 30px;\\n  margin-bottom: 10px;\\n  font-weight: 600;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n\\n  @media screen and (\",\") {\\n    margin: auto;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}var ModalBody=styled_components_browser_esm[\"default\"].div(_templateObject(),function(props){return props.theme.breakpoints.tablet;});var ModalTitle=styled_components_browser_esm[\"default\"].div(_templateObject2());var ModalContent=styled_components_browser_esm[\"default\"].div(_templateObject3());\n// CONCATENATED MODULE: ./src/modals/RecordErrorModal/RecordErrorModal.tsx\n/* eslint-disable react/jsx-props-no-spreading */// Style\nlib_default.a.setAppElement('#root');var RecordErrorModal=/*#__PURE__*/react_default.a.memo(function(_ref){var modalTitle=_ref.modalTitle,children=_ref.children,onConfirm=_ref.onConfirm,props=Object(objectWithoutProperties[\"a\" /* default */])(_ref,[\"modalTitle\",\"children\",\"onConfirm\"]);// Handlers\nvar _useTranslation=Object(useTranslation[\"a\" /* useTranslation */])(),t=_useTranslation.t;var customStyles={content:{height:'281px',maxWidth:'348px',margin:'auto',borderRadius:'10px',border:'none'},overlay:{backgroundColor:'rgba(0, 0, 0, 0.5)'}};return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(lib_default.a,Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},props),{},{style:customStyles,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ModalBody,{className:\"ModalBody\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModalTitle,{children:modalTitle}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModalContent,{children:children}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{onClick:onConfirm,dark:true,children:t('recordingsIntroduction:retryButton','Retry')})]})}));});/* harmony default export */ var RecordErrorModal_RecordErrorModal = (RecordErrorModal);\n// CONCATENATED MODULE: ./src/modals/RecordErrorModal/index.ts\n\n// CONCATENATED MODULE: ./src/assets/icons/start.svg\n/* harmony default export */ var start = (__webpack_require__.p + \"static/media/start.e0d4d3a6.svg\");\n// EXTERNAL MODULE: ./src/assets/icons/stop.svg\nvar stop = __webpack_require__(269);\n\n// EXTERNAL MODULE: ./src/theme/index.ts\nvar theme = __webpack_require__(161);\n\n// CONCATENATED MODULE: ./src/components/MicRecorder/style.ts\nfunction _templateObject11(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  visibility: \",\";\\n\"]);_templateObject11=function _templateObject11(){return data;};return data;}function _templateObject10(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  font-size: 16px;\\n  line-height: 20px;\\n  color: \",\";\\n  font-family: 'Source Sans Pro';\\n  display: flex; \\n  margin-left: 20px;\\n  margin-top:10px;\\n\"]);_templateObject10=function _templateObject10(){return data;};return data;}function _templateObject9(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  width: 70px;\\n  height: 41px;\\n  font-size: 1.25rem;\\n  color: \",\";\\n  font-weight: bold;\\n  font-family: 'Source Sans Pro';\\n  border: 1px solid \",\";\\n  border-radius: 15px;\\n  display: flex; \\n  align-items: center; \\n  justify-content: center; \\n  margin-bottom: 28px;\\n\\n  @media screen and (\",\") {\\n    font-size: 1.75rem;\\n    margin-top: 22px;\\n  }\\n\"]);_templateObject9=function _templateObject9(){return data;};return data;}function _templateObject8(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  width: 15px;\\n  height: 15px;\\n\"]);_templateObject8=function _templateObject8(){return data;};return data;}function _templateObject7(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  width: 27px;\\n  height: 27px;\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n  transition: opacity 0.25s;\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  background-color: \",\";\\n  width: 56px;\\n  height: 56px;\\n  position: relative;\\n  outline: none !important;\\n  border: none;\\n  border-radius: 50%;\\n  padding: 0;\\n  transition: background-color 0.25s;\\n  opacity: \",\";\\n\\n  @supports not (-webkit-touch-callout: none) {\\n    /* CSS for other than iOS devices */\\n    -webkit-tap-highlight-color: transparent;\\n  }\\n\\n  &:active {\\n    background-color: \",\";\\n  }\\n\\n  &:before {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    bottom: 0;\\n    left: 0;\\n    right: 0;\\n    background-color: transparent;\\n    z-index: 1;\\n    border-radius: 50%;\\n  }\\n\\n  @media screen and (\",\") {\\n    width: 66px;\\n    height: 66px;\\n  }\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  font-size: 14px;\\n  color: \",\";\\n  margin-top: 8px;\\n  margin-bottom: 0px;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function style_templateObject3(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n\"]);style_templateObject3=function _templateObject3(){return data;};return data;}function style_templateObject2(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  display:flex;\\n  justify-content: space-between;\\n  width: 144px;\\n  margin: auto;\\n\"]);style_templateObject2=function _templateObject2(){return data;};return data;}function style_templateObject(){var data=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: flex-start;\\n\"]);style_templateObject=function _templateObject(){return data;};return data;}var MicRecorderContainer=styled_components_browser_esm[\"default\"].div(style_templateObject());var MicButtonsContainer=styled_components_browser_esm[\"default\"].div(style_templateObject2());var MicButtonWithText=styled_components_browser_esm[\"default\"].div(style_templateObject3());var MicNote=styled_components_browser_esm[\"default\"].p(_templateObject4(),theme[\"a\" /* colors */].lightDarkGray);var MicRecorderButton=styled_components_browser_esm[\"default\"].button(_templateObject5(),theme[\"a\" /* colors */].purple,function(props){return props.disabled||props.opacity?'0.5':'1';},theme[\"a\" /* colors */].purple,function(props){return props.theme.breakpoints.tablet;});var MicRecorderImage=styled_components_browser_esm[\"default\"].img(_templateObject6());var MicRecorderStartImage=Object(styled_components_browser_esm[\"default\"])(MicRecorderImage)(_templateObject7());var MicRecorderStopImage=Object(styled_components_browser_esm[\"default\"])(MicRecorderImage)(_templateObject8());var MicRecorderTimerContainer=styled_components_browser_esm[\"default\"].div(_templateObject9(),theme[\"a\" /* colors */].purple,theme[\"a\" /* colors */].purple,function(props){return props.theme.breakpoints.tablet;});var MicRecorderTimerReleaseTextContainer=styled_components_browser_esm[\"default\"].div(_templateObject10(),theme[\"a\" /* colors */].red);var MicRecorderTextP=styled_components_browser_esm[\"default\"].p(_templateObject11(),function(props){return props.show?'flex':'hidden';});\n// CONCATENATED MODULE: ./src/components/MicRecorder/MicRecorder.tsx\n/* eslint-disable react/require-default-props */ /* eslint-disable jsx-a11y/click-events-have-key-events */ /* eslint-disable jsx-a11y/no-static-element-interactions */// Utils\n// Modals\n// Images\n// Styles\nvar baseConfig={usingMediaRecorder:false,sampleRate:48000,manualEncoderId:'wav',// wav / mp3 / flac\nprocessorBufferSize:2048// 4096 flac / 2048 wav\n};var MicRecorder_MicRecorder=function MicRecorder(_ref){var _ref$className=_ref.className,className=_ref$className===void 0?'':_ref$className,_ref$maxTimeInSeconds=_ref.maxTimeInSeconds,maxTimeInSeconds=_ref$maxTimeInSeconds===void 0?30:_ref$maxTimeInSeconds,onNewRecord=_ref.onNewRecord,_ref$delay=_ref.delay,delay=_ref$delay===void 0?500:_ref$delay,recordingFile=_ref.recordingFile;// Hooks\nvar _useTranslation=Object(useTranslation[\"a\" /* useTranslation */])(),t=_useTranslation.t;// Refs\nvar recordingService=react_default.a.useRef();var audioSamples=react_default.a.useRef(0);var timerRef=react_default.a.useRef();var timeout=react_default.a.useRef();var target=react_default.a.useRef();// States\nvar _React$useState=react_default.a.useState(true),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),micAllowed=_React$useState2[0],setMicAllowed=_React$useState2[1];var _React$useState3=react_default.a.useState(),_React$useState4=Object(slicedToArray[\"a\" /* default */])(_React$useState3,2),recordingInProgress=_React$useState4[0],setRecordingInProgress=_React$useState4[1];var _React$useState5=react_default.a.useState(false),_React$useState6=Object(slicedToArray[\"a\" /* default */])(_React$useState5,2),showReleaseText=_React$useState6[0],setShowReleaseText=_React$useState6[1];var _React$useState7=react_default.a.useState(false),_React$useState8=Object(slicedToArray[\"a\" /* default */])(_React$useState7,2),showShortRecordingText=_React$useState8[0],setShowShortRecordingText=_React$useState8[1];var _React$useState9=react_default.a.useState(false),_React$useState10=Object(slicedToArray[\"a\" /* default */])(_React$useState9,2),longPressTriggered=_React$useState10[0],setLongPressTriggered=_React$useState10[1];// Handlers\nvar onAudioProcess=react_default.a.useCallback(function(e){audioSamples.current+=1;var _e$detail=e.detail,inputBuffer=_e$detail.inputBuffer,outputBuffer=_e$detail.outputBuffer;for(var channel=0;channel<outputBuffer.numberOfChannels;channel+=1){var inputData=inputBuffer.getChannelData(channel);var outputData=outputBuffer.getChannelData(channel);// Each sample\nfor(var sample=0;sample<inputBuffer.length;sample+=1){outputData[sample]=inputData[sample];}}},[]);var onNewRecording=react_default.a.useCallback(/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(e){var detail,recording,blob,fileName,file,humanReadableSize;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:detail=e.detail;recording=detail.recording;_context.next=4;return fetch(recording.blobUrl).then(function(r){return r.blob();});case 4:blob=_context.sent;fileName=\"Filename.\".concat(baseConfig.manualEncoderId);file=fileHelper[\"a\" /* default */].blobToFile(blob,fileName);humanReadableSize=fileHelper[\"a\" /* default */].sizeAsHuman(file.size,true);onNewRecord(file,humanReadableSize);case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}(),[onNewRecord]);// Effects\nreact_default.a.useEffect(function(){recordingService.current=new RecorderService_RecorderService(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},baseConfig),{},{onRecording:onNewRecording,onAudioProcesss:onAudioProcess}));var userMediaConstraints={audio:{echoCancellation:recordingService.current.config.enableEchoCancellation}};navigator.mediaDevices.getUserMedia(userMediaConstraints).then(function(){setMicAllowed(true);}).catch(function(){setMicAllowed(false);});if(recordingFile){var _file=recordingFile;if(_file.size){var audio=new Audio(URL.createObjectURL(_file));audio.load();var listenerFn=/*#__PURE__*/function(){var _ref3=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:audio.removeEventListener('loadedmetadata',listenerFn);Object(getDuration[\"a\" /* getDuration */])(audio,true).then(function(result){var _timerRef$current;(_timerRef$current=timerRef.current)===null||_timerRef$current===void 0?void 0:_timerRef$current.setTime(result*1000);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function listenerFn(){return _ref3.apply(this,arguments);};}();audio.addEventListener('loadedmetadata',listenerFn);}}return function(){if(recordingService.current){recordingService.current.cleanup();}};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);// Handlers\nvar handleStartRecording=react_default.a.useCallback(function(){if(recordingService.current){audioSamples.current=0;recordingService.current.startRecording().then(function(){setRecordingInProgress(true);setShowShortRecordingText(false);if(timerRef.current){var _timerRef$current2;timerRef.current.reset();(_timerRef$current2=timerRef.current)===null||_timerRef$current2===void 0?void 0:_timerRef$current2.setTime(0);timerRef.current.start();}}).catch(function(error){return console.error('ERROR',error);});}},[]);var handleStopRecording=react_default.a.useCallback(function(){if(recordingService.current){recordingService.current.stopRecording();setRecordingInProgress(false);if(timerRef.current){if(timerRef.current.getTime()/1000<2){setShowShortRecordingText(true);}timerRef.current.stop();}}},[]);var handleFormatValue=react_default.a.useCallback(function(value){return value<10?\"0\".concat(value):value;},[]);var preventDefault=function preventDefault(event){if(!('touches'in event))event.preventDefault();};var handleStartLongPress=react_default.a.useCallback(function(event){if(event.target){event.target.addEventListener('touchend',preventDefault,{passive:false});target.current=event.target;}timeout.current=setTimeout(function(){setShowReleaseText(true);setLongPressTriggered(true);setShowShortRecordingText(false);},delay);},[delay]);var handleEndLongPress=react_default.a.useCallback(function(){if(timeout.current){clearTimeout(timeout.current);}if(longPressTriggered){setShowReleaseText(false);}setLongPressTriggered(false);if(target.current){target.current.removeEventListener('touchend',preventDefault);}},[longPressTriggered]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(MicRecorderContainer,{className:className,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(MicRecorderTimerReleaseTextContainer,{children:[!showShortRecordingText&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MicRecorderTextP,{show:showReleaseText,children:recordingInProgress?t('recordingsIntroduction:releaseButtonStop'):t('recordingsIntroduction:releaseButtonStart')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RecordErrorModal_RecordErrorModal,{isOpen:showShortRecordingText,modalTitle:\"Oops.\",onConfirm:handleStartRecording,children:t('recordingsIntroduction:shortRecording')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MicRecorderTimerContainer,{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(build_default.a,{ref:timerRef,startImmediately:false,checkpoints:[{time:maxTimeInSeconds*1000,callback:handleStopRecording}],children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(build_default.a.Minutes,{}),\":\",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(build_default.a.Seconds,{formatValue:handleFormatValue})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(MicButtonsContainer,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(MicButtonWithText,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MicRecorderButton,{disabled:!micAllowed||recordingInProgress,onClick:handleStartRecording,onMouseDown:handleStartLongPress,onMouseUp:handleEndLongPress,onTouchStart:handleStartLongPress,onTouchEnd:handleEndLongPress,onMouseLeave:handleEndLongPress,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MicRecorderStartImage,{src:start,alt:\"Start\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MicNote,{children:t('recordingsIntroduction:recordCough.record')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(MicButtonWithText,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MicRecorderButton,{disabled:!micAllowed||!recordingInProgress,onClick:handleStopRecording,onMouseDown:handleStartLongPress,onMouseUp:handleEndLongPress,onTouchStart:handleStartLongPress,onTouchEnd:handleEndLongPress,onMouseLeave:handleEndLongPress,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MicRecorderStopImage,{src:stop[\"a\" /* default */],alt:\"Stop\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MicNote,{children:t('recordingsIntroduction:recordCough.stop')})]})]})]});};/* harmony default export */ var components_MicRecorder_MicRecorder = (/*#__PURE__*/react_default.a.memo(MicRecorder_MicRecorder));\n// CONCATENATED MODULE: ./src/components/MicRecorder/index.ts\n\n// EXTERNAL MODULE: ./src/components/WizardButtons/index.tsx + 2 modules\nvar WizardButtons = __webpack_require__(169);\n\n// CONCATENATED MODULE: ./src/assets/icons/upload.svg\n/* harmony default export */ var upload = (__webpack_require__.p + \"static/media/upload.21eec1c7.svg\");\n// EXTERNAL MODULE: ./src/containers/SubmitSteps/RecordingsSteps/Introduction/Record/style.ts\nvar style = __webpack_require__(270);\n\n// CONCATENATED MODULE: ./src/containers/SubmitSteps/RecordingsSteps/Introduction/Record/Record.tsx\n// Form\n// Components\n// Images\n// Styles\nvar audioMaxSizeInMb=5;var schema=es[\"b\" /* object */]({recordingFile:es[\"a\" /* mixed */]().required('ERROR.FILE_REQUIRED').test('fileSize','ERROR.FILE_SIZE',function(value){if(value){var file=value;var size=file.size;return size<=Math.pow(1024,3)*audioMaxSizeInMb;}return!!value;}).test('fileDuration','ERROR.FILE_DURATION',/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(value){var file,audio,duration;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!value){_context.next=10;break;}file=value;audio=new Audio(URL.createObjectURL(file));audio.load();_context.next=6;return new Promise(function(resolver){return audio.addEventListener('loadedmetadata',resolver);});case 6:_context.next=8;return new Promise(function(resolver){if(audio.duration!==Infinity){resolver(audio.duration);}audio.addEventListener('durationchange',function(){audio.remove();resolver(audio.duration);});audio.volume=0;audio.currentTime=24*60*60;// Unprobable time\naudio.play();});case 8:duration=_context.sent;return _context.abrupt(\"return\",duration>=2);case 10:return _context.abrupt(\"return\",!!value);case 11:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}())}).defined();var Record_Record=function Record(_ref2){var onNext=_ref2.onNext,onManualUpload=_ref2.onManualUpload,defaultValues=_ref2.defaultValues,currentLogic=_ref2.currentLogic,action=_ref2.action;// Hooks\nvar _usePortal=usePortal_default()({bindTo:document&&document.getElementById('wizard-buttons')}),Portal=_usePortal.Portal;var _useForm=Object(index_esm[\"c\" /* useForm */])({mode:'onChange',defaultValues:defaultValues,resolver:Object(yup[\"yupResolver\"])(schema)}),handleSubmit=_useForm.handleSubmit,control=_useForm.control,getValues=_useForm.getValues,formState=_useForm.formState;var _useTranslation=Object(useTranslation[\"a\" /* useTranslation */])(),t=_useTranslation.t;var isValid=formState.isValid;// Refs\nvar micKey=react_default.a.useRef(1);var onManualUploadWithFile=function onManualUploadWithFile(){action(Object(defineProperty[\"a\" /* default */])({},currentLogic,{recordingFile:getValues('recordingFile')||null,uploadedFile:null}));onManualUpload===null||onManualUpload===void 0?void 0:onManualUpload();};return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(style[\"MainContainer\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(style[\"MicContainer\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_esm[\"a\" /* Controller */],{control:control,name:\"recordingFile\",render:function render(_ref3){var onChange=_ref3.onChange;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_MicRecorder_MicRecorder,{// On delete, easy re-mount a new mic recorder\nonNewRecord:onChange,recordingFile:defaultValues===null||defaultValues===void 0?void 0:defaultValues.recordingFile},micKey.current);}})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Portal,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WizardButtons[\"a\" /* default */],{invert:true,leftLabel:t('recordingsRecord:next'),leftDisabled:!isValid,leftHandler:handleSubmit(onNext)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(style[\"UploadContainer\"],{onClick:onManualUploadWithFile,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(style[\"UploadImage\"],{src:upload}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(style[\"UploadText\"],{children:t('recordingsRecord:upload')})]})]})]})});};/* harmony default export */ var Introduction_Record_Record = __webpack_exports__[\"default\"] = (/*#__PURE__*/react_default.a.memo(Record_Record));\n\n/***/ }),\n\n/***/ 245:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* eslint-disable no-plusplus */ /* eslint-disable no-param-reassign */var sizeAsHuman=function sizeAsHuman(bytes,si){var thresh=si?1000:1024;if(Math.abs(bytes)<thresh){return\"\".concat(bytes,\" B\");}var units=si?['kB','MB','GB','TB','PB','EB','ZB','YB']:['KiB','MiB','GiB','TiB','PiB','EiB','ZiB','YiB'];var u=-1;do{bytes/=thresh;++u;}while(Math.abs(bytes)>=thresh&&u<units.length-1);return\"\".concat(bytes.toFixed(1),\" \").concat(units[u]);};var blobToFile=function blobToFile(theBlob,fileName){var b=theBlob;// A Blob() is almost a File() - it's just missing the two properties below which we will add\nb.lastModifiedDate=new Date();b.name=fileName;// Cast to a File() type\nreturn theBlob;};/* harmony default export */ __webpack_exports__[\"a\"] = ({sizeAsHuman:sizeAsHuman,blobToFile:blobToFile});\n\n/***/ }),\n\n/***/ 246:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return getDuration; });\n/* harmony import */ var react_device_detect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(325);\n/* harmony import */ var react_device_detect__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_device_detect__WEBPACK_IMPORTED_MODULE_0__);\nfunction getDuration(e,remove){return new Promise(function(resolver){if(e.duration!==Infinity&&(!react_device_detect__WEBPACK_IMPORTED_MODULE_0__[\"isSafari\"]||react_device_detect__WEBPACK_IMPORTED_MODULE_0__[\"isSafari\"]&&e.duration>0)){resolver(e.duration);return;}e.addEventListener('durationchange',function(){if(remove){e.remove();}else{e.pause();e.volume=1;e.currentTime=0;}resolver(e.duration);});e.currentTime=24*60*60;// Unprobable time\ne.play();});}\n\n/***/ }),\n\n/***/ 269:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (__webpack_require__.p + \"static/media/stop.e6f44abd.svg\");\n\n/***/ }),\n\n/***/ 270:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MainContainer\", function() { return MainContainer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Text\", function() { return Text; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MicContainer\", function() { return MicContainer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UploadContainer\", function() { return UploadContainer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UploadImage\", function() { return UploadImage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UploadText\", function() { return UploadText; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StopImg\", function() { return StopImg; });\n/* harmony import */ var _home_amil_virufy_demo_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(158);\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(157);\n/* harmony import */ var components_Texts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(172);\n/* harmony import */ var theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(161);\n/* harmony import */ var assets_icons_stop_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(269);\nfunction _templateObject7(){var data=Object(_home_amil_virufy_demo_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])([\"\\n  display: inline;\\n  height: 10px;\\n  margin: 0px 2px 4px;\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=Object(_home_amil_virufy_demo_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])([\"\\n  cursor: pointer;\\n  font-family: Source Sans Pro;\\n  font-weight: bold;\\n  font-size: 0.75rem;\\n  line-height: 24px;\\n  color: \",\";\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=Object(_home_amil_virufy_demo_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])([\"\\n  cursor: pointer;\\n  width: 13px;\\n  height: 12px;\\n  margin-right: 7px;\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=Object(_home_amil_virufy_demo_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  padding: 0px 20px;\\n  margin: 20px auto;\\n  width: fit-content;\\n\\n\\n  @media screen and (\",\"){\\n    padding: 0px 22px;\\n    margin: 22px auto;\\n  }\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=Object(_home_amil_virufy_demo_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])([\"\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=Object(_home_amil_virufy_demo_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])([\"\\n  color: \",\";\\n  margin-bottom: 2px;\\n  text-align: left;\\n\\n  @media screen and (\",\"){\\n    max-width: 470px;\\n    margin: 0 auto;\\n    font-size: 16px;\\n  }\\n\\n  @media screen and (\",\"){\\n    @media (orientation: portrait) {\\n      margin-bottom: 248px;\\n    }\\n\\n    @media (orientation: landscape) {\\n      margin-bottom: 24px;\\n    }\\n  }\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=Object(_home_amil_virufy_demo_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])([\"\\n  padding: 0px 0px;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}var MainContainer=styled_components__WEBPACK_IMPORTED_MODULE_1__[\"default\"].div(_templateObject());var Text=Object(styled_components__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(components_Texts__WEBPACK_IMPORTED_MODULE_2__[/* BlackText */ \"b\"])(_templateObject2(),function(props){return props.theme.colors.darkBlack;},function(props){return props.theme.breakpoints.tablet;},function(props){return props.theme.breakpoints.tablet;});var MicContainer=styled_components__WEBPACK_IMPORTED_MODULE_1__[\"default\"].div(_templateObject3());var UploadContainer=styled_components__WEBPACK_IMPORTED_MODULE_1__[\"default\"].div(_templateObject4(),function(props){return props.theme.breakpoints.tablet;});var UploadImage=styled_components__WEBPACK_IMPORTED_MODULE_1__[\"default\"].img(_templateObject5());var UploadText=styled_components__WEBPACK_IMPORTED_MODULE_1__[\"default\"].div(_templateObject6(),theme__WEBPACK_IMPORTED_MODULE_3__[/* colors */ \"a\"].darkBlack);var StopImg=styled_components__WEBPACK_IMPORTED_MODULE_1__[\"default\"].img.attrs(function(){return{src:assets_icons_stop_svg__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"]};})(_templateObject7());\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/home/amil/virufy-demo.github.io/src/components/Button/style.ts","/home/amil/virufy-demo.github.io/src/components/Button/Button.tsx","/home/amil/virufy-demo.github.io/src/components/WizardButtons/style.ts","/home/amil/virufy-demo.github.io/src/components/WizardButtons/WizardButtons.tsx","/home/amil/virufy-demo.github.io/src/components/Texts/Texts.ts","/home/amil/virufy-demo.github.io/src/helper/audio/encoder-wav-worker.js","/home/amil/virufy-demo.github.io/src/helper/audio/encoder-mp3-worker.js","/home/amil/virufy-demo.github.io/src/helper/audio/encoder-flac-worker.js","/home/amil/virufy-demo.github.io/src/helper/audio/RecorderService.js","/home/amil/virufy-demo.github.io/src/modals/RecordErrorModal/style.ts","/home/amil/virufy-demo.github.io/src/modals/RecordErrorModal/RecordErrorModal.tsx","/home/amil/virufy-demo.github.io/node_modules/file-loader/dist/cjs.js??ref--5-oneOf-8!/home/amil/virufy-demo.github.io/src/assets/icons/start.svg","/home/amil/virufy-demo.github.io/src/components/MicRecorder/style.ts","/home/amil/virufy-demo.github.io/src/components/MicRecorder/MicRecorder.tsx","/home/amil/virufy-demo.github.io/node_modules/file-loader/dist/cjs.js??ref--5-oneOf-8!/home/amil/virufy-demo.github.io/src/assets/icons/upload.svg","/home/amil/virufy-demo.github.io/src/containers/SubmitSteps/RecordingsSteps/Introduction/Record/Record.tsx","/home/amil/virufy-demo.github.io/src/helper/fileHelper.ts","/home/amil/virufy-demo.github.io/src/helper/getDuration.ts","/home/amil/virufy-demo.github.io/node_modules/file-loader/dist/cjs.js??ref--5-oneOf-8!/home/amil/virufy-demo.github.io/src/assets/icons/stop.svg","/home/amil/virufy-demo.github.io/src/containers/SubmitSteps/RecordingsSteps/Introduction/Record/style.ts"],"names":["StyledButton","styled","button","dark","disabled","color","colors","purple_50","purple","white","Button","React","memo","children","props","WizardButtonsContainer","div","theme","layout","generalPaddingAmount","breakpoints","tablet","WizardButtons","invert","leftLabel","leftDisabled","leftHandler","rightLabel","rightDisabled","rightHandler","BaseText","css","BlackText","darkBlack","black","fontSize","BaseTitle","BYTES_PER_SAMPLE","CHANNELS","recorded","encode","buffer","length","data","Uint8Array","i","index","sample","push","dump","sampleRate","bufferLength","wav","view","DataView","setUint32","setUint16","set","msg","postMessage","onmessage","e","close","channels","kbps","mp3encoder","maxSamples","mp3Data","init","opts","importScripts","baseUrl","lamejs","Mp3Encoder","floatTo16BitPCM","input","output","s","Math","max","min","convertBuffer","arrayBuffer","Float32Array","out","Int16Array","samplesMono","remaining","left","subarray","encodeBuffer","mp3buf","flush","workersHost","process","REACT_APP_WORKERS_HOST","flacEncoder","SAMPLERATE","COMPRESSION","BPS","flacOk","flacLength","flacBuffers","INIT","wavBuffers","writeCallbackFn","bytes","byteLength","initFlac","Flac","init_libflac_encoder","statusEncoder","init_encoder_stream","console","log","error","config","finalConfig","bps","samplerate","compression","isReady","onready","setTimeout","doEncodeFlac","audioData","bufLength","bufferI32","Uint32Array","volume","setInt32","flacReturn","FLAC__stream_encoder_process_interleaved","encodeFlac","info","len","buffered","splice","mergeBuffersUint8","channelBuffer","recordingLength","result","offset","lng","exportFlacFile","recBuffers","recLength","samples","theBlob","Blob","type","clear","FLAC__stream_encoder_finish","FLAC__stream_encoder_delete","RecorderService","cleanup","onRecording","em","removeEventListener","recordingFn","onAudioProcesss","onAudioProcessFn","createWorker","fn","js","toString","replace","blob","Worker","URL","createObjectURL","startRecording","timeslice","state","navigator","mediaDevices","getUserMedia","audioCtx","AudioContext","micGainNode","createGain","outputGainNode","createDynamicsCompressorNode","dynamicsCompressorNode","createDynamicsCompressor","createAnalyserNode","analyserNode","createAnalyser","forceScriptProcessor","broadcastAudioProcessEvents","usingMediaRecorder","processorNode","createScriptProcessor","processorBufferSize","createMediaStreamDestination","destinationNode","destination","manualEncoderId","encoderWorker","EncoderMp3","encoderMimeType","EncoderFlac","EncoderWav","addEventListener","event","Event","_onDataAvailable","userMediaConstraints","audio","echoCancellation","enableEchoCancellation","deviceId","then","stream","_startRecordingWithStream","catch","setMicGain","newGain","micGain","gain","setValueAtTime","currentTime","micAudioStream","inputStreamNode","createMediaStreamSource","context","onGraphSetupWithInputStream","connect","nextNode","onaudioprocess","_onAudioProcess","mediaRecorder","MediaRecorder","mimeType","evt","_onError","start","slicing","setInterval","anon","dispatchEvent","CustomEvent","detail","inputBuffer","outputBuffer","getChannelData","stopRecording","stop","clearInterval","chunks","chunkType","blobUrl","recording","ts","Date","getTime","size","disconnect","stopTracksAndCloseCtxWhenFinished","getTracks","forEach","track","window","webkitAudioContext","document","createDocumentFragment","undefined","onAudioPress","ModalBody","ModalTitle","ModalContent","Modal","setAppElement","RecordErrorModal","modalTitle","onConfirm","useTranslation","t","customStyles","content","height","maxWidth","margin","borderRadius","border","overlay","backgroundColor","MicRecorderContainer","MicButtonsContainer","MicButtonWithText","MicNote","p","lightDarkGray","MicRecorderButton","opacity","MicRecorderImage","img","MicRecorderStartImage","MicRecorderStopImage","MicRecorderTimerContainer","MicRecorderTimerReleaseTextContainer","red","MicRecorderTextP","show","baseConfig","MicRecorder","className","maxTimeInSeconds","onNewRecord","delay","recordingFile","recordingService","useRef","audioSamples","timerRef","timeout","target","useState","micAllowed","setMicAllowed","recordingInProgress","setRecordingInProgress","showReleaseText","setShowReleaseText","showShortRecordingText","setShowShortRecordingText","longPressTriggered","setLongPressTriggered","onAudioProcess","useCallback","current","channel","numberOfChannels","inputData","outputData","onNewRecording","fetch","r","fileName","file","FileHelper","blobToFile","humanReadableSize","sizeAsHuman","useEffect","Audio","load","listenerFn","getDuration","setTime","handleStartRecording","reset","handleStopRecording","handleFormatValue","value","preventDefault","handleStartLongPress","passive","handleEndLongPress","clearTimeout","time","callback","StartSVG","StopSVG","audioMaxSizeInMb","schema","Yup","required","test","Promise","resolver","duration","Infinity","remove","play","defined","Record","onNext","onManualUpload","defaultValues","currentLogic","action","usePortal","bindTo","getElementById","Portal","useForm","mode","yupResolver","handleSubmit","control","getValues","formState","isValid","micKey","onManualUploadWithFile","uploadedFile","onChange","UploadSVG","si","thresh","abs","units","u","toFixed","b","lastModifiedDate","name","isSafari","pause","MainContainer","Text","MicContainer","UploadContainer","UploadImage","UploadText","StopImg","attrs","src"],"mappings":"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","file":"x","sourcesContent":["import styled from 'styled-components';\nimport { colors } from '../../theme';\n\nexport interface StyledButtonProps {\n  disabled?: boolean;\n  dark?: boolean;\n  id?: string;\n}\n\nexport const StyledButton = styled.button<StyledButtonProps>`\n  height: 52px;\n  border-radius: 15px; \n  font-family: 'Source Sans Pro'; /* It could be removed if default on body changes */\n  font-weight: bold;\n  font-size: 14px;\n  font-weight: bold;\n  width: 100%;\n\n  ${({ dark, disabled }) => {\n    const color = disabled ? colors.purple_50 : colors.purple;\n    return dark ? `\n    background-color: ${color};\n    color: ${colors.white};\n    border: none;\n  ` : `\n    background-color: ${colors.white};\n    color: ${color};\n    border: 1px solid ${color};\n  `;\n  }}\n`;\n","import React, { PropsWithChildren } from 'react';\n\n// Styles\nimport {\n  StyledButton,\n  StyledButtonProps,\n} from './style';\n\nexport interface ButtonProps extends PropsWithChildren<StyledButtonProps> {\n  onClick?: ((event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void);\n}\n\nconst Button = React.memo(({ children, ...props }: ButtonProps) => ((\n  <StyledButton\n    type=\"button\"\n    {...props}\n  >\n    {children}\n  </StyledButton>\n)));\n\nexport default Button;\n","import styled from 'styled-components';\n\nexport const WizardButtonsContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  max-width: ${props => `calc(100% - ${props.theme.layout.generalPaddingAmount * 2}px)`};\n  margin: 0 auto;\n\n  button {\n    flex: 1;\n\n    &:first-of-type {\n      margin-left: 0px !important;\n    }\n\n    &:last-of-type {\n      margin-left: 20px;\n    }\n  }\n\n  @media screen and (${props => props.theme.breakpoints.tablet}){\n    max-width: 470px;\n  }\n`;\n","/* eslint-disable react/require-default-props */\nimport React from 'react';\n\n// Components\nimport Button from 'components/Button';\n\n// Styles\nimport {\n  WizardButtonsContainer,\n} from './style';\n\ninterface WizardButtonsProps {\n  invert?: boolean;\n  leftLabel: string;\n  leftDisabled?: boolean;\n  leftHandler: () => void;\n  rightLabel?: string;\n  rightDisabled?: boolean;\n  rightHandler?: () => void;\n}\n\nconst WizardButtons = React.memo(({\n  invert = false,\n  leftLabel,\n  leftDisabled,\n  leftHandler,\n  rightLabel,\n  rightDisabled,\n  rightHandler,\n}: WizardButtonsProps) => (\n  <WizardButtonsContainer>\n    <Button\n      dark={invert}\n      disabled={leftDisabled}\n      onClick={leftHandler}\n    >\n      {leftLabel}\n    </Button>\n    {\n        rightLabel && rightHandler && (\n          <Button\n            dark={!invert}\n            disabled={rightDisabled}\n            onClick={rightHandler}\n          >\n            {rightLabel}\n          </Button>\n        )\n      }\n  </WizardButtonsContainer>\n));\nexport default React.memo(WizardButtons);\n","import styled, { css } from 'styled-components';\nimport { colors } from 'theme';\n\nexport const BaseText = css`\n  font-family: 'Source Sans Pro';\n  font-size: 0.875rem;\n  line-height: 20px;\n`;\n\nexport const BlackText = styled.div<{ dark?: boolean; fontSize?: string; }>`\n  ${BaseText}\n  color: ${({ dark }) => (dark ? colors.darkBlack : colors.black)};\n  ${props => (props.fontSize ? `font-size: ${props.fontSize};` : '')}\n`;\n\nexport const BaseTitle = styled.div`\n  font-family: 'Open Sans';\n  font-weight: 700;\n  font-size: 24px;\n  line-height: 1;\n  color: ${colors.darkBlack};\n`;\n","/* eslint-disable func-names */\nexport default function () {\n  // Parts copied from https://github.com/chris-rudmin/Recorderjs\n  const BYTES_PER_SAMPLE = 2;\n  const CHANNELS = 1; // 1=mono , 2=Stereo\n  let recorded = [];\n\n  function encode(buffer) {\n    const { length } = buffer;\n    const data = new Uint8Array(length * BYTES_PER_SAMPLE * CHANNELS);\n    for (let i = 0; i < length; i += 1) {\n      const index = i * BYTES_PER_SAMPLE * CHANNELS;\n      let sample = buffer[i];\n      if (sample > 1) {\n        sample = 1;\n      } else if (sample < -1) {\n        sample = -1;\n      }\n      sample *= 32768;\n      data[index] = sample;\n      // eslint-disable-next-line no-bitwise\n      data[index + 1] = sample >> 8;\n    }\n    recorded.push(data);\n  }\n\n  function dump(sampleRate) {\n    const bufferLength = recorded.length ? recorded[0].length : 0;\n    const length = recorded.length * bufferLength;\n    const wav = new Uint8Array(44 + length);\n\n    const view = new DataView(wav.buffer);\n\n    // RIFF identifier 'RIFF'\n    view.setUint32(0, 1380533830, false);\n    // file length minus RIFF identifier length and file description length\n    view.setUint32(4, 36 + length, true);\n    // RIFF type 'WAVE'\n    view.setUint32(8, 1463899717, false);\n    // format chunk identifier 'fmt '\n    view.setUint32(12, 1718449184, false);\n    // format chunk length\n    view.setUint32(16, 16, true);\n    // sample format (raw)\n    view.setUint16(20, 1, true);\n    // channel count\n    view.setUint16(22, CHANNELS, true);\n    // sample rate\n    view.setUint32(24, sampleRate, true); // 44100 Khz\n    // byte rate (channels * sample rate * block align)\n    view.setUint32(28, CHANNELS * sampleRate * BYTES_PER_SAMPLE, true); // kbps = 1411\n    // block align (channel count * bytes per sample)\n    view.setUint16(32, CHANNELS * BYTES_PER_SAMPLE, true);\n    // bits per sample\n    view.setUint16(34, 8 * BYTES_PER_SAMPLE, true); // 16\n    // data chunk identifier 'data'\n    view.setUint32(36, 1684108385, false);\n    // data chunk length\n    view.setUint32(40, length, true);\n\n    for (let i = 0; i < recorded.length; i += 1) {\n      wav.set(recorded[i], i * bufferLength + 44);\n    }\n\n    recorded = [];\n    const msg = [wav.buffer];\n    postMessage(msg, [msg[0]]);\n  }\n\n  this.onmessage = e => {\n    if (e.data[0] === 'encode') {\n      encode(e.data[1]);\n    } else if (e.data[0] === 'dump') {\n      dump(e.data[1]);\n    } else if (e.data[0] === 'close') {\n      this.close();\n    }\n  };\n}\n","/* eslint-disable func-names */\n// import 'babel-polyfill'\n// import lamejs from 'lamejs';\n\nexport default function () {\n  // Note that relative paths don't work when loaded as a blob\n  // https://stackoverflow.com/questions/22172426/using-importsscripts-within-blob-in-a-karma-environment\n  // importScripts('https://localhost:8443/workers/encoders/lame.js') // eslint-disable-line\n\n  const channels = 1; // 1 for mono or 2 for stereo\n  // let sampleRate = 44100 // 44.1khz (normal mp3 samplerate)\n  const kbps = 128; // encode 128kbps mp3\n\n  let mp3encoder = null;\n\n  const maxSamples = 1152;\n\n  let mp3Data = []; // array of Uint8Array\n\n  function init(opts) {\n    /* global lamejs */\n    importScripts(opts.baseUrl + '/workers/encoders/lame.min.js'); // eslint-disable-line\n    mp3encoder = new lamejs.Mp3Encoder(channels, opts.sampleRate, kbps);\n  }\n\n  function floatTo16BitPCM(input, output) {\n    for (let i = 0; i < input.length; i += 1) {\n      const s = Math.max(-1, Math.min(1, input[i]));\n      // eslint-disable-next-line no-param-reassign\n      output[i] = (s < 0 ? s * 0x8000 : s * 0x7FFF);\n    }\n  }\n\n  function convertBuffer(arrayBuffer) {\n    const data = new Float32Array(arrayBuffer);\n    const out = new Int16Array(arrayBuffer.length);\n    floatTo16BitPCM(data, out);\n    return out;\n  }\n\n  function encode(arrayBuffer) {\n    const samplesMono = convertBuffer(arrayBuffer);\n    let remaining = samplesMono.length;\n    for (let i = 0; remaining >= 0; i += maxSamples) {\n      const left = samplesMono.subarray(i, i + maxSamples);\n      const data = mp3encoder.encodeBuffer(left);\n      mp3Data.push(data);\n      remaining -= maxSamples;\n    }\n\n    // var mp3buf = mp3encoder.encodeBuffer(buffer)\n    // if (mp3buf.length > 0) {\n    //   mp3Data.push(mp3buf)\n    // }\n  }\n\n  function dump() {\n    const mp3buf = mp3encoder.flush();\n    if (mp3buf.length > 0) {\n      mp3Data.push(mp3buf);\n    }\n\n    // Probably results in native memory copy\n    postMessage(mp3Data);\n\n    // Would like to do this, but not possible because mp3Data is generic array of Uint8Array, and generic\n    // arrays are not transferrable types.\n    // postMessage(mp3Data, [mp3Data])\n\n    // This might help if/when ever become available again\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer/transfer\n\n    // For now, though, we have not other option except to build a complete copy in javascript. This means\n    // we temporarily require twice the memory of whatever was recorded.\n\n    mp3Data = [];\n  }\n\n  onmessage = function onmessage(e) {\n    if (e.data[0] === 'encode') {\n      encode(e.data[1]);\n    } else if (e.data[0] === 'dump') {\n      dump(e.data[1]);\n    } else if (e.data[0] === 'init') {\n      init(e.data[1]);\n    } else if (e.data[0] === 'close') {\n      this.close();\n    }\n  };\n}\n","/* eslint-disable */\n/* eslint-disable func-names */\n/* global Flac */\n\nexport default function () {\n  const workersHost = process.env.PUBLIC_URL || process.env.REACT_APP_WORKERS_HOST || 'https://virufy.org/demo';\n  importScripts(`${workersHost}/workers/encoders/libflac.dev.js`); // eslint-disable-line\n\n  let flacEncoder;\n  let CHANNELS = 1;\n  let SAMPLERATE = 44100;\n  let COMPRESSION = 5;\n  let BPS = 16;\n  let flacOk = 1;\n  let flacLength = 0;\n  const flacBuffers = [];\n  let INIT = false;\n  const wavBuffers = [];\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  function writeCallbackFn(buffer, bytes) {\n    flacBuffers.push(buffer);\n    flacLength += buffer.byteLength;\n  }\n\n  // HELPER: handle initialization of flac encoder\n  function initFlac() {\n    flacEncoder = Flac.init_libflac_encoder(SAMPLERATE, CHANNELS, BPS, COMPRESSION, 0);\n    /// /\n    if (flacEncoder !== 0) {\n      const statusEncoder = Flac.init_encoder_stream(flacEncoder, writeCallbackFn);\n      flacOk &= (statusEncoder == 0);\n\n      console.log(`flac init     : ${flacOk}`);// DEBUG\n      console.log(`status encoder: ${statusEncoder}`);// DEBUG\n\n      INIT = true;\n    } else {\n      console.error('Error initializing the encoder.');\n    }\n  }\n\n  function init(config) {\n    let finalConfig = config;\n\n    if (!finalConfig) {\n      finalConfig = {\n        bps: BPS, channels: CHANNELS, samplerate: SAMPLERATE, compression: COMPRESSION,\n      };\n    }\n\n    finalConfig.channels = finalConfig.channels ? finalConfig.channels : CHANNELS;\n    finalConfig.samplerate = finalConfig.samplerate ? finalConfig.samplerate : SAMPLERATE;\n    finalConfig.bps = finalConfig.bps ? finalConfig.bps : BPS;\n    finalConfig.compression = finalConfig.compression ? finalConfig.compression : COMPRESSION;\n\n    /// /\n    COMPRESSION = finalConfig.compression;\n    BPS = finalConfig.bps;\n    SAMPLERATE = finalConfig.samplerate;\n    CHANNELS = finalConfig.channels;\n    /// /\n\n    if (!Flac.isReady()) {\n      Flac.onready = function () {\n        setTimeout(() => {\n          initFlac();\n        }, 0);\n      };\n    } else {\n      initFlac();\n    }\n  }\n\n  // HELPER: actually encode PCM data to Flac\n  function doEncodeFlac(audioData) {\n    const bufLength = audioData.length;\n    const bufferI32 = new Uint32Array(bufLength);\n    const view = new DataView(bufferI32.buffer);\n    const volume = 1;\n    let index = 0;\n    for (let i = 0; i < bufLength; i += 1) {\n      view.setInt32(index, (audioData[i] * (0x7FFF * volume)), true);\n      index += 4;\n    }\n\n    const flacReturn = Flac.FLAC__stream_encoder_process_interleaved(\n      flacEncoder, bufferI32, bufferI32.length / CHANNELS,\n    );\n    if (flacReturn != true) {\n      console.log(`Error: encode_buffer_pcm_as_flac returned false. ${flacReturn}`);\n    }\n  }\n\n  // HELPER: handle incoming PCM audio data for Flac encoding:\n  function encodeFlac(audioData) {\n    if (!Flac.isReady()) {\n      // if Flac is not ready yet: buffer the audio\n      wavBuffers.push(audioData);\n      console.info('buffered audio data for Flac encdoing');\n    } else {\n      if (wavBuffers.length > 0) {\n        // if there is buffered audio: encode buffered first (and clear buffer)\n\n        const len = wavBuffers.length;\n        const buffered = wavBuffers.splice(0, len);\n        // eslint-disable-next-line no-plusplus\n        for (let i = 0; i < len; ++i) {\n          doEncodeFlac(buffered[i]);\n        }\n      }\n\n      doEncodeFlac(audioData);\n    }\n  }\n\n  function mergeBuffersUint8(channelBuffer, recordingLength) {\n    const result = new Uint8Array(recordingLength);\n    let offset = 0;\n    const lng = channelBuffer.length;\n    for (let i = 0; i < lng; i += 1) {\n      const buffer = channelBuffer[i];\n      result.set(buffer, offset);\n      offset += buffer.length;\n    }\n    return result;\n  }\n\n  function exportFlacFile(recBuffers, recLength) {\n    // convert buffers into one single buffer\n    const samples = mergeBuffersUint8(recBuffers, recLength);\n\n    // var audioBlob = new Blob([samples], { type: type });\n    const theBlob = new Blob([samples], { type: 'audio/flac' });\n    return theBlob;\n  }\n\n  /*\n   * clear recording buffers\n   */\n  function clear() {\n    flacBuffers.splice(0, flacBuffers.length);\n    flacLength = 0;\n    wavBuffers.splice(0, wavBuffers.length);\n  }\n\n  this.onmessage = function onmessage(e) {\n    if (e.data[0] === 'init') {\n      init(e.data[1]);\n    } else if (e.data[0] === 'encode') {\n      encodeFlac(e.data[1]);\n    } else if (e.data[0] === 'dump') {\n      let data;\n      if (!Flac.isReady()) {\n        console.error('Flac was not initialized: could not encode data!');\n      } else {\n        flacOk &= Flac.FLAC__stream_encoder_finish(flacEncoder);\n        console.log(`flac finish: ${flacOk}`);// DEBUG\n        data = exportFlacFile(flacBuffers, flacLength);\n\n        Flac.FLAC__stream_encoder_delete(flacEncoder);\n      }\n\n      clear();\n\n      postMessage(data);\n      INIT = false;\n    }\n  };\n}\n","/* eslint-disable max-len */\n/* eslint-disable consistent-return */\n/* eslint-disable no-underscore-dangle */\n// Vendor Library https://github.com/mogwai/pwa-audio-recorder/tree/master\n\nimport EncoderWav from './encoder-wav-worker';\nimport EncoderMp3 from './encoder-mp3-worker';\nimport EncoderFlac from './encoder-flac-worker';\n// import EncoderOgg from './encoder-ogg-worker';\n\nexport default class RecorderService {\n  constructor(config) {\n    window.AudioContext = window.AudioContext || window.webkitAudioContext;\n\n    this.em = document.createDocumentFragment();\n\n    this.state = 'inactive';\n\n    this.chunks = [];\n    this.chunkType = '';\n\n    this.encoderMimeType = 'audio/wav';\n\n    this.config = {\n      broadcastAudioProcessEvents: config.broadcastAudioProcessEvents !== undefined ? config.broadcastAudioProcessEvents : false,\n      createAnalyserNode: config.createAnalyserNode !== undefined ? config.createAnalyserNode : false,\n      createDynamicsCompressorNode: config.createDynamicsCompressorNode !== undefined ? config.createDynamicsCompressorNode : false,\n      forceScriptProcessor: config.forceScriptProcessor !== undefined ? config.forceScriptProcessor : false,\n      manualEncoderId: config.manualEncoderId !== undefined ? config.manualEncoderId : 'wav',\n      micGain: config.micGain !== undefined ? config.micGain : 1.0,\n      processorBufferSize: config.processorBufferSize !== undefined ? config.processorBufferSize : 2048,\n      stopTracksAndCloseCtxWhenFinished: config.stopTracksAndCloseCtxWhenFinished !== undefined ? config.stopTracksAndCloseCtxWhenFinished : true,\n      usingMediaRecorder: config.usingMediaRecorder !== undefined ? config.usingMediaRecorder : typeof window.MediaRecorder !== 'undefined',\n      enableEchoCancellation: config.enableEchoCancellation !== undefined ? config.enableEchoCancellation : true,\n      sampleRate: config.sampleRate !== undefined ? config.sampleRate : 44100,\n      onRecording: config.onRecording,\n      onAudioPress: config.onAudioPress,\n    };\n\n    if (config.onRecording) {\n      this.recordingFn = evt => config.onRecording(evt);\n      this.em.addEventListener('recording', this.recordingFn);\n    }\n    if (config.onAudioProcesss) {\n      this.onAudioProcessFn = evt => config.onAudioProcesss(evt);\n      this.em.addEventListener('onaudioprocess', this.onAudioProcessFn);\n    }\n  }\n\n  cleanup = () => {\n    if (this.config.onRecording) {\n      this.em.removeEventListener('recording', this.recordingFn);\n    }\n    if (this.config.onAudioProcesss) {\n      this.em.removeEventListener('onaudioprocess', this.onAudioProcessFn);\n    }\n  };\n\n  createWorker = fn => {\n    const js = fn\n      .toString()\n      .replace(/^function\\s*\\(\\)\\s*{/, '')\n      .replace(/}$/, '');\n    const blob = new Blob([js]);\n    return new Worker(URL.createObjectURL(blob));\n  };\n\n  startRecording = timeslice => {\n    if (this.state !== 'inactive') {\n      return;\n    }\n\n    // This is the case on ios/chrome, when clicking links from within ios/slack (sometimes), etc.\n    if (\n      !navigator\n      || !navigator.mediaDevices\n      || !navigator.mediaDevices.getUserMedia\n    ) {\n      // alert('Missing support for navigator.mediaDevices.getUserMedia'); // temp: helps when testing for strange issues on ios/safari\n      return;\n    }\n\n    this.audioCtx = new AudioContext({\n      sampleRate: this.config.sampleRate,\n    });\n    this.micGainNode = this.audioCtx.createGain();\n    this.outputGainNode = this.audioCtx.createGain();\n\n    if (this.config.createDynamicsCompressorNode) {\n      this.dynamicsCompressorNode = this.audioCtx.createDynamicsCompressor();\n    }\n\n    if (this.config.createAnalyserNode) {\n      this.analyserNode = this.audioCtx.createAnalyser();\n    }\n\n    // If not using MediaRecorder(i.e. safari and edge), then a script processor is required. It's optional\n    // on browsers using MediaRecorder and is only useful if wanting to do custom analysis or manipulation of\n    // recorded audio data.\n    if (\n      this.config.forceScriptProcessor\n      || this.config.broadcastAudioProcessEvents\n      || !this.config.usingMediaRecorder\n    ) {\n      this.processorNode = this.audioCtx.createScriptProcessor(\n        this.config.processorBufferSize,\n        1,\n        1,\n      ); // TODO: Get the number of channels from mic\n    }\n\n    // Create stream destination on chrome/firefox because, AFAICT, we have no other way of feeding audio graph output\n    // in to MediaRecorderSafari/Edge don't have this method as of 2018-04.\n    if (this.audioCtx.createMediaStreamDestination) {\n      this.destinationNode = this.audioCtx.createMediaStreamDestination();\n    } else {\n      this.destinationNode = this.audioCtx.destination;\n    }\n\n    // Create web worker for doing the encoding\n    if (!this.config.usingMediaRecorder) {\n      if (this.config.manualEncoderId === 'mp3') {\n        this.encoderWorker = this.createWorker(EncoderMp3);\n        const baseUrl = process.env.PUBLIC_URL || 'https://virufy.org/demo';\n        this.encoderWorker.postMessage([\n          'init',\n          { baseUrl, sampleRate: this.audioCtx.sampleRate },\n        ]);\n        this.encoderMimeType = 'audio/mpeg';\n      } else if (this.config.manualEncoderId === 'flac') {\n        this.encoderWorker = this.createWorker(EncoderFlac);\n        this.encoderWorker.postMessage([\n          'init',\n          { sampleRate: this.audioCtx.sampleRate },\n        ]);\n        this.encoderMimeType = 'audio/flac';\n      } else {\n        this.encoderWorker = this.createWorker(EncoderWav);\n        this.encoderMimeType = 'audio/wav';\n      }\n      this.encoderWorker.addEventListener('message', e => {\n        const event = new Event('dataavailable');\n        if (this.config.manualEncoderId === 'ogg' || this.config.manualEncoderId === 'flac') {\n          event.data = e.data;\n        } else {\n          event.data = new Blob(e.data, { type: this.encoderMimeType });\n        }\n        this._onDataAvailable(event);\n      });\n    }\n\n    // Setup media constraints\n    const userMediaConstraints = {\n      audio: {\n        echoCancellation: this.config.enableEchoCancellation,\n      },\n    };\n    if (this.config.deviceId) {\n      userMediaConstraints.audio.deviceId = this.config.deviceId;\n    }\n\n    // This will prompt user for permission if needed\n    return navigator.mediaDevices\n      .getUserMedia(userMediaConstraints)\n      .then(stream => {\n        this._startRecordingWithStream(stream, timeslice);\n      })\n      .catch(error => {\n        // alert(`Error with getUserMedia: ${error.message}`); // temp: helps when testing for strange issues on ios/safari\n        console.log(error);\n      });\n  };\n\n  setMicGain = newGain => {\n    this.config.micGain = newGain;\n    if (this.audioCtx && this.micGainNode) {\n      this.micGainNode.gain.setValueAtTime(newGain, this.audioCtx.currentTime);\n    }\n  };\n\n  _startRecordingWithStream = (stream, timeslice) => {\n    this.micAudioStream = stream;\n\n    this.inputStreamNode = this.audioCtx.createMediaStreamSource(\n      this.micAudioStream,\n    );\n    this.audioCtx = this.inputStreamNode.context;\n\n    // Kind-of a hack to allow hooking in to audioGraph inputStreamNode\n    if (this.onGraphSetupWithInputStream) {\n      this.onGraphSetupWithInputStream(this.inputStreamNode);\n    }\n\n    this.inputStreamNode.connect(this.micGainNode);\n    this.micGainNode.gain.setValueAtTime(\n      this.config.micGain,\n      this.audioCtx.currentTime,\n    );\n\n    let nextNode = this.micGainNode;\n    if (this.dynamicsCompressorNode) {\n      this.micGainNode.connect(this.dynamicsCompressorNode);\n      nextNode = this.dynamicsCompressorNode;\n    }\n\n    this.state = 'recording';\n\n    if (this.processorNode) {\n      nextNode.connect(this.processorNode);\n      this.processorNode.connect(this.outputGainNode);\n      this.processorNode.onaudioprocess = e => this._onAudioProcess(e);\n    } else {\n      nextNode.connect(this.outputGainNode);\n    }\n\n    if (this.analyserNode) {\n      // TODO: If we want the analyser node to receive the processorNode's output, this needs to be changed _and_\n      //       processor node needs to be modified to copy input to output. It currently doesn't because it's not\n      //       needed when doing manual encoding.\n      // this.processorNode.connect(this.analyserNode)\n      nextNode.connect(this.analyserNode);\n    }\n\n    this.outputGainNode.connect(this.destinationNode);\n\n    if (this.config.usingMediaRecorder) {\n      this.mediaRecorder = new MediaRecorder(this.destinationNode.stream, { mimeType: this.encoderMimeType || 'audio/wav' });\n      this.mediaRecorder.addEventListener('dataavailable', evt => this._onDataAvailable(evt));\n      this.mediaRecorder.addEventListener('error', evt => this._onError(evt));\n\n      this.mediaRecorder.start(timeslice);\n    } else {\n      // Output gain to zero to prevent feedback. Seems to matter only on Edge, though seems like should matter\n      // on iOS too.  Matters on chrome when connecting graph to directly to audioCtx.destination, but we are\n      // not able to do that when using MediaRecorder.\n      this.outputGainNode.gain.setValueAtTime(0, this.audioCtx.currentTime);\n      // this.outputGainNode.gain.value = 0\n\n      // Todo: Note that time slicing with manual wav encoderWav won't work. To allow it would require rewriting the encoderWav\n      // to assemble all chunks at end instead of adding header to each chunk.\n      if (timeslice) {\n        console.log(\n          'Time slicing without MediaRecorder is not yet supported. The resulting recording will not be playable.',\n        );\n        this.slicing = setInterval(function anon() {\n          if (this.state === 'recording') {\n            this.encoderWorker.postMessage(['dump', this.context.sampleRate]);\n          }\n        }, timeslice);\n      }\n    }\n  };\n\n  _onAudioProcess = e => {\n    // console.log('onaudioprocess', e)\n    // let inputBuffer = e.inputBuffer\n    // let outputBuffer = e.outputBuffer\n    // console.log(this.micAudioStream)\n    // console.log(this.audioCtx)\n    // console.log(this.micAudioStream.getTracks().forEach((track) => console.log(track)))\n\n    // this.onAudioEm.dispatch(new Event('onaudioprocess', {inputBuffer:inputBuffer,outputBuffer:outputBuffer}))\n\n    if (this.config.broadcastAudioProcessEvents) {\n      this.em.dispatchEvent(\n        new CustomEvent('onaudioprocess', {\n          detail: {\n            inputBuffer: e.inputBuffer,\n            outputBuffer: e.outputBuffer,\n          },\n        }),\n      );\n    }\n\n    // // Example handling:\n    // let inputBuffer = e.inputBuffer\n    // let outputBuffer = e.outputBuffer\n    // // Each channel (usually only one)\n    // for (let channel = 0; channel < outputBuffer.numberOfChannels; channel++) {\n    //   let inputData = inputBuffer.getChannelData(channel)\n    //   let outputData = outputBuffer.getChannelData(channel)\n    //\n    //   // Each sample\n    //   for (let sample = 0; sample < inputBuffer.length; sample++) {\n    //     // Make output equal to the same as the input (thus processor is doing nothing at this time)\n    //     outputData[sample] = inputData[sample]\n    //   }\n    // }\n\n    // When manually encoding (safari/edge), there's no reason to copy data to output buffer.  We set the output\n    // gain to 0 anyways (which is required on Edge if we did copy data to output). However, if using a MediaRecorder\n    // and a processor (all other browsers), then it would be required to copy the data otherwise the graph would\n    // generate no data for the MediaRecorder to consume.\n    // if (this.forceScriptProcessor) {\n\n    // // Copy input to output\n    // let inputBuffer = e.inputBuffer\n    // let outputBuffer = e.outputBuffer\n    // // This doesn't work on iOS/Safari. Guessing it doesn't have copyToChannel support, but haven't verified.\n    // for (let channel = 0; channel < outputBuffer.numberOfChannels; channel++) {\n    //   outputBuffer.copyToChannel(inputBuffer.getChannelData(channel), channel)\n    // }\n\n    // Safari and Edge require manual encoding via web worker. Single channel only for now.\n    // Example stereo encoderWav: https://github.com/MicrosoftEdge/Demos/blob/master/microphone/scripts/recorderworker.js\n    if (!this.config.usingMediaRecorder) {\n      if (this.state === 'recording') {\n        if (this.config.broadcastAudioProcessEvents) {\n          this.encoderWorker.postMessage([\n            'encode',\n            e.outputBuffer.getChannelData(0),\n          ]);\n        } else {\n          this.encoderWorker.postMessage([\n            'encode',\n            e.inputBuffer.getChannelData(0),\n          ]);\n        }\n      }\n    }\n  };\n\n  stopRecording = () => {\n    if (this.state === 'inactive') {\n      return;\n    }\n    if (this.config.usingMediaRecorder) {\n      this.state = 'inactive';\n      this.mediaRecorder.stop();\n    } else {\n      this.state = 'inactive';\n      this.encoderWorker.postMessage(['dump', this.audioCtx.sampleRate]);\n      clearInterval(this.slicing);\n\n      // TODO: There should be a more robust way to handle this\n      // Without something like this, I think  the last recorded sample could be lost due to timing\n      // setTimeout(() => {\n      //   this.state = 'inactive'\n      //   this.encoderWorker.postMessage(['dump', this.audioCtx.sampleRate])\n      // }, 100)\n    }\n  };\n\n  _onDataAvailable = evt => {\n    // console.log('state', this.mediaRecorder.state)\n    // console.log('evt.data', evt.data)\n\n    this.chunks.push(evt.data);\n    this.chunkType = evt.data.type;\n\n    if (this.state !== 'inactive') {\n      return;\n    }\n\n    const blob = new Blob(this.chunks, { type: this.chunkType });\n    const blobUrl = URL.createObjectURL(blob);\n    const recording = {\n      ts: new Date().getTime(),\n      blobUrl,\n      mimeType: blob.type,\n      size: blob.size,\n    };\n\n    this.chunks = [];\n    this.chunkType = null;\n\n    if (this.destinationNode) {\n      this.destinationNode.disconnect();\n      this.destinationNode = null;\n    }\n    if (this.outputGainNode) {\n      this.outputGainNode.disconnect();\n      this.outputGainNode = null;\n    }\n    if (this.analyserNode) {\n      this.analyserNode.disconnect();\n      this.analyserNode = null;\n    }\n    if (this.processorNode) {\n      this.processorNode.disconnect();\n      this.processorNode = null;\n    }\n    if (this.encoderWorker) {\n      this.encoderWorker.postMessage(['close']);\n      this.encoderWorker = null;\n    }\n    if (this.dynamicsCompressorNode) {\n      this.dynamicsCompressorNode.disconnect();\n      this.dynamicsCompressorNode = null;\n    }\n    if (this.micGainNode) {\n      this.micGainNode.disconnect();\n      this.micGainNode = null;\n    }\n    if (this.inputStreamNode) {\n      this.inputStreamNode.disconnect();\n      this.inputStreamNode = null;\n    }\n\n    if (this.config.stopTracksAndCloseCtxWhenFinished) {\n      // This removes the red bar in iOS/Safari\n      this.micAudioStream.getTracks().forEach(track => track.stop());\n      this.micAudioStream = null;\n\n      this.audioCtx.close();\n      this.audioCtx = null;\n    }\n\n    this.em.dispatchEvent(\n      new CustomEvent('recording', { detail: { recording } }),\n    );\n  };\n\n  _onError = evt => {\n    console.log('error', evt);\n    this.em.dispatchEvent(new Event('error'));\n    // alert(`error:${evt}`); // for debugging purposes\n  };\n}\n","import styled from 'styled-components';\n\nexport const ModalBody = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  @media screen and (${props => props.theme.breakpoints.tablet}) {\n    margin: auto;\n`;\n\nexport const ModalTitle = styled.div`\n  font-family: 'Biko';\n  font-size: 30px;\n  line-height: 30px;\n  margin-bottom: 10px;\n  font-weight: 600;\n`;\n\nexport const ModalContent = styled.div`\n  font-family: 'Source Sans Pro';\n  text-align: center;\n  line-height: 25px;\n  font-size: 18px;\n  margin-top: 10px;\n  margin-bottom: 30px;\n`;\n","/* eslint-disable react/jsx-props-no-spreading */\nimport React, { PropsWithChildren } from 'react';\nimport Modal from 'react-modal';\nimport { useTranslation } from 'react-i18next';\nimport Button from 'components/Button';\n\n// Style\nimport {\n  ModalBody, ModalTitle, ModalContent,\n} from './style';\n\nexport interface ConfirmationModalProps {\n  isOpen: boolean;\n  modalTitle: string;\n  onConfirm?: () => void;\n}\n\nModal.setAppElement('#root');\n\nconst RecordErrorModal = React.memo(({\n  modalTitle,\n  children,\n  onConfirm,\n  ...props\n}: PropsWithChildren<ConfirmationModalProps>) => {\n  // Handlers\n\n  const { t } = useTranslation();\n\n  const customStyles = {\n    content: {\n      height: '281px',\n      maxWidth: '348px',\n      margin: 'auto',\n      borderRadius: '10px',\n      border: 'none',\n    },\n    overlay: { backgroundColor: 'rgba(0, 0, 0, 0.5)' },\n  };\n\n  return (\n    <Modal\n      {...props}\n      style={customStyles}\n    >\n      <ModalBody className=\"ModalBody\">\n        <ModalTitle>{modalTitle}</ModalTitle>\n        <ModalContent>{children}</ModalContent>\n        <Button onClick={onConfirm} dark>\n          {t('recordingsIntroduction:retryButton', 'Retry')}\n        </Button>\n      </ModalBody>\n    </Modal>\n  );\n});\n\nexport default RecordErrorModal;\n","export default __webpack_public_path__ + \"static/media/start.e0d4d3a6.svg\";","import styled from 'styled-components';\nimport { colors } from 'theme';\n\nexport const MicRecorderContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n`;\n\nexport const MicButtonsContainer = styled.div`\n  display:flex;\n  justify-content: space-between;\n  width: 144px;\n  margin: auto;\n`;\n\nexport const MicButtonWithText = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nexport const MicNote = styled.p`\n  font-size: 14px;\n  color: ${colors.lightDarkGray};\n  margin-top: 8px;\n  margin-bottom: 0px;\n`;\nexport const MicRecorderButton = styled.button<{ disabled?: boolean; opacity?: boolean}>`\n  background-color: ${colors.purple};\n  width: 56px;\n  height: 56px;\n  position: relative;\n  outline: none !important;\n  border: none;\n  border-radius: 50%;\n  padding: 0;\n  transition: background-color 0.25s;\n  opacity: ${props => (props.disabled || props.opacity ? '0.5' : '1')};\n\n  @supports not (-webkit-touch-callout: none) {\n    /* CSS for other than iOS devices */\n    -webkit-tap-highlight-color: transparent;\n  }\n\n  &:active {\n    background-color: ${colors.purple};\n  }\n\n  &:before {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background-color: transparent;\n    z-index: 1;\n    border-radius: 50%;\n  }\n\n  @media screen and (${props => props.theme.breakpoints.tablet}) {\n    width: 66px;\n    height: 66px;\n  }\n`;\n\nexport const MicRecorderImage = styled.img`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  transition: opacity 0.25s;\n`;\n\nexport const MicRecorderStartImage = styled(MicRecorderImage)`\n  width: 27px;\n  height: 27px;\n`;\n\nexport const MicRecorderStopImage = styled(MicRecorderImage)`\n  width: 15px;\n  height: 15px;\n`;\n\nexport const MicRecorderTimerContainer = styled.div`\n  width: 70px;\n  height: 41px;\n  font-size: 1.25rem;\n  color: ${colors.purple};\n  font-weight: bold;\n  font-family: 'Source Sans Pro';\n  border: 1px solid ${colors.purple};\n  border-radius: 15px;\n  display: flex; \n  align-items: center; \n  justify-content: center; \n  margin-bottom: 28px;\n\n  @media screen and (${props => props.theme.breakpoints.tablet}) {\n    font-size: 1.75rem;\n    margin-top: 22px;\n  }\n`;\n\nexport const MicRecorderTimerReleaseTextContainer = styled.div`\n  font-size: 16px;\n  line-height: 20px;\n  color: ${colors.red};\n  font-family: 'Source Sans Pro';\n  display: flex; \n  margin-left: 20px;\n  margin-top:10px;\n`;\n\nexport const MicRecorderTextP = styled.p<{ show?: boolean }>`\n  visibility: ${props => (props.show ? 'flex' : 'hidden')};\n`;\n","/* eslint-disable react/require-default-props */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\nimport React from 'react';\nimport Timer from 'react-compound-timer';\nimport { useTranslation } from 'react-i18next';\n\n// Utils\nimport RecorderService from 'helper/audio/RecorderService';\nimport FileHelper from 'helper/fileHelper';\nimport { getDuration } from 'helper/getDuration';\n\n// Modals\nimport RecordErrorModal from 'modals/RecordErrorModal';\n\n// Images\nimport StartSVG from 'assets/icons/start.svg';\nimport StopSVG from 'assets/icons/stop.svg';\n\n// Styles\nimport {\n  MicRecorderContainer,\n  MicRecorderButton,\n  MicRecorderStartImage,\n  MicRecorderStopImage,\n  MicRecorderTimerContainer,\n  MicRecorderTimerReleaseTextContainer,\n  MicRecorderTextP,\n  MicButtonsContainer,\n  MicNote,\n  MicButtonWithText,\n} from './style';\n\ninterface MicRecorderProps {\n  className?: string;\n  maxTimeInSeconds?: number;\n  onNewRecord: (file: File, humanReadableSize: string) => void;\n  delay?: number;\n  recordingFile: any;\n}\n\nconst baseConfig = {\n  usingMediaRecorder: false,\n  sampleRate: 48000,\n  manualEncoderId: 'wav', // wav / mp3 / flac\n  processorBufferSize: 2048, // 4096 flac / 2048 wav\n};\n\nexport interface RecorderServiceType {\n  config: {\n    broadcastAudioProcessEvents: boolean; // default: false\n    createAnalyserNode: boolean; // default: false\n    createDynamicsCompressorNode: boolean; // default: false\n    forceScriptProcessor: false; // default: false\n    manualEncoderId: string; // default: 'wav'\n    micGain: number; // default: 1.0\n    processorBufferSize: number; // default: 2048\n    stopTracksAndCloseCtxWhenFinished: boolean; // default: true\n    usingMediaRecorder: boolean; // default: typeof window.MediaRecorder !== 'undefined'\n    enableEchoCancellation: boolean; // default: true\n    sampleRate: number; // default: 44100\n  };\n  em: DocumentFragment;\n  startRecording: (timeslice?: number) => Promise<void>;\n  stopRecording: () => void;\n  cleanup: () => void;\n}\n\nconst MicRecorder = ({\n  className = '',\n  maxTimeInSeconds = 30, // 30 segs\n  onNewRecord,\n  delay = 500, // 500ms\n  recordingFile,\n}: MicRecorderProps) => {\n  // Hooks\n  const { t } = useTranslation();\n\n  // Refs\n  const recordingService = React.useRef<RecorderServiceType>();\n  const audioSamples = React.useRef<number>(0);\n  const timerRef = React.useRef<any>();\n  const timeout = React.useRef<NodeJS.Timeout>();\n  const target = React.useRef<HTMLButtonElement>();\n\n  // States\n  const [micAllowed, setMicAllowed] = React.useState<boolean>(true);\n  const [recordingInProgress, setRecordingInProgress] = React.useState<boolean>();\n  const [showReleaseText, setShowReleaseText] = React.useState<boolean>(false);\n  const [showShortRecordingText, setShowShortRecordingText] = React.useState<boolean>(false);\n  const [longPressTriggered, setLongPressTriggered] = React.useState<boolean>(false);\n\n  // Handlers\n  const onAudioProcess = React.useCallback((e: any) => {\n    audioSamples.current += 1;\n    const { inputBuffer, outputBuffer } = e.detail;\n    for (let channel = 0; channel < outputBuffer.numberOfChannels; channel += 1) {\n      const inputData = inputBuffer.getChannelData(channel);\n      const outputData = outputBuffer.getChannelData(channel);\n      // Each sample\n      for (let sample = 0; sample < inputBuffer.length; sample += 1) {\n        outputData[sample] = inputData[sample];\n      }\n    }\n  }, []);\n\n  const onNewRecording = React.useCallback(async (e: any) => {\n    const { detail } = e;\n    const { recording } = detail;\n    const blob = await fetch(recording.blobUrl).then(r => r.blob());\n    const fileName = `Filename.${baseConfig.manualEncoderId}`;\n\n    const file = FileHelper.blobToFile(blob, fileName);\n    const humanReadableSize = FileHelper.sizeAsHuman(file.size, true);\n\n    onNewRecord(file, humanReadableSize);\n  }, [onNewRecord]);\n\n  // Effects\n  React.useEffect(() => {\n    recordingService.current = new RecorderService({\n      ...baseConfig,\n      onRecording: onNewRecording,\n      onAudioProcesss: onAudioProcess,\n    }) as RecorderServiceType;\n\n    const userMediaConstraints = {\n      audio: {\n        echoCancellation: recordingService.current.config.enableEchoCancellation,\n      },\n    };\n    navigator.mediaDevices.getUserMedia(userMediaConstraints)\n      .then(() => {\n        setMicAllowed(true);\n      })\n      .catch(() => {\n        setMicAllowed(false);\n      });\n\n    if (recordingFile) {\n      const file = recordingFile as File;\n      if (file.size) {\n        const audio = new Audio(URL.createObjectURL(file));\n        audio.load();\n        const listenerFn = async () => {\n          audio.removeEventListener('loadedmetadata', listenerFn);\n          getDuration(audio, true).then(result => {\n            timerRef.current?.setTime(result * 1000);\n          });\n        };\n        audio.addEventListener('loadedmetadata', listenerFn);\n      }\n    }\n\n    return () => {\n      if (recordingService.current) {\n        recordingService.current.cleanup();\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Handlers\n  const handleStartRecording = React.useCallback(() => {\n    if (recordingService.current) {\n      audioSamples.current = 0;\n      recordingService.current\n        .startRecording()\n        .then(() => {\n          setRecordingInProgress(true);\n          setShowShortRecordingText(false);\n          if (timerRef.current) {\n            timerRef.current.reset();\n            timerRef.current?.setTime(0);\n            timerRef.current.start();\n          }\n        })\n        .catch((error: any) => console.error('ERROR', error));\n    }\n  }, []);\n\n  const handleStopRecording = React.useCallback(() => {\n    if (recordingService.current) {\n      recordingService.current.stopRecording();\n      setRecordingInProgress(false);\n      if (timerRef.current) {\n        if (timerRef.current.getTime() / 1000 < 2) {\n          setShowShortRecordingText(true);\n        }\n        timerRef.current.stop();\n      }\n    }\n  }, []);\n\n  const handleFormatValue = React.useCallback((value: number) => (value < 10 ? `0${value}` : value), []);\n\n  const preventDefault = (event: any) => {\n    if (!('touches' in event)) event.preventDefault();\n  };\n\n  const handleStartLongPress = React.useCallback(\n    event => {\n      if (event.target) {\n        event.target.addEventListener('touchend', preventDefault, {\n          passive: false,\n        });\n        target.current = event.target;\n      }\n      timeout.current = setTimeout(() => {\n        setShowReleaseText(true);\n        setLongPressTriggered(true);\n        setShowShortRecordingText(false);\n      }, delay);\n    },\n    [delay],\n  );\n\n  const handleEndLongPress = React.useCallback(() => {\n    if (timeout.current) {\n      clearTimeout(timeout.current);\n    }\n    if (longPressTriggered) {\n      setShowReleaseText(false);\n    }\n    setLongPressTriggered(false);\n    if (target.current) {\n      target.current.removeEventListener('touchend', preventDefault);\n    }\n  },\n  [longPressTriggered]);\n\n  return (\n    <MicRecorderContainer className={className}>\n      <MicRecorderTimerReleaseTextContainer>\n        {!showShortRecordingText\n          && (\n            <MicRecorderTextP\n              show={showReleaseText}\n            >\n              {recordingInProgress ? t('recordingsIntroduction:releaseButtonStop') : t('recordingsIntroduction:releaseButtonStart')}\n            </MicRecorderTextP>\n          )}\n        <RecordErrorModal\n          isOpen={showShortRecordingText}\n          modalTitle=\"Oops.\"\n          onConfirm={handleStartRecording}\n        >\n          {t('recordingsIntroduction:shortRecording')}\n        </RecordErrorModal>\n      </MicRecorderTimerReleaseTextContainer>\n      <MicRecorderTimerContainer>\n        <Timer\n          ref={timerRef}\n          startImmediately={false}\n          checkpoints={[\n            {\n              time: maxTimeInSeconds * 1000,\n              callback: handleStopRecording,\n            },\n          ]}\n        >\n          <Timer.Minutes />\n          :\n          <Timer.Seconds formatValue={handleFormatValue} />\n        </Timer>\n      </MicRecorderTimerContainer>\n      <MicButtonsContainer>\n        <MicButtonWithText>\n          <MicRecorderButton\n            disabled={!micAllowed || recordingInProgress}\n            onClick={handleStartRecording}\n            onMouseDown={handleStartLongPress}\n            onMouseUp={handleEndLongPress}\n            onTouchStart={handleStartLongPress}\n            onTouchEnd={handleEndLongPress}\n            onMouseLeave={handleEndLongPress}\n          >\n            <MicRecorderStartImage\n              src={StartSVG}\n              alt=\"Start\"\n            />\n          </MicRecorderButton>\n          <MicNote>{t('recordingsIntroduction:recordCough.record')}</MicNote>\n        </MicButtonWithText>\n        <MicButtonWithText>\n          <MicRecorderButton\n            disabled={!micAllowed || !recordingInProgress}\n            onClick={handleStopRecording}\n            onMouseDown={handleStartLongPress}\n            onMouseUp={handleEndLongPress}\n            onTouchStart={handleStartLongPress}\n            onTouchEnd={handleEndLongPress}\n            onMouseLeave={handleEndLongPress}\n          >\n            <MicRecorderStopImage\n              src={StopSVG}\n              alt=\"Stop\"\n            />\n          </MicRecorderButton>\n          <MicNote>{t('recordingsIntroduction:recordCough.stop')}</MicNote>\n        </MicButtonWithText>\n      </MicButtonsContainer>\n    </MicRecorderContainer>\n  );\n};\n\nexport default React.memo(MicRecorder);\n","export default __webpack_public_path__ + \"static/media/upload.21eec1c7.svg\";","import React from 'react';\nimport usePortal from 'react-useportal';\nimport { useTranslation } from 'react-i18next';\n\n// Form\nimport { Controller, useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as Yup from 'yup';\n\n// Components\nimport MicRecorder from 'components/MicRecorder';\nimport WizardButtons from 'components/WizardButtons';\n\n// Images\nimport UploadSVG from 'assets/icons/upload.svg';\n\n// Styles\nimport {\n  MainContainer,\n  UploadContainer,\n  UploadImage,\n  UploadText,\n  MicContainer,\n} from './style';\n\nconst audioMaxSizeInMb = 5;\n\nconst schema = Yup.object({\n  recordingFile: Yup.mixed()\n    .required('ERROR.FILE_REQUIRED')\n    .test('fileSize', 'ERROR.FILE_SIZE', (value?: any) => {\n      if (value) {\n        const file = value as File;\n        const { size } = file;\n        return (size <= 1024 ** 3 * audioMaxSizeInMb);\n      }\n      return !!value;\n    })\n    .test('fileDuration', 'ERROR.FILE_DURATION', async (value?: any) => {\n      if (value) {\n        const file = value as File;\n        const audio = new Audio(URL.createObjectURL(file));\n        audio.load();\n        await new Promise(resolver => audio.addEventListener('loadedmetadata', resolver));\n        const duration: number = await new Promise(resolver => {\n          if (audio.duration !== Infinity) {\n            resolver(audio.duration);\n          }\n          audio.addEventListener('durationchange', () => {\n            audio.remove();\n            resolver(audio.duration);\n          });\n          audio.volume = 0;\n          audio.currentTime = 24 * 60 * 60; // Unprobable time\n          audio.play();\n        });\n        return (duration >= 2);\n      }\n      return !!value;\n    }),\n}).defined();\n\nexport type RecordType = Yup.InferType<typeof schema>;\n\ninterface RecordProps {\n  onNext: (values: RecordType) => void,\n  onManualUpload: () => void,\n  defaultValues: RecordType,\n  currentLogic: string,\n  action:any,\n}\n\nconst Record = ({\n  onNext,\n  onManualUpload,\n  defaultValues,\n  currentLogic,\n  action,\n}: RecordProps) => {\n  // Hooks\n  const { Portal } = usePortal({\n    bindTo:\n      document && (document.getElementById('wizard-buttons') as HTMLDivElement),\n  });\n  const {\n    handleSubmit, control, getValues, formState,\n  } = useForm({\n    mode: 'onChange',\n    defaultValues,\n    resolver: yupResolver(schema),\n  });\n  const { t } = useTranslation();\n\n  const { isValid } = formState;\n\n  // Refs\n  const micKey = React.useRef<number>(1);\n\n  const onManualUploadWithFile = () => {\n    action({\n      [currentLogic]: {\n        recordingFile: getValues('recordingFile') || null,\n        uploadedFile: null,\n      },\n    });\n    onManualUpload?.();\n  };\n\n  return (\n    <>\n      <MainContainer>\n        <MicContainer>\n          <Controller\n            control={control}\n            name=\"recordingFile\"\n            render={({ onChange }) => (\n              <MicRecorder\n                key={micKey.current} // On delete, easy re-mount a new mic recorder\n                onNewRecord={onChange}\n                recordingFile={defaultValues?.recordingFile}\n              />\n            )}\n          />\n        </MicContainer>\n\n        <Portal>\n          <WizardButtons\n            invert\n            leftLabel={t('recordingsRecord:next')}\n            leftDisabled={!isValid}\n            leftHandler={handleSubmit(onNext)}\n          />\n          {/* Upload Container */}\n          <UploadContainer onClick={onManualUploadWithFile}>\n            <UploadImage src={UploadSVG} />\n            <UploadText>{t('recordingsRecord:upload')}</UploadText>\n          </UploadContainer>\n        </Portal>\n      </MainContainer>\n    </>\n  );\n};\n\nexport default React.memo(Record);\n","/* eslint-disable no-plusplus */\n/* eslint-disable no-param-reassign */\n\nconst sizeAsHuman = (bytes: number, si?: boolean) => {\n  const thresh = si ? 1000 : 1024;\n  if (Math.abs(bytes) < thresh) {\n    return `${bytes} B`;\n  }\n  const units = si\n    ? ['kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n    : ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\n  let u = -1;\n  do {\n    bytes /= thresh;\n    ++u;\n  } while (Math.abs(bytes) >= thresh && u < units.length - 1);\n  return `${bytes.toFixed(1)} ${units[u]}`;\n};\n\nconst blobToFile = (theBlob: Blob, fileName:string): File => {\n  const b: any = theBlob;\n  // A Blob() is almost a File() - it's just missing the two properties below which we will add\n  b.lastModifiedDate = new Date();\n  b.name = fileName;\n\n  // Cast to a File() type\n  return theBlob as File;\n};\n\nexport default {\n  sizeAsHuman,\n  blobToFile,\n};\n","import { isSafari } from 'react-device-detect';\n\nexport function getDuration(e: HTMLAudioElement, remove?: boolean): Promise<number> {\n  return new Promise(resolver => {\n    if (e.duration !== Infinity\n        && (!isSafari\n        || (isSafari && e.duration > 0))) {\n      resolver(e.duration);\n      return;\n    }\n    e.addEventListener('durationchange', () => {\n      if (remove) {\n        e.remove();\n      } else {\n        e.pause();\n        e.volume = 1;\n        e.currentTime = 0;\n      }\n      resolver(e.duration);\n    });\n    e.currentTime = 24 * 60 * 60; // Unprobable time\n    e.play();\n  });\n}\n","export default __webpack_public_path__ + \"static/media/stop.e6f44abd.svg\";","import styled from 'styled-components';\nimport { BlackText } from 'components/Texts';\nimport { colors } from 'theme';\n\nimport StopSVG from 'assets/icons/stop.svg';\n\nexport const MainContainer = styled.div`\n  padding: 0px 0px;\n`;\n\nexport const Text = styled(BlackText)`\n  color: ${props => props.theme.colors.darkBlack};\n  margin-bottom: 2px;\n  text-align: left;\n\n  @media screen and (${props => props.theme.breakpoints.tablet}){\n    max-width: 470px;\n    margin: 0 auto;\n    font-size: 16px;\n  }\n\n  @media screen and (${props => props.theme.breakpoints.tablet}){\n    @media (orientation: portrait) {\n      margin-bottom: 248px;\n    }\n\n    @media (orientation: landscape) {\n      margin-bottom: 24px;\n    }\n  }\n`;\n\nexport const MicContainer = styled.div``;\n\nexport const UploadContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0px 20px;\n  margin: 20px auto;\n  width: fit-content;\n\n\n  @media screen and (${props => props.theme.breakpoints.tablet}){\n    padding: 0px 22px;\n    margin: 22px auto;\n  }\n`;\n\nexport const UploadImage = styled.img`\n  cursor: pointer;\n  width: 13px;\n  height: 12px;\n  margin-right: 7px;\n`;\n\nexport const UploadText = styled.div`\n  cursor: pointer;\n  font-family: Source Sans Pro;\n  font-weight: bold;\n  font-size: 0.75rem;\n  line-height: 24px;\n  color: ${colors.darkBlack};\n`;\n\nexport const StopImg = styled.img.attrs(() => ({ src: StopSVG }))`\n  display: inline;\n  height: 10px;\n  margin: 0px 2px 4px;\n`;\n"]}}