{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/amil/virufy-demo.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/amil/virufy-demo.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/amil/virufy-demo.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useHistory}from'react-router-dom';import{useTranslation}from'react-i18next';// Form\nimport{useForm,Controller}from'react-hook-form';import{useStateMachine}from'little-state-machine';import{yupResolver}from'@hookform/resolvers/yup';import*as Yup from'yup';// Components\nimport Dropdown from'components/Dropdown';import CreatedBy from'components/CreatedBy';// Update Action\nimport{updateAction}from'utils/wizard';// Header Control\nimport useHeaderContext from'hooks/useHeaderContext';// Data\nimport{languageData}from'data/lang';// Hooks\nimport useWindowSize from'hooks/useWindowSize';// Utils\nimport{scrollToTop}from'helper/scrollHelper';// Styles\nimport{WelcomeContent,WelcomeSubtitleBold,WelcomeStyledForm,ContainerNextButton,NextButton,ArrowRightSVG}from'../style';var schema=Yup.object().shape({language:Yup.string().required()}).defined();var Step1=function Step1(p){var _useHeaderContext=useHeaderContext(),doGoBack=_useHeaderContext.doGoBack,setDoGoBack=_useHeaderContext.setDoGoBack,setLogoSize=_useHeaderContext.setLogoSize,setType=_useHeaderContext.setType;// Hooks\nvar history=useHistory();var _useWindowSize=useWindowSize(),width=_useWindowSize.width;var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;// States\nvar _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),activeStep=_React$useState2[0],setActiveStep=_React$useState2[1];var _useStateMachine=useStateMachine({updateAction:updateAction(p.storeKey)}),state=_useStateMachine.state,actions=_useStateMachine.actions;// Hook Form\nvar _useForm=useForm({defaultValues:state===null||state===void 0?void 0:state[p.storeKey],resolver:yupResolver(schema),mode:'onChange'}),control=_useForm.control,formState=_useForm.formState,handleSubmit=_useForm.handleSubmit,watch=_useForm.watch,reset=_useForm.reset;var isValid=formState.isValid;// Effects\nReact.useEffect(function(){// NOTE: repopulate default values\nif(state&&state[p.storeKey]){reset(state[p.storeKey]);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);// Handlers\nvar onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(values){actions.updateAction(values);if(p.nextStep){setActiveStep(false);history.push(p.nextStep);}}case 1:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();React.useEffect(function(){scrollToTop();// Hide back arrow in header if neccesary\nif(doGoBack)setDoGoBack(null);setType('noShape');setLogoSize('big');// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var lang=watch('language');// const country = watch('country');\nReact.useEffect(function(){i18n.changeLanguage(lang);},[i18n,lang]);if(!width){return null;}return/*#__PURE__*/_jsx(WelcomeStyledForm,{children:/*#__PURE__*/_jsxs(WelcomeContent,{mt:53,children:[/*#__PURE__*/_jsx(WelcomeSubtitleBold,{mt:width&&width>560?50:40,mb:16,textAlign:\"left\",isBold:true,children:/*#__PURE__*/_jsx(\"strong\",{children:t('main:selectYourLanguage','Language')})}),/*#__PURE__*/_jsx(Controller,{control:control,name:\"language\",defaultValue:i18n.language.split('-')[0]||languageData[0].code,render:function render(_ref2){var _onChange=_ref2.onChange,value=_ref2.value;return/*#__PURE__*/_jsx(Dropdown,{onChange:function onChange(e){return _onChange(e.currentTarget.value);},value:value,children:languageData.map(function(_ref3){var code=_ref3.code,label=_ref3.label;return/*#__PURE__*/_jsx(\"option\",{id:code,value:code,children:label},code);})});}}),activeStep&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ContainerNextButton,{children:/*#__PURE__*/_jsx(NextButton,{onClick:handleSubmit(onSubmit),isDisable:!isValid,children:/*#__PURE__*/_jsx(ArrowRightSVG,{})})}),/*#__PURE__*/_jsx(CreatedBy,{inline:true})]})]})});};export default/*#__PURE__*/React.memo(Step1);","map":{"version":3,"sources":["/home/amil/virufy-demo.github.io/src/containers/Welcome/Step1/Step1.tsx"],"names":["React","useHistory","useTranslation","useForm","Controller","useStateMachine","yupResolver","Yup","Dropdown","CreatedBy","updateAction","useHeaderContext","languageData","useWindowSize","scrollToTop","WelcomeContent","WelcomeSubtitleBold","WelcomeStyledForm","ContainerNextButton","NextButton","ArrowRightSVG","schema","object","shape","language","string","required","defined","Step1","p","doGoBack","setDoGoBack","setLogoSize","setType","history","width","t","i18n","useState","activeStep","setActiveStep","storeKey","state","actions","defaultValues","resolver","mode","control","formState","handleSubmit","watch","reset","isValid","useEffect","onSubmit","values","nextStep","push","lang","changeLanguage","split","code","onChange","value","e","currentTarget","map","label","memo"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\n// Form\nimport { useForm, Controller } from 'react-hook-form';\nimport { useStateMachine } from 'little-state-machine';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as Yup from 'yup';\n\n// Components\nimport Dropdown from 'components/Dropdown';\nimport CreatedBy from 'components/CreatedBy';\n\n// Update Action\nimport { updateAction } from 'utils/wizard';\n\n// Header Control\nimport useHeaderContext from 'hooks/useHeaderContext';\n\n// Data\nimport { languageData } from 'data/lang';\n\n// Hooks\nimport useWindowSize from 'hooks/useWindowSize';\n\n// Utils\nimport { scrollToTop } from 'helper/scrollHelper';\n\n// Styles\nimport {\n  WelcomeContent,\n  WelcomeSubtitleBold,\n  WelcomeStyledForm,\n  ContainerNextButton,\n  NextButton,\n  ArrowRightSVG,\n} from '../style';\n\nconst schema = Yup.object().shape({\n  language: Yup.string().required(),\n}).defined();\n\ntype Step1Type = Yup.InferType<typeof schema>;\n\nconst Step1 = (p: Wizard.StepProps) => {\n  const {\n    doGoBack, setDoGoBack, setLogoSize, setType,\n  } = useHeaderContext();\n  // Hooks\n  const history = useHistory();\n  const { width } = useWindowSize();\n  const { t, i18n } = useTranslation();\n\n  // States\n  const [activeStep, setActiveStep] = React.useState(true);\n  const {\n    state,\n    actions,\n  } = useStateMachine({ updateAction: updateAction(p.storeKey) });\n\n  // Hook Form\n  const {\n    control,\n    formState,\n    handleSubmit,\n    watch,\n    reset,\n    // setValue,\n  } = useForm({\n    defaultValues: state?.[p.storeKey],\n    resolver: yupResolver(schema),\n    mode: 'onChange',\n  });\n  const { isValid } = formState;\n\n  // Effects\n  React.useEffect(() => {\n    // NOTE: repopulate default values\n    if (state && state[p.storeKey]) {\n      reset(state[p.storeKey]);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Handlers\n  const onSubmit = async (values: Step1Type) => {\n    if (values) {\n      actions.updateAction(values);\n      if (p.nextStep) {\n        setActiveStep(false);\n        history.push(p.nextStep);\n      }\n    }\n  };\n\n  React.useEffect(() => {\n    scrollToTop();\n    // Hide back arrow in header if neccesary\n    if (doGoBack) setDoGoBack(null);\n\n    setType('noShape');\n    setLogoSize('big');\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const lang = watch('language');\n  // const country = watch('country');\n\n  React.useEffect(() => {\n    i18n.changeLanguage(lang);\n  }, [i18n, lang]);\n\n  if (!width) {\n    return null;\n  }\n\n  return (\n    <WelcomeStyledForm>\n      {/* Content */}\n      <WelcomeContent mt={53}>\n        <WelcomeSubtitleBold\n          mt={width && width > 560 ? 50 : 40}\n          mb={16}\n          textAlign=\"left\"\n          isBold\n        >\n          <strong>{t('main:selectYourLanguage', 'Language')}</strong>\n        </WelcomeSubtitleBold>\n\n        {/* Language */}\n        <Controller\n          control={control}\n          name=\"language\"\n          defaultValue={i18n.language.split('-')[0] || languageData[0].code}\n          render={({ onChange, value }) => (\n            <Dropdown\n              onChange={e => onChange(e.currentTarget.value)}\n              value={value}\n            >\n              {\n                languageData.map(({ code, label }) => (\n                  <option\n                    key={code}\n                    id={code}\n                    value={code}\n                  >\n                    {label}\n                  </option>\n                ))\n              }\n            </Dropdown>\n          )}\n        />\n\n        {\n          activeStep && (\n            <>\n              <ContainerNextButton>\n                <NextButton\n                  onClick={handleSubmit(onSubmit)}\n                  isDisable={!isValid}\n                >\n                  <ArrowRightSVG />\n                </NextButton>\n              </ContainerNextButton>\n              <CreatedBy inline />\n            </>\n          )\n        }\n      </WelcomeContent>\n    </WelcomeStyledForm>\n  );\n};\n\nexport default React.memo(Step1);\n"]},"metadata":{},"sourceType":"module"}