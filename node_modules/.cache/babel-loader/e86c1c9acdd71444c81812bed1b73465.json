{"ast":null,"code":"import _slicedToArray from\"/home/amil/virufy-demo.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable func-names */import React from'react';var usePWAHelpers=function usePWAHelpers(buttonId){var deferredInstallPromptRef=React.useRef(null);var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),isInstalled=_React$useState2[0],setIsInstalled=_React$useState2[1];React.useEffect(function(){// BeforeInstallPrompt\nvar beforeInstallPromptFn=function beforeInstallPromptFn(e){e.preventDefault();deferredInstallPromptRef.current=e;var installButton=document.getElementById(buttonId);if(installButton){installButton.addEventListener('click',function(){e.prompt();});}};window.addEventListener('beforeinstallprompt',beforeInstallPromptFn);// App Installed\nvar appInstalledFn=function appInstalledFn(){setIsInstalled(true);};window.addEventListener('appinstalled',appInstalledFn);return function(){window.removeEventListener('beforeinstallprompt',beforeInstallPromptFn);window.removeEventListener('appinstalled',appInstalledFn);};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);React.useEffect(function(){var isStandalone=window.matchMedia('(display-mode: standalone)').matches||window.navigator.standalone;if(isStandalone){setIsInstalled(true);}else if(window.navigator.getInstalledRelatedApps){window.navigator.getInstalledRelatedApps().then(function(r){if(r){setIsInstalled(r.length>0);}});}},[]);var handlePrompt=React.useCallback(function(){if(deferredInstallPromptRef.current){return deferredInstallPromptRef.current.userChoice;}return undefined;// eslint-disable-next-line react-hooks/exhaustive-deps\n},[deferredInstallPromptRef.current]);return{isInstalled:isInstalled,setIsInstalled:setIsInstalled,handlePrompt:handlePrompt};};export default usePWAHelpers;","map":null,"metadata":{},"sourceType":"module"}