{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"/home/amil/virufy-demo.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useEffect}from'react';import{useHistory}from'react-router-dom';import{Trans,useTranslation}from'react-i18next';// Form\nimport{useStateMachine}from'little-state-machine';// Header Control\nimport useHeaderContext from'hooks/useHeaderContext';// Hooks\nimport useWindowSize from'hooks/useWindowSize';// Utils\nimport{scrollToTop}from'helper/scrollHelper';import{updateAction}from'utils/wizard';// Images\nimport Record from'./Record';// Styles\nimport{MainContainer,InstructionSubtitle,SocialDistancing,CoughLeft,InstructionBullets,BulletIndicator,InstructionContainer}from'./style';function getDefaultValue(state,currentLogic){var _state$currentLogic,_state$currentLogic$r;if(state&&currentLogic&&((_state$currentLogic=state[currentLogic])===null||_state$currentLogic===void 0?void 0:(_state$currentLogic$r=_state$currentLogic.recordingFile)===null||_state$currentLogic$r===void 0?void 0:_state$currentLogic$r.size)!==undefined){return state[currentLogic];}return{recordingFile:null};}var Introduction=function Introduction(_ref){var previousStep=_ref.previousStep,nextStep=_ref.nextStep,otherSteps=_ref.otherSteps,metadata=_ref.metadata,storeKey=_ref.storeKey;var _useStateMachine=useStateMachine({updateAction:updateAction(storeKey)}),state=_useStateMachine.state,actions=_useStateMachine.actions;// Hooks\nvar _useHeaderContext=useHeaderContext(),setDoGoBack=_useHeaderContext.setDoGoBack,setTitle=_useHeaderContext.setTitle,setType=_useHeaderContext.setType,setSubtitle=_useHeaderContext.setSubtitle;var history=useHistory();var _useTranslation=useTranslation(),t=_useTranslation.t;var _useWindowSize=useWindowSize(),width=_useWindowSize.width;// Handlers\nvar handleDoBack=React.useCallback(function(){if(previousStep){history.push(previousStep);}else{history.goBack();}},[history,previousStep]);var handleManualUpload=React.useCallback(function(){if(otherSteps&&otherSteps.manualUploadStep){history.push(otherSteps.manualUploadStep);}},[otherSteps,history]);var handleNext=React.useCallback(function(values){if(nextStep){actions.updateAction(_defineProperty({},metadata===null||metadata===void 0?void 0:metadata.currentLogic,{recordingFile:values.recordingFile,uploadedFile:null}));history.push(nextStep,{from:'step-record'});}},[nextStep,actions,metadata,history]);// Effects\nuseEffect(function(){scrollToTop();setTitle(t('recordingsIntroduction:recordCough.header'));setDoGoBack(function(){return handleDoBack;});setType('shapeUp');setSubtitle(t('recordingsIntroduction:recordCough.title'));},[setTitle,setSubtitle,handleDoBack,setDoGoBack,t,setType]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(MainContainer,{children:[/*#__PURE__*/_jsxs(InstructionContainer,{mt:40,mb:30,children:[/*#__PURE__*/_jsx(InstructionBullets,{children:/*#__PURE__*/_jsx(BulletIndicator,{children:\"1\"})}),/*#__PURE__*/_jsx(InstructionSubtitle,{mt:width&&width>560?0:0,textAlign:\"left\",isBold:true,children:/*#__PURE__*/_jsxs(Trans,{i18nKey:\"recordingsIntroduction:recordCough.intro1\",children:[\"Find a \",/*#__PURE__*/_jsx(\"strong\",{children:\"quiet environment\"}),\" at least\",/*#__PURE__*/_jsx(\"strong\",{children:\"20 ft (6m)\"}),\" away from others and wear a cloth or surgical mask. If you are feeling ill, please sit down.\"]})})]}),/*#__PURE__*/_jsx(SocialDistancing,{}),/*#__PURE__*/_jsxs(InstructionContainer,{mt:40,mb:40,children:[/*#__PURE__*/_jsx(InstructionBullets,{children:/*#__PURE__*/_jsx(BulletIndicator,{children:\"2\"})}),/*#__PURE__*/_jsx(InstructionSubtitle,{mt:width&&width>560?0:0,textAlign:\"left\",isBold:true,children:/*#__PURE__*/_jsxs(Trans,{i18nKey:\"recordingsIntroduction:recordCough.intro2\",children:[\"Hold your device \",/*#__PURE__*/_jsx(\"strong\",{children:\"1-2 ft (30-60 cm)\"}),\" away from your mouth and\",/*#__PURE__*/_jsx(\"strong\",{children:\"do not obstruct\"}),\" or cover your device with plastic. Do not cough violently or too forcefully.\"]})})]}),/*#__PURE__*/_jsx(CoughLeft,{}),/*#__PURE__*/_jsxs(InstructionContainer,{mt:40,mb:0,children:[/*#__PURE__*/_jsx(InstructionBullets,{children:/*#__PURE__*/_jsx(BulletIndicator,{children:\"3\"})}),/*#__PURE__*/_jsx(InstructionSubtitle,{mt:width&&width>560?0:0,textAlign:\"left\",isBold:true,children:/*#__PURE__*/_jsxs(Trans,{i18nKey:\"recordingsIntroduction:recordCough.text\",children:[\"Click the record button below and\",/*#__PURE__*/_jsx(\"strong\",{children:\"cough intentionally three times with a deep breath between each cough.\"}),\"When you are done, tap the stop button.\"]})})]}),/*#__PURE__*/_jsx(Record,{defaultValues:getDefaultValue(state===null||state===void 0?void 0:state[storeKey],metadata===null||metadata===void 0?void 0:metadata.currentLogic),onManualUpload:handleManualUpload,onNext:handleNext,currentLogic:(metadata===null||metadata===void 0?void 0:metadata.currentLogic)||'',action:actions.updateAction}),/*#__PURE__*/_jsxs(InstructionContainer,{mt:40,mb:40,children:[/*#__PURE__*/_jsx(InstructionBullets,{children:/*#__PURE__*/_jsx(BulletIndicator,{children:\"4\"})}),/*#__PURE__*/_jsx(InstructionSubtitle,{mt:width&&width>560?0:0,textAlign:\"left\",children:/*#__PURE__*/_jsx(Trans,{i18nKey:\"recordingsRecord:textCount\",children:\"Click the record button below and cough intentionally three times with a deep breath between each cough. When you are done, tap the stop button.\"})})]})]})});};export default/*#__PURE__*/React.memo(Introduction);","map":{"version":3,"sources":["/home/amil/virufy-demo.github.io/src/containers/SubmitSteps/RecordingsSteps/Introduction/Introduction.tsx"],"names":["React","useEffect","useHistory","Trans","useTranslation","useStateMachine","useHeaderContext","useWindowSize","scrollToTop","updateAction","Record","MainContainer","InstructionSubtitle","SocialDistancing","CoughLeft","InstructionBullets","BulletIndicator","InstructionContainer","getDefaultValue","state","currentLogic","recordingFile","size","undefined","Introduction","previousStep","nextStep","otherSteps","metadata","storeKey","actions","setDoGoBack","setTitle","setType","setSubtitle","history","t","width","handleDoBack","useCallback","push","goBack","handleManualUpload","manualUploadStep","handleNext","values","uploadedFile","from","memo"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Trans, useTranslation } from 'react-i18next';\n\n// Form\nimport { SubmitSteps, useStateMachine } from 'little-state-machine';\n\n// Header Control\nimport useHeaderContext from 'hooks/useHeaderContext';\n\n// Hooks\nimport useWindowSize from 'hooks/useWindowSize';\n\n// Utils\nimport { scrollToTop } from 'helper/scrollHelper';\nimport { updateAction } from 'utils/wizard';\n\n// Images\nimport Record, { RecordType } from './Record';\n\n// Styles\nimport {\n  MainContainer,\n  InstructionSubtitle,\n  SocialDistancing,\n  CoughLeft,\n  InstructionBullets,\n  BulletIndicator,\n  InstructionContainer,\n} from './style';\n\nfunction getDefaultValue(state?: SubmitSteps, currentLogic?: 'recordYourCough'): RecordType {\n  if (state && currentLogic && state[currentLogic]?.recordingFile?.size !== undefined) {\n    return state[currentLogic] as RecordType;\n  }\n\n  return {\n    recordingFile: null,\n  };\n}\n\nconst Introduction = ({\n  previousStep,\n  nextStep,\n  otherSteps,\n  metadata,\n  storeKey,\n}: Wizard.StepProps) => {\n  const { state, actions } = useStateMachine({ updateAction: updateAction(storeKey) });\n\n  // Hooks\n  const {\n    setDoGoBack, setTitle, setType, setSubtitle,\n  } = useHeaderContext();\n  const history = useHistory();\n  const { t } = useTranslation();\n  const { width } = useWindowSize();\n  // Handlers\n  const handleDoBack = React.useCallback(() => {\n    if (previousStep) {\n      history.push(previousStep);\n    } else {\n      history.goBack();\n    }\n  }, [history, previousStep]);\n\n  const handleManualUpload = React.useCallback(() => {\n    if (otherSteps && otherSteps.manualUploadStep) {\n      history.push(otherSteps.manualUploadStep);\n    }\n  }, [otherSteps, history]);\n\n  const handleNext = React.useCallback(\n    values => {\n      if (nextStep) {\n        actions.updateAction({\n          [metadata?.currentLogic]: {\n            recordingFile: values.recordingFile,\n            uploadedFile: null,\n          },\n        });\n        history.push(nextStep, { from: 'step-record' });\n      }\n    },\n    [nextStep, actions, metadata, history],\n  );\n\n  // Effects\n  useEffect(() => {\n    scrollToTop();\n    setTitle(t('recordingsIntroduction:recordCough.header'));\n    setDoGoBack(() => handleDoBack);\n    setType('shapeUp');\n    setSubtitle(t('recordingsIntroduction:recordCough.title'));\n  }, [setTitle, setSubtitle, handleDoBack, setDoGoBack, t, setType]);\n\n  return (\n    <>\n      <MainContainer>\n        <InstructionContainer mt={40} mb={30}>\n          <InstructionBullets>\n            <BulletIndicator>1</BulletIndicator>\n          </InstructionBullets>\n          <InstructionSubtitle mt={width && width > 560 ? 0 : 0} textAlign=\"left\" isBold>\n            <Trans i18nKey=\"recordingsIntroduction:recordCough.intro1\">\n              Find a <strong>quiet environment</strong> at least\n              <strong>20 ft (6m)</strong> away from others and wear a cloth or surgical mask.\n              If you are feeling ill, please sit down.\n            </Trans>\n          </InstructionSubtitle>\n        </InstructionContainer>\n        <SocialDistancing />\n        <InstructionContainer mt={40} mb={40}>\n          <InstructionBullets>\n            <BulletIndicator>2</BulletIndicator>\n          </InstructionBullets>\n          <InstructionSubtitle mt={width && width > 560 ? 0 : 0} textAlign=\"left\" isBold>\n            <Trans i18nKey=\"recordingsIntroduction:recordCough.intro2\">\n              Hold your device <strong>1-2 ft (30-60 cm)</strong> away from your mouth and\n              <strong>do not obstruct</strong> or cover your device with plastic.\n              Do not cough violently or too forcefully.\n            </Trans>\n          </InstructionSubtitle>\n        </InstructionContainer>\n        <CoughLeft />\n        <InstructionContainer mt={40} mb={0}>\n          <InstructionBullets>\n            <BulletIndicator>3</BulletIndicator>\n          </InstructionBullets>\n          <InstructionSubtitle mt={width && width > 560 ? 0 : 0} textAlign=\"left\" isBold>\n            <Trans i18nKey=\"recordingsIntroduction:recordCough.text\">\n              Click the record button below and\n              <strong>cough intentionally three times with a deep breath between each cough.</strong>\n              When you are done, tap the stop button.\n            </Trans>\n          </InstructionSubtitle>\n        </InstructionContainer>\n        <Record\n          defaultValues={getDefaultValue(state?.[storeKey], metadata?.currentLogic)}\n          onManualUpload={handleManualUpload}\n          onNext={handleNext}\n          currentLogic={metadata?.currentLogic || ''}\n          action={actions.updateAction}\n        />\n        <InstructionContainer mt={40} mb={40}>\n          <InstructionBullets>\n            <BulletIndicator>4</BulletIndicator>\n          </InstructionBullets>\n          <InstructionSubtitle mt={width && width > 560 ? 0 : 0} textAlign=\"left\">\n            <Trans i18nKey=\"recordingsRecord:textCount\">\n              Click the record button below and cough intentionally three times with a deep breath between\n              each cough. When you are done, tap the stop button.\n            </Trans>\n          </InstructionSubtitle>\n        </InstructionContainer>\n      </MainContainer>\n    </>\n  );\n};\n\nexport default React.memo(Introduction);\n"]},"metadata":{},"sourceType":"module"}