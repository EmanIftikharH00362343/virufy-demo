{"ast":null,"code":"import { isSafari } from 'react-device-detect';\nexport function getDuration(e, remove) {\n  return new Promise(resolver => {\n    if (e.duration !== Infinity && (!isSafari || isSafari && e.duration > 0)) {\n      resolver(e.duration);\n      return;\n    }\n\n    e.addEventListener('durationchange', () => {\n      if (remove) {\n        e.remove();\n      } else {\n        e.pause();\n        e.volume = 1;\n        e.currentTime = 0;\n      }\n\n      resolver(e.duration);\n    });\n    e.currentTime = 24 * 60 * 60; // Unprobable time\n\n    e.play();\n  });\n}","map":{"version":3,"sources":["/home/amil/virufy-demo.github.io/src/helper/getDuration.ts"],"names":["isSafari","getDuration","e","remove","Promise","resolver","duration","Infinity","addEventListener","pause","volume","currentTime","play"],"mappings":"AAAA,SAASA,QAAT,QAAyB,qBAAzB;AAEA,OAAO,SAASC,WAAT,CAAqBC,CAArB,EAA0CC,MAA1C,EAA6E;AAClF,SAAO,IAAIC,OAAJ,CAAYC,QAAQ,IAAI;AAC7B,QAAIH,CAAC,CAACI,QAAF,KAAeC,QAAf,KACI,CAACP,QAAD,IACAA,QAAQ,IAAIE,CAAC,CAACI,QAAF,GAAa,CAF7B,CAAJ,EAEsC;AACpCD,MAAAA,QAAQ,CAACH,CAAC,CAACI,QAAH,CAAR;AACA;AACD;;AACDJ,IAAAA,CAAC,CAACM,gBAAF,CAAmB,gBAAnB,EAAqC,MAAM;AACzC,UAAIL,MAAJ,EAAY;AACVD,QAAAA,CAAC,CAACC,MAAF;AACD,OAFD,MAEO;AACLD,QAAAA,CAAC,CAACO,KAAF;AACAP,QAAAA,CAAC,CAACQ,MAAF,GAAW,CAAX;AACAR,QAAAA,CAAC,CAACS,WAAF,GAAgB,CAAhB;AACD;;AACDN,MAAAA,QAAQ,CAACH,CAAC,CAACI,QAAH,CAAR;AACD,KATD;AAUAJ,IAAAA,CAAC,CAACS,WAAF,GAAgB,KAAK,EAAL,GAAU,EAA1B,CAjB6B,CAiBC;;AAC9BT,IAAAA,CAAC,CAACU,IAAF;AACD,GAnBM,CAAP;AAoBD","sourcesContent":["import { isSafari } from 'react-device-detect';\n\nexport function getDuration(e: HTMLAudioElement, remove?: boolean): Promise<number> {\n  return new Promise(resolver => {\n    if (e.duration !== Infinity\n        && (!isSafari\n        || (isSafari && e.duration > 0))) {\n      resolver(e.duration);\n      return;\n    }\n    e.addEventListener('durationchange', () => {\n      if (remove) {\n        e.remove();\n      } else {\n        e.pause();\n        e.volume = 1;\n        e.currentTime = 0;\n      }\n      resolver(e.duration);\n    });\n    e.currentTime = 24 * 60 * 60; // Unprobable time\n    e.play();\n  });\n}\n"]},"metadata":{},"sourceType":"module"}