{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/amil/virufy-demo.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/amil/virufy-demo.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/amil/virufy-demo.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useHistory}from'react-router-dom';import{useTranslation}from'react-i18next';// Form\nimport{useForm,Controller}from'react-hook-form';import{useStateMachine}from'little-state-machine';import{yupResolver}from'@hookform/resolvers/yup';import*as Yup from'yup';// Components\nimport Dropdown from'components/Dropdown';import CreatedBy from'components/CreatedBy';// Update Action\nimport{updateAction}from'utils/wizard';// Header Control\nimport useHeaderContext from'hooks/useHeaderContext';// Data\nimport{languageData}from'data/lang';// Hooks\nimport useWindowSize from'hooks/useWindowSize';// Utils\nimport{scrollToTop}from'helper/scrollHelper';// Styles\nimport{WelcomeContent,WelcomeSubtitleBold,WelcomeStyledForm,ContainerNextButton,NextButton,ArrowRightSVG}from'../style';var schema=Yup.object().shape({language:Yup.string().required()}).defined();var Step1=function Step1(p){var _useHeaderContext=useHeaderContext(),doGoBack=_useHeaderContext.doGoBack,setDoGoBack=_useHeaderContext.setDoGoBack,setLogoSize=_useHeaderContext.setLogoSize,setType=_useHeaderContext.setType;// Hooks\nvar history=useHistory();var _useWindowSize=useWindowSize(),width=_useWindowSize.width;var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;// States\nvar _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),activeStep=_React$useState2[0],setActiveStep=_React$useState2[1];var _useStateMachine=useStateMachine({updateAction:updateAction(p.storeKey)}),state=_useStateMachine.state,actions=_useStateMachine.actions;// Hook Form\nvar _useForm=useForm({defaultValues:state===null||state===void 0?void 0:state[p.storeKey],resolver:yupResolver(schema),mode:'onChange'}),control=_useForm.control,formState=_useForm.formState,handleSubmit=_useForm.handleSubmit,watch=_useForm.watch,reset=_useForm.reset;var isValid=formState.isValid;// Effects\nReact.useEffect(function(){// NOTE: repopulate default values\nif(state&&state[p.storeKey]){reset(state[p.storeKey]);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);// Handlers\nvar onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(values){actions.updateAction(values);if(p.nextStep){setActiveStep(false);history.push(p.nextStep);}}case 1:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();React.useEffect(function(){scrollToTop();// Hide back arrow in header if neccesary\nif(doGoBack)setDoGoBack(null);setType('noShape');setLogoSize('big');// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var lang=watch('language');// const country = watch('country');\nReact.useEffect(function(){i18n.changeLanguage(lang);},[i18n,lang]);if(!width){return null;}return/*#__PURE__*/_jsx(WelcomeStyledForm,{children:/*#__PURE__*/_jsxs(WelcomeContent,{mt:53,children:[/*#__PURE__*/_jsx(WelcomeSubtitleBold,{mt:width&&width>560?50:40,mb:16,textAlign:\"left\",isBold:true,children:/*#__PURE__*/_jsx(\"strong\",{children:t('main:selectYourLanguage','Language')})}),/*#__PURE__*/_jsx(Controller,{control:control,name:\"language\",defaultValue:i18n.language.split('-')[0]||languageData[0].code,render:function render(_ref2){var _onChange=_ref2.onChange,value=_ref2.value;return/*#__PURE__*/_jsx(Dropdown,{onChange:function onChange(e){return _onChange(e.currentTarget.value);},value:value,children:languageData.map(function(_ref3){var code=_ref3.code,label=_ref3.label;return/*#__PURE__*/_jsx(\"option\",{id:code,value:code,children:label},code);})});}}),activeStep&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ContainerNextButton,{children:/*#__PURE__*/_jsx(NextButton,{onClick:handleSubmit(onSubmit),isDisable:!isValid,children:/*#__PURE__*/_jsx(ArrowRightSVG,{})})}),/*#__PURE__*/_jsx(CreatedBy,{inline:true})]})]})});};export default/*#__PURE__*/React.memo(Step1);","map":null,"metadata":{},"sourceType":"module"}