{"ast":null,"code":"import { createContext as e, useState as t, createElement as n, useContext as r, useMemo as o } from \"react\";\n\nvar a = new (function () {\n  function e(e) {\n    void 0 === e && (e = \"__LSM__\"), this.name = e, this.state = {}, this.middleWares = [], this.storageType = \"undefined\" != typeof sessionStorage ? window.sessionStorage : {};\n  }\n\n  var t = e.prototype;\n  return t.updateStore = function (e) {\n    this.state = function (e, t) {\n      try {\n        return JSON.parse(e.getItem(t));\n      } catch (e) {\n        return null;\n      }\n    }(this.storageType, this.name) || e;\n  }, t.updateMiddleWares = function (e) {\n    return this.middleWares = e;\n  }, e;\n}())(),\n    i = e(void 0),\n    s = function s(e) {\n  var r = e.children,\n      o = t(a.state);\n  return n(i.Provider, {\n    value: {\n      state: o[0],\n      setState: o[1]\n    }\n  }, r);\n};\n\nfunction _(e, t) {\n  var n, r, o;\n  void 0 === t && (t = {\n    name: \"__LSM__\",\n    middleWares: []\n  }), t.name && (a.name = t.name), t.storageType && (a.storageType = t.storageType), a.updateMiddleWares(t.middleWares), \"production\" !== process.env.NODE_ENV && (n = a.storageType, r = a.name, o = a.state, \"undefined\" != typeof window && (window.__LSM_NAME__ = r, window.__LSM_DEBUG__ = function (e) {\n    return n.setItem(\"___LSM_DEBUG__\", e);\n  }, window.__LSM_RESET__ = function () {\n    return n.clear();\n  }, window.__LSM_GET_STORE__ = function () {\n    return n.getItem(r);\n  }, window.__LSM_SAVE_TO__ = function (e) {\n    return window.localStorage.setItem(e, JSON.stringify(o));\n  }, window.__LSM_LOAD__ = function (e) {\n    return n.setItem(r || \"___LSM_DEBUG__\", e.data || window.localStorage.getItem(e.storeName) || \"\");\n  })), a.updateStore(e);\n}\n\nfunction d(e) {\n  var t,\n      n = (t = r(i), \"production\" !== process.env.NODE_ENV && (t || console.error(\"StateMachine context is undefined, please verify you are calling useStateMachine() as child of a <StateMachineProvider> component.\")), t),\n      s = n.state,\n      _ = n.setState;\n  return o(function () {\n    return {\n      actions: e ? Object.entries(e).reduce(function (e, t) {\n        var n;\n        return Object.assign({}, e, ((n = {})[t[0]] = function (e, t) {\n          return function (n) {\n            \"production\" !== process.env.NODE_ENV && (window.__LSM_NAME__ = t ? t.name : \"\"), a.state = t(a.state, n), a.storageType.setItem(a.name, JSON.stringify(a.state)), a.middleWares.length && (a.state = a.middleWares.reduce(function (e, t) {\n              return t(e) || e;\n            }, a.state)), e(a.state);\n          };\n        }(_, t[1]), n));\n      }, {}) : {},\n      state: s\n    };\n  }, [s, _, e]);\n}\n\nexport { s as StateMachineProvider, _ as createStore, d as useStateMachine };","map":null,"metadata":{},"sourceType":"module"}