{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/arcsec/Documents/Virufy/virufy-demo.github.io/src/components/FooterInstallAsApp/FooterInstallAsApp.tsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useLocation } from 'react-router-dom'; // Modals\n\nimport PWAInstallModal from 'modals/PWAInstallModal'; // Hooks\n\nimport usePWAHelpers from 'hooks/usePWAHelpers'; // Styles\n\nimport { FooterContainer, DownloadSVG } from './style';\n\nconst FooterInstallAsApp = () => {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const location = useLocation();\n  const installPwaButtonId = 'virufy-install-button';\n  const pwaModalRef = React.useRef(null);\n  const {\n    handlePrompt,\n    isInstalled,\n    setIsInstalled\n  } = usePWAHelpers(installPwaButtonId);\n  const handleClickInstall = React.useCallback(() => {\n    if (handlePrompt) {\n      const promise = handlePrompt();\n\n      if (promise) {\n        promise.then(userChoiceResult => {\n          if (userChoiceResult && userChoiceResult.outcome === 'accepted') {\n            setIsInstalled(true);\n          }\n        }).catch(() => {\n          var _pwaModalRef$current;\n\n          return (_pwaModalRef$current = pwaModalRef.current) === null || _pwaModalRef$current === void 0 ? void 0 : _pwaModalRef$current.show();\n        });\n      } else {\n        var _pwaModalRef$current2;\n\n        (_pwaModalRef$current2 = pwaModalRef.current) === null || _pwaModalRef$current2 === void 0 ? void 0 : _pwaModalRef$current2.show();\n      }\n    }\n  }, [handlePrompt, setIsInstalled]);\n  if (location.pathname !== '/welcome/step-2') return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!isInstalled && /*#__PURE__*/_jsxDEV(FooterContainer, {\n      id: installPwaButtonId,\n      onClick: handleClickInstall,\n      children: [/*#__PURE__*/_jsxDEV(DownloadSVG, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 15\n      }, this), t('helpVirufy:installApp')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PWAInstallModal, {\n      ref: pwaModalRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(FooterInstallAsApp, \"NZZnISLlmXQOfZWIG1ELDJDmfT8=\", false, function () {\n  return [useTranslation, useLocation, usePWAHelpers];\n});\n\n_c = FooterInstallAsApp;\nexport default _c2 = /*#__PURE__*/React.memo(FooterInstallAsApp);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"FooterInstallAsApp\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/arcsec/Documents/Virufy/virufy-demo.github.io/src/components/FooterInstallAsApp/FooterInstallAsApp.tsx"],"names":["React","useTranslation","useLocation","PWAInstallModal","usePWAHelpers","FooterContainer","DownloadSVG","FooterInstallAsApp","t","location","installPwaButtonId","pwaModalRef","useRef","handlePrompt","isInstalled","setIsInstalled","handleClickInstall","useCallback","promise","then","userChoiceResult","outcome","catch","current","show","pathname","memo"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,QAA+B,eAA/B;AACA,SAASC,WAAT,QAA4B,kBAA5B,C,CAEA;;AACA,OAAOC,eAAP,MAA4B,wBAA5B,C,CAEA;;AACA,OAAOC,aAAP,MAA0B,qBAA1B,C,CAEA;;AACA,SAASC,eAAT,EAA0BC,WAA1B,QAA6C,SAA7C;;AAEA,MAAMC,kBAAkB,GAAG,MAAM;AAAA;;AAC/B,QAAM;AAAEC,IAAAA;AAAF,MAAQP,cAAc,EAA5B;AACA,QAAMQ,QAAQ,GAAGP,WAAW,EAA5B;AACA,QAAMQ,kBAAkB,GAAG,uBAA3B;AACA,QAAMC,WAAW,GAAGX,KAAK,CAACY,MAAN,CAA8B,IAA9B,CAApB;AACA,QAAM;AAAEC,IAAAA,YAAF;AAAgBC,IAAAA,WAAhB;AAA6BC,IAAAA;AAA7B,MAAgDX,aAAa,CAACM,kBAAD,CAAnE;AACA,QAAMM,kBAAkB,GAAGhB,KAAK,CAACiB,WAAN,CAAkB,MAAM;AACjD,QAAIJ,YAAJ,EAAkB;AAChB,YAAMK,OAAO,GAAGL,YAAY,EAA5B;;AACA,UAAIK,OAAJ,EAAa;AACXA,QAAAA,OAAO,CAACC,IAAR,CAAcC,gBAAD,IAA2B;AACtC,cAAIA,gBAAgB,IAAIA,gBAAgB,CAACC,OAAjB,KAA6B,UAArD,EAAiE;AAC/DN,YAAAA,cAAc,CAAC,IAAD,CAAd;AACD;AACF,SAJD,EAIGO,KAJH,CAIS;AAAA;;AAAA,yCAAMX,WAAW,CAACY,OAAlB,yDAAM,qBAAqBC,IAArB,EAAN;AAAA,SAJT;AAKD,OAND,MAMO;AAAA;;AACL,iCAAAb,WAAW,CAACY,OAAZ,gFAAqBC,IAArB;AACD;AACF;AACF,GAb0B,EAaxB,CAACX,YAAD,EAAeE,cAAf,CAbwB,CAA3B;AAcA,MAAIN,QAAQ,CAACgB,QAAT,KAAsB,iBAA1B,EAA6C,OAAO,IAAP;AAE7C,sBACE;AAAA,eACI,CAACX,WAAD,iBAEI,QAAC,eAAD;AAAiB,MAAA,EAAE,EAAEJ,kBAArB;AAAyC,MAAA,OAAO,EAAEM,kBAAlD;AAAA,8BACE,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,cADF,EAEIR,CAAC,CAAC,uBAAD,CAFL;AAAA;AAAA;AAAA;AAAA;AAAA,YAHR,eAQE,QAAC,eAAD;AAAiB,MAAA,GAAG,EAAEG;AAAtB;AAAA;AAAA;AAAA;AAAA,YARF;AAAA,kBADF;AAYD,CAlCD;;GAAMJ,kB;UACUN,c,EACGC,W,EAGqCE,a;;;KALlDG,kB;AAoCN,kCAAeP,KAAK,CAAC0B,IAAN,CAAWnB,kBAAX,CAAf","sourcesContent":["import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useLocation } from 'react-router-dom';\n\n// Modals\nimport PWAInstallModal from 'modals/PWAInstallModal';\n\n// Hooks\nimport usePWAHelpers from 'hooks/usePWAHelpers';\n\n// Styles\nimport { FooterContainer, DownloadSVG } from './style';\n\nconst FooterInstallAsApp = () => {\n  const { t } = useTranslation();\n  const location = useLocation();\n  const installPwaButtonId = 'virufy-install-button';\n  const pwaModalRef = React.useRef<PWAInstallModal>(null);\n  const { handlePrompt, isInstalled, setIsInstalled } = usePWAHelpers(installPwaButtonId);\n  const handleClickInstall = React.useCallback(() => {\n    if (handlePrompt) {\n      const promise = handlePrompt();\n      if (promise) {\n        promise.then((userChoiceResult: any) => {\n          if (userChoiceResult && userChoiceResult.outcome === 'accepted') {\n            setIsInstalled(true);\n          }\n        }).catch(() => pwaModalRef.current?.show());\n      } else {\n        pwaModalRef.current?.show();\n      }\n    }\n  }, [handlePrompt, setIsInstalled]);\n  if (location.pathname !== '/welcome/step-2') return null;\n\n  return (\n    <>\n      { !isInstalled\n          && (\n            <FooterContainer id={installPwaButtonId} onClick={handleClickInstall}>\n              <DownloadSVG />\n              { t('helpVirufy:installApp')}\n            </FooterContainer>\n          )}\n      <PWAInstallModal ref={pwaModalRef} />\n    </>\n  );\n};\n\nexport default React.memo(FooterInstallAsApp);\n"]},"metadata":{},"sourceType":"module"}