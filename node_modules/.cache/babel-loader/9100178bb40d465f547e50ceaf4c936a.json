{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"/Users/arcsec/virufy-demo.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React from'react';import{createStore,useStateMachine}from'little-state-machine';import{useHistory}from'react-router-dom';import Wizard from'components/Wizard';// Wizard\nvar StoreKey='submit-steps';createStore(_defineProperty({},StoreKey,{recordYourCough:{recordingFile:undefined,uploadedFile:undefined}}),{name:'VirufyWizard',middleWares:[],storageType:window.localStorage});var baseUrl='/submit-steps';var baseComponentPath='SubmitSteps';var middleComponentPathRecording='RecordingsSteps';var middleComponentPathSubmission='Submission';var recordYourCoughLogic='recordYourCough';var steps=[// Record Your Cough Steps\n{path:'/step-record/cough',componentPath:\"\".concat(baseComponentPath,\"/\").concat(middleComponentPathRecording,\"/Introduction\"),props:{storeKey:StoreKey,previousStep:'/welcome/step-3',nextStep:\"\".concat(baseUrl,\"/step-listen/cough\"),otherSteps:{manualUploadStep:\"\".concat(baseUrl,\"/step-manual-upload/cough\")},metadata:{currentLogic:recordYourCoughLogic}}},{path:'/step-manual-upload/cough',componentPath:\"\".concat(baseComponentPath,\"/\").concat(middleComponentPathRecording,\"/RecordManualUpload\"),props:{storeKey:StoreKey,previousStep:\"\".concat(baseUrl,\"/step-record/cough\"),nextStep:\"\".concat(baseUrl,\"/step-listen/cough\"),metadata:{currentLogic:recordYourCoughLogic}}},{path:'/step-listen/cough',componentPath:\"\".concat(baseComponentPath,\"/\").concat(middleComponentPathRecording,\"/ListenAudio\"),props:{storeKey:StoreKey,previousStep:\"\".concat(baseUrl,\"/step-record/cough\"),nextStep:\"\".concat(baseUrl,\"/prediction-result\"),metadata:{currentLogic:recordYourCoughLogic}}},// Submission\n{path:'/prediction-result',componentPath:\"\".concat(baseComponentPath,\"/\").concat(middleComponentPathSubmission,\"/PredictionResult\"),props:{storeKey:StoreKey,previousStep:\"\".concat(baseUrl,\"/step-record/cough\"),nextStep:''}}];var SubmitSteps=function SubmitSteps(){// Hooks\nvar _useStateMachine=useStateMachine(),state=_useStateMachine.state;var history=useHistory();// Effects\nReact.useEffect(function(){var checkFileProblem=function checkFileProblem(file){if(file&&file.size===undefined){return true;}return false;};var checkFileConsistencyProblem=function checkFileConsistencyProblem(inputState){var out=null;if(inputState[StoreKey]){var recordYourCough=inputState[StoreKey].recordYourCough;var toTest=[];if(recordYourCough){var recordingFile=recordYourCough.recordingFile,uploadedFile=recordYourCough.uploadedFile;if(recordingFile){toTest.push({file:recordingFile,route:'/step-record/cough'});}if(uploadedFile){toTest.push({file:uploadedFile,route:'/step-manual-upload/cough'});}}var itemWithProblem=toTest.find(function(toTestItem){return checkFileProblem(toTestItem.file);});if(itemWithProblem){out=itemWithProblem.route;}}return out;};var problemRoute=checkFileConsistencyProblem(state);if(problemRoute){history.push(\"/\".concat(StoreKey).concat(problemRoute));}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return null;};var WrapperSubmitSteps=function WrapperSubmitSteps(){return/*#__PURE__*/_jsx(Wizard,{steps:steps,children:/*#__PURE__*/_jsx(SubmitSteps,{})});};export default/*#__PURE__*/React.memo(WrapperSubmitSteps);","map":{"version":3,"sources":["/Users/arcsec/virufy-demo.github.io/src/containers/SubmitSteps/SubmitSteps.tsx"],"names":["React","createStore","useStateMachine","useHistory","Wizard","StoreKey","recordYourCough","recordingFile","undefined","uploadedFile","name","middleWares","storageType","window","localStorage","baseUrl","baseComponentPath","middleComponentPathRecording","middleComponentPathSubmission","recordYourCoughLogic","steps","path","componentPath","props","storeKey","previousStep","nextStep","otherSteps","manualUploadStep","metadata","currentLogic","SubmitSteps","state","history","useEffect","checkFileProblem","file","size","checkFileConsistencyProblem","inputState","out","toTest","push","route","itemWithProblem","find","toTestItem","problemRoute","WrapperSubmitSteps","memo"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { createStore, useStateMachine } from 'little-state-machine';\nimport { useHistory } from 'react-router-dom';\nimport Wizard from 'components/Wizard';\n\n// Wizard\nconst StoreKey = 'submit-steps';\n\ncreateStore({\n  [StoreKey]: {\n    recordYourCough: {\n      recordingFile: undefined,\n      uploadedFile: undefined,\n    },\n  },\n}, {\n  name: 'VirufyWizard',\n  middleWares: [],\n  storageType: window.localStorage,\n});\n\nconst baseUrl = '/submit-steps';\nconst baseComponentPath = 'SubmitSteps';\nconst middleComponentPathRecording = 'RecordingsSteps';\nconst middleComponentPathSubmission = 'Submission';\nconst recordYourCoughLogic = 'recordYourCough';\n\nconst steps: Wizard.Step[] = [\n  // Record Your Cough Steps\n  {\n    path: '/step-record/cough',\n    componentPath: `${baseComponentPath}/${middleComponentPathRecording}/Introduction`,\n    props: {\n      storeKey: StoreKey,\n      previousStep: '/welcome/step-3',\n      nextStep: `${baseUrl}/step-listen/cough`,\n      otherSteps: {\n        manualUploadStep: `${baseUrl}/step-manual-upload/cough`,\n      },\n      metadata: {\n        currentLogic: recordYourCoughLogic,\n      },\n    },\n  },\n  {\n    path: '/step-manual-upload/cough',\n    componentPath: `${baseComponentPath}/${middleComponentPathRecording}/RecordManualUpload`,\n    props: {\n      storeKey: StoreKey,\n      previousStep: `${baseUrl}/step-record/cough`,\n      nextStep: `${baseUrl}/step-listen/cough`,\n      metadata: {\n        currentLogic: recordYourCoughLogic,\n      },\n    },\n  },\n  {\n    path: '/step-listen/cough',\n    componentPath: `${baseComponentPath}/${middleComponentPathRecording}/ListenAudio`,\n    props: {\n      storeKey: StoreKey,\n      previousStep: `${baseUrl}/step-record/cough`,\n      nextStep: `${baseUrl}/prediction-result`,\n      metadata: {\n        currentLogic: recordYourCoughLogic,\n      },\n    },\n  },\n  // Submission\n  {\n    path: '/prediction-result',\n    componentPath: `${baseComponentPath}/${middleComponentPathSubmission}/PredictionResult`,\n    props: {\n      storeKey: StoreKey,\n      previousStep: `${baseUrl}/step-record/cough`,\n      nextStep: '',\n    },\n  },\n];\n\nconst SubmitSteps = () => {\n  // Hooks\n  const { state } = useStateMachine();\n  const history = useHistory();\n\n  // Effects\n  React.useEffect(() => {\n    const checkFileProblem = (file: File) => {\n      if (file && file.size === undefined) {\n        return true;\n      }\n      return false;\n    };\n\n    const checkFileConsistencyProblem = (inputState: Record<string, any>) => {\n      let out = null;\n\n      if (inputState[StoreKey]) {\n        const { recordYourCough } = inputState[StoreKey];\n        const toTest = [];\n\n        if (recordYourCough) {\n          const { recordingFile, uploadedFile } = recordYourCough;\n          if (recordingFile) {\n            toTest.push({ file: recordingFile, route: '/step-record/cough' });\n          }\n          if (uploadedFile) {\n            toTest.push({ file: uploadedFile, route: '/step-manual-upload/cough' });\n          }\n        }\n\n        const itemWithProblem = toTest.find(toTestItem => checkFileProblem(toTestItem.file));\n        if (itemWithProblem) {\n          out = itemWithProblem.route;\n        }\n      }\n\n      return out;\n    };\n\n    const problemRoute = checkFileConsistencyProblem(state);\n    if (problemRoute) {\n      history.push(`/${StoreKey}${problemRoute}`);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return null;\n};\n\nconst WrapperSubmitSteps = () => (\n  <Wizard\n    steps={steps}\n  >\n    <SubmitSteps />\n  </Wizard>\n);\n\nexport default React.memo(WrapperSubmitSteps);\n"]},"metadata":{},"sourceType":"module"}