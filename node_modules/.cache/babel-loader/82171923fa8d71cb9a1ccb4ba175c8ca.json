{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/amil/virufy-demo.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/amil/virufy-demo.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/amil/virufy-demo.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useCallback,useState}from'react';import{useHistory}from'react-router-dom';import{useTranslation,Trans}from'react-i18next';import usePortal from'react-useportal';// Form\nimport{useForm,Controller}from'react-hook-form';import{useStateMachine}from'little-state-machine';import{yupResolver}from'@hookform/resolvers/yup';import*as Yup from'yup';// Header Control\nimport useHeaderContext from'hooks/useHeaderContext';// Components\nimport WizardButtons from'components/WizardButtons';import Dropdown from'components/Dropdown';// Update Action\nimport{updateAction}from'utils/wizard';// Theme\n// Assets\nimport HeaderSplash from'assets/images/headerSplash.png';// Utils\nimport{scrollToTop}from'helper/scrollHelper';// Data\nimport{languageData}from'data/lang';// Styles\nimport Link from'components/Link';import{WelcomeContent,WelcomeStyledFormAlternative,HeaderImageContainer,HeaderImage,LogoWhiteBG,BoldBlackText,WelcomeNote,BoldBlackTextPrivacy}from'../style';var schema=Yup.object().shape({language:Yup.string().required()}).defined();var Step2=function Step2(p){var _usePortal=usePortal({bindTo:document&&document.getElementById('wizard-buttons')}),Portal=_usePortal.Portal;var _useStateMachine=useStateMachine({updateAction:updateAction(p.storeKey)}),state=_useStateMachine.state,actions=_useStateMachine.actions;var _useHeaderContext=useHeaderContext(),setDoGoBack=_useHeaderContext.setDoGoBack,setType=_useHeaderContext.setType,setTitle=_useHeaderContext.setTitle;// Hook Form\nvar _useForm=useForm({defaultValues:state===null||state===void 0?void 0:state[p.storeKey],resolver:yupResolver(schema),mode:'onChange'}),control=_useForm.control,formState=_useForm.formState,handleSubmit=_useForm.handleSubmit,watch=_useForm.watch,reset=_useForm.reset;var isValid=formState.isValid;var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;React.useEffect(function(){// NOTE: repopulate default values\nif(state&&state[p.storeKey]){reset(state[p.storeKey]);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);// eslint-disable-next-line @typescript-eslint/no-unused-vars\nvar _useState=useState(true),_useState2=_slicedToArray(_useState,2),activeStep=_useState2[0],setActiveStep=_useState2[1];var history=useHistory();var doBack=useCallback(function(){if(p.previousStep){setActiveStep(false);history.push(p.previousStep);}else{history.goBack();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(values){actions.updateAction(values);if(p.nextStep){setActiveStep(false);history.push(p.nextStep);}}case 1:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();useEffect(function(){scrollToTop();setDoGoBack(function(){return doBack;});setType('nothing');setTitle('');},[doBack,setDoGoBack,setTitle,setType]);var lang=watch('language');React.useEffect(function(){i18n.changeLanguage(lang);},[i18n,lang]);return/*#__PURE__*/_jsxs(WelcomeStyledFormAlternative,{children:[/*#__PURE__*/_jsxs(HeaderImageContainer,{children:[/*#__PURE__*/_jsx(HeaderImage,{src:HeaderSplash}),/*#__PURE__*/_jsx(LogoWhiteBG,{})]}),/*#__PURE__*/_jsx(BoldBlackText,{children:t('main:selectYourLanguage','Language')}),/*#__PURE__*/_jsx(Controller,{control:control,name:\"language\",defaultValue:i18n.language.split('-')[0]||languageData[0].code,render:function render(_ref2){var _onChange=_ref2.onChange,value=_ref2.value;return/*#__PURE__*/_jsx(Dropdown,{onChange:function onChange(e){return _onChange(e.currentTarget.value);},value:value,children:languageData.map(function(_ref3){var code=_ref3.code,label=_ref3.label;return/*#__PURE__*/_jsx(\"option\",{id:code,value:code,children:label},code);})});}}),/*#__PURE__*/_jsxs(WelcomeContent,{children:[/*#__PURE__*/_jsx(WelcomeNote,{children:/*#__PURE__*/_jsxs(Trans,{i18nKey:\"main:note\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Please note:\"}),\" This form is for data collection only. It will not predict your COVID-19 status or diagnose any disease, disorder, or other health condition. Virufy is conducting research and will use the information you provide for that research only. Virufy will not take place of a doctor and would like to remind you it is your responsibility to seek medical advice from your doctor.\"]})}),/*#__PURE__*/_jsx(BoldBlackTextPrivacy,{children:/*#__PURE__*/_jsx(Link,{to:\"https://virufy.org/privacy_policy/\",target:\"_blank\",children:/*#__PURE__*/_jsx(Trans,{i18nKey:\"main:privacyPolicy\",children:\"By proceeding you accept the terms of our Privacy Policy\"})})}),activeStep&&/*#__PURE__*/_jsx(Portal,{children:/*#__PURE__*/_jsx(WizardButtons,{invert:true,leftLabel:t('helpVirufy:nextButton'),leftHandler:handleSubmit(onSubmit),leftDisabled:!isValid})})]})]});};export default/*#__PURE__*/React.memo(Step2);","map":null,"metadata":{},"sourceType":"module"}