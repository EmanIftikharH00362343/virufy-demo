{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/amil/virufy-demo.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/amil/virufy-demo.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/amil/virufy-demo.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// Showing positive egardless of what user submits //\nimport React from'react';import{useTranslation,Trans}from'react-i18next';import usePortal from'react-useportal';// import axios from 'axios';\nimport{useHistory}from'react-router-dom';// Header Control\nimport useHeaderContext from'hooks/useHeaderContext';// Utils\nimport{scrollToTop}from'helper/scrollHelper';// Styles\nimport WizardButtons from'components/WizardButtons';import{Title,ImageProcessing,ProcessingContainer,PredictionResultContainer,TitleResult,ImagePredictionResult,IntroText,StyledLow,StyledHigh,SubmitError}from'./style';var PredictionResult=function PredictionResult(){// Hooks\nvar _useHeaderContext=useHeaderContext(),setDoGoBack=_useHeaderContext.setDoGoBack,setTitle=_useHeaderContext.setTitle,setSubtitle=_useHeaderContext.setSubtitle,setType=_useHeaderContext.setType;var _useTranslation=useTranslation(),t=_useTranslation.t;var _usePortal=usePortal({bindTo:document&&document.getElementById('wizard-buttons')}),Portal=_usePortal.Portal;var history=useHistory();// States\nvar errorCode=null;var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),processing=_React$useState2[0],setProcessing=_React$useState2[1];var _React$useState3=React.useState('unknown'),_React$useState4=_slicedToArray(_React$useState3,2),prediction=_React$useState4[0],setPrediction=_React$useState4[1];var submitError=null;React.useEffect(function(){// Hide the Footer Report Problems while processing\nvar target=document&&document.getElementById('footer-report-problems');if(target){if(processing){target.style.display='none';}else{target.style.display='flex';}}},[processing]);// Handlers\nvar handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setPrediction('positive');_context.next=3;return new Promise(function(resolve){return setTimeout(resolve,2000);});case 3:setProcessing(false);case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();var handleReturnMain=React.useCallback(function(){history.replace('/welcome');},[history]);// Effects\nReact.useEffect(function(){scrollToTop();setTitle('');setDoGoBack(function(){});setType('noShape');handleSubmit();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);React.useEffect(function(){if(processing){setSubtitle('');}else{setSubtitle(\"\".concat(t('predictionResult:result')));}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[processing]);// Always positive result hardcoded\nconsole.log('errorCode',errorCode);return/*#__PURE__*/_jsxs(_Fragment,{children:[processing?/*#__PURE__*/_jsxs(ProcessingContainer,{children:[/*#__PURE__*/_jsx(Title,{children:t('predictionResult:processingTitle')}),/*#__PURE__*/_jsx(ImageProcessing,{})]}):/*#__PURE__*/_jsx(_Fragment,{children:errorCode==='invalid_access_code'?/*#__PURE__*/_jsxs(PredictionResultContainer,{children:[/*#__PURE__*/_jsx(Title,{children:t('predictionResult:result')}),/*#__PURE__*/_jsx(TitleResult,{color:\"#FF4444\",children:/*#__PURE__*/_jsx(Trans,{i18nKey:\"predictionResult:resultDetectedDummy\"})}),/*#__PURE__*/_jsx(StyledHigh,{}),/*#__PURE__*/_jsx(IntroText,{children:/*#__PURE__*/_jsx(Trans,{i18nKey:\"predictionResult:resultDetectedText\",children:\"Your voice has indicators of COVID-19. Please contact your healthcare professional and take additional precautions.\"})}),/*#__PURE__*/_jsx(ImagePredictionResult,{})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(PredictionResultContainer,{children:[/*#__PURE__*/_jsx(Title,{children:t('predictionResult:result')}),prediction==='negative'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TitleResult,{color:\"#4FDB76\",children:t('predictionResult:resultNotDetected')}),/*#__PURE__*/_jsx(StyledLow,{}),/*#__PURE__*/_jsx(IntroText,{children:/*#__PURE__*/_jsxs(Trans,{i18nKey:\"predictionResult:resultNotDetectedText\",children:[\"Your voice does not seem to have indicators of COVID-19. Please \",/*#__PURE__*/_jsx(\"strong\",{children:\"continue to take appropriate measures\"}),\" based on the advice of your healthcare professional or applicable regulatory body and reassess yourself in our app daily.\"]})})]}),prediction==='unknown'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TitleResult,{children:t('predictionResult:resultNotAnalyze')}),/*#__PURE__*/_jsx(IntroText,{children:/*#__PURE__*/_jsxs(Trans,{i18nKey:\"predictionResult:resultNotAnalyzeText\",children:[\"Our algorithm is not able to determine your COVID-19 status.\",/*#__PURE__*/_jsx(\"strong\",{children:\"Please submit another cough\"}),\".\"]})})]}),prediction==='positive'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(StyledHigh,{}),/*#__PURE__*/_jsx(TitleResult,{color:\"#FF4444\",children:t('predictionResult:resultDetected')}),/*#__PURE__*/_jsx(IntroText,{children:/*#__PURE__*/_jsx(Trans,{i18nKey:\"predictionResult:resultDetectedText\",children:\"Your voice has indicators of COVID-19. Please contact your healthcare professional and take additional precautions.\"})})]})]})})}),/*#__PURE__*/_jsxs(Portal,{children:[!processing&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IntroText,{children:/*#__PURE__*/_jsxs(Trans,{i18nKey:\"predictionResult:resultModalDummy\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Aviso importante:\"}),\" Esta aplicaci\\xF3n no predecir\\xE1 su estado de COVID-19 ni diagnosticar\\xE1 ninguna enfermedad, trastorno u otra condici\\xF3n de salud. Virufy est\\xE1 llevando a cabo una investigaci\\xF3n y utilizar\\xE1 la informaci\\xF3n que proporciones \\xFAnicamente para dicha investigaci\\xF3n. Virufy no sustituir\\xE1 a un m\\xE9dico y le recuerda que es su responsabilidad buscar consejo m\\xE9dico de su m\\xE9dico.\"]})}),/*#__PURE__*/_jsx(WizardButtons,{invert:true,leftLabel:t('predictionResult:nextButton'),leftHandler:handleReturnMain})]}),submitError&&/*#__PURE__*/_jsx(SubmitError,{children:\"\".concat(submitError)})]})]});};export default/*#__PURE__*/React.memo(PredictionResult);","map":{"version":3,"sources":["/home/amil/virufy-demo.github.io/src/containers/SubmitSteps/Submission/PredictionResult/PredictionResult.tsx"],"names":["React","useTranslation","Trans","usePortal","useHistory","useHeaderContext","scrollToTop","WizardButtons","Title","ImageProcessing","ProcessingContainer","PredictionResultContainer","TitleResult","ImagePredictionResult","IntroText","StyledLow","StyledHigh","SubmitError","PredictionResult","setDoGoBack","setTitle","setSubtitle","setType","t","bindTo","document","getElementById","Portal","history","errorCode","useState","processing","setProcessing","prediction","setPrediction","submitError","useEffect","target","style","display","handleSubmit","Promise","resolve","setTimeout","handleReturnMain","useCallback","replace","console","log","memo"],"mappings":"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","sourcesContent":["// Showing positive egardless of what user submits //\n\nimport React from 'react';\nimport { useTranslation, Trans } from 'react-i18next';\nimport usePortal from 'react-useportal';\n// import axios from 'axios';\nimport { useHistory } from 'react-router-dom';\n\n// Header Control\nimport useHeaderContext from 'hooks/useHeaderContext';\n\n// Utils\nimport { scrollToTop } from 'helper/scrollHelper';\n\n// Styles\nimport WizardButtons from 'components/WizardButtons';\nimport {\n  Title,\n  ImageProcessing,\n  ProcessingContainer,\n  PredictionResultContainer,\n  TitleResult,\n  ImagePredictionResult,\n  IntroText,\n  StyledLow,\n  StyledHigh,\n  SubmitError,\n} from './style';\n\nconst PredictionResult = () => {\n  // Hooks\n  const {\n    setDoGoBack, setTitle, setSubtitle, setType,\n  } = useHeaderContext();\n  const { t } = useTranslation();\n  const { Portal } = usePortal({\n    bindTo: document && document.getElementById('wizard-buttons') as HTMLDivElement,\n  });\n  const history = useHistory();\n\n  // States\n  const errorCode = null;\n  const [processing, setProcessing] = React.useState<boolean>(true);\n  const [prediction, setPrediction] = React.useState<string>('unknown');\n  const submitError = null;\n\n  React.useEffect(() => {\n    // Hide the Footer Report Problems while processing\n    const target = document && document.getElementById('footer-report-problems');\n    if (target) {\n      if (processing) {\n        target.style.display = 'none';\n      } else {\n        target.style.display = 'flex';\n      }\n    }\n  }, [processing]);\n\n  // Handlers\n  const handleSubmit = async () => {\n    setPrediction('positive');\n    await new Promise(resolve => setTimeout(resolve, 2000));\n    setProcessing(false);\n  };\n\n  const handleReturnMain = React.useCallback(() => {\n    history.replace('/welcome');\n  }, [history]);\n\n  // Effects\n  React.useEffect(() => {\n    scrollToTop();\n    setTitle('');\n    setDoGoBack(() => {});\n    setType('noShape');\n    handleSubmit();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  React.useEffect(() => {\n    if (processing) {\n      setSubtitle('');\n    } else {\n      setSubtitle(`${t('predictionResult:result')}`);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [processing]);\n\n  // Always positive result hardcoded\n  console.log('errorCode', errorCode);\n\n  return (\n    <>\n      {\n        processing ? (\n          <ProcessingContainer>\n            {/* Title */}\n            <Title>\n              {t('predictionResult:processingTitle')}\n            </Title>\n\n            {/* Image */}\n            <ImageProcessing />\n          </ProcessingContainer>\n        ) : (\n          <>\n            {\n            (errorCode === 'invalid_access_code')\n              ? (\n                <PredictionResultContainer>\n                  <Title>\n                    {t('predictionResult:result')}\n                  </Title>\n                  <TitleResult color=\"#FF4444\">\n                    <Trans i18nKey=\"predictionResult:resultDetectedDummy\" />\n                  </TitleResult>\n                  <StyledHigh />\n                  <IntroText>\n                    <Trans i18nKey=\"predictionResult:resultDetectedText\">\n                      {/* eslint-disable-next-line max-len */}\n                      Your voice has indicators of COVID-19. Please contact your\n                      healthcare professional and take additional precautions.\n                    </Trans>\n                  </IntroText>\n                  <ImagePredictionResult />\n                </PredictionResultContainer>\n              ) : (\n                <>\n                  <PredictionResultContainer>\n                    <Title>\n                      {t('predictionResult:result')}\n                    </Title>\n                    {/* Title, text and image conditional based on range result */}\n                    {prediction === 'negative' && (\n                      <>\n                        <TitleResult color=\"#4FDB76\">{t('predictionResult:resultNotDetected')}</TitleResult>\n                        <StyledLow />\n                        <IntroText>\n                          <Trans i18nKey=\"predictionResult:resultNotDetectedText\">\n                            {/* eslint-disable-next-line max-len */}\n                            Your voice does not seem to have indicators of COVID-19. Please <strong>continue to take appropriate measures</strong> based on the advice of your healthcare professional or applicable regulatory body and reassess yourself in our app daily.\n                          </Trans>\n                        </IntroText>\n                      </>\n                    )}\n                    {prediction === 'unknown' && (\n                      <>\n                        <TitleResult>{t('predictionResult:resultNotAnalyze')}</TitleResult>\n                        <IntroText>\n                          <Trans i18nKey=\"predictionResult:resultNotAnalyzeText\">\n                            Our algorithm is not able to determine your COVID-19 status.\n                            <strong>Please submit another cough</strong>.\n                          </Trans>\n                        </IntroText>\n                      </>\n                    )}\n                    {prediction === 'positive' && (\n                      <>\n                        <StyledHigh />\n                        <TitleResult color=\"#FF4444\">{t('predictionResult:resultDetected')}</TitleResult>\n                        <IntroText>\n                          <Trans i18nKey=\"predictionResult:resultDetectedText\">\n                            Your voice has indicators of COVID-19. Please contact your\n                            healthcare professional and take additional precautions.\n                          </Trans>\n                        </IntroText>\n                      </>\n                    )}\n                  </PredictionResultContainer>\n                </>\n              )\n          }\n          </>\n        )\n      }\n      {/* Bottom Buttons */}\n      <Portal>\n        {\n          !processing && (\n            <>\n              <IntroText>\n                <Trans i18nKey=\"predictionResult:resultModalDummy\">\n                  {/* eslint-disable-next-line max-len */}\n                  <strong>Aviso importante:</strong> Esta aplicación no predecirá su estado de COVID-19 ni diagnosticará ninguna enfermedad, trastorno u otra condición de salud. Virufy está llevando a cabo una investigación y utilizará la información que proporciones únicamente para dicha investigación. Virufy no sustituirá a un médico y le recuerda que es su responsabilidad buscar consejo médico de su médico.\n                </Trans>\n              </IntroText>\n              <WizardButtons\n                invert\n                leftLabel={t('predictionResult:nextButton')}\n                leftHandler={handleReturnMain}\n              />\n            </>\n          )\n        }\n        {submitError && (\n        <SubmitError>\n          {`${submitError}`}\n        </SubmitError>\n        )}\n      </Portal>\n    </>\n  );\n};\n\nexport default React.memo(PredictionResult);\n"]},"metadata":{},"sourceType":"module"}