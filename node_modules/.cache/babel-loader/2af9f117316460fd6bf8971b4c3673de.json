{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from'react';import{useTranslation}from'react-i18next';import{useLocation}from'react-router-dom';// Modals\nimport PWAInstallModal from'modals/PWAInstallModal';// Hooks\nimport usePWAHelpers from'hooks/usePWAHelpers';// Styles\nimport{FooterContainer,DownloadSVG}from'./style';var FooterInstallAsApp=function FooterInstallAsApp(){var _useTranslation=useTranslation(),t=_useTranslation.t;var location=useLocation();var installPwaButtonId='virufy-install-button';var pwaModalRef=React.useRef(null);var _usePWAHelpers=usePWAHelpers(installPwaButtonId),handlePrompt=_usePWAHelpers.handlePrompt,isInstalled=_usePWAHelpers.isInstalled,setIsInstalled=_usePWAHelpers.setIsInstalled;var handleClickInstall=React.useCallback(function(){if(handlePrompt){var promise=handlePrompt();if(promise){promise.then(function(userChoiceResult){if(userChoiceResult&&userChoiceResult.outcome==='accepted'){setIsInstalled(true);}}).catch(function(){var _pwaModalRef$current;return(_pwaModalRef$current=pwaModalRef.current)===null||_pwaModalRef$current===void 0?void 0:_pwaModalRef$current.show();});}else{var _pwaModalRef$current2;(_pwaModalRef$current2=pwaModalRef.current)===null||_pwaModalRef$current2===void 0?void 0:_pwaModalRef$current2.show();}}},[handlePrompt,setIsInstalled]);if(location.pathname!=='/welcome/step-2')return null;return/*#__PURE__*/_jsxs(_Fragment,{children:[!isInstalled&&/*#__PURE__*/_jsxs(FooterContainer,{id:installPwaButtonId,onClick:handleClickInstall,children:[/*#__PURE__*/_jsx(DownloadSVG,{}),t('helpVirufy:installApp')]}),/*#__PURE__*/_jsx(PWAInstallModal,{ref:pwaModalRef})]});};export default/*#__PURE__*/React.memo(FooterInstallAsApp);","map":{"version":3,"sources":["/Users/arcsec/virufy-demo.github.io/src/components/FooterInstallAsApp/FooterInstallAsApp.tsx"],"names":["React","useTranslation","useLocation","PWAInstallModal","usePWAHelpers","FooterContainer","DownloadSVG","FooterInstallAsApp","t","location","installPwaButtonId","pwaModalRef","useRef","handlePrompt","isInstalled","setIsInstalled","handleClickInstall","useCallback","promise","then","userChoiceResult","outcome","catch","current","show","pathname","memo"],"mappings":"6IAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,cAAT,KAA+B,eAA/B,CACA,OAASC,WAAT,KAA4B,kBAA5B,CAEA;AACA,MAAOC,CAAAA,eAAP,KAA4B,wBAA5B,CAEA;AACA,MAAOC,CAAAA,aAAP,KAA0B,qBAA1B,CAEA;AACA,OAASC,eAAT,CAA0BC,WAA1B,KAA6C,SAA7C,CAEA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,qBACjBN,cAAc,EADG,CACvBO,CADuB,iBACvBA,CADuB,CAE/B,GAAMC,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CACA,GAAMQ,CAAAA,kBAAkB,CAAG,uBAA3B,CACA,GAAMC,CAAAA,WAAW,CAAGX,KAAK,CAACY,MAAN,CAA8B,IAA9B,CAApB,CAJ+B,mBAKuBR,aAAa,CAACM,kBAAD,CALpC,CAKvBG,YALuB,gBAKvBA,YALuB,CAKTC,WALS,gBAKTA,WALS,CAKIC,cALJ,gBAKIA,cALJ,CAM/B,GAAMC,CAAAA,kBAAkB,CAAGhB,KAAK,CAACiB,WAAN,CAAkB,UAAM,CACjD,GAAIJ,YAAJ,CAAkB,CAChB,GAAMK,CAAAA,OAAO,CAAGL,YAAY,EAA5B,CACA,GAAIK,OAAJ,CAAa,CACXA,OAAO,CAACC,IAAR,CAAa,SAACC,gBAAD,CAA2B,CACtC,GAAIA,gBAAgB,EAAIA,gBAAgB,CAACC,OAAjB,GAA6B,UAArD,CAAiE,CAC/DN,cAAc,CAAC,IAAD,CAAd,CACD,CACF,CAJD,EAIGO,KAJH,CAIS,gEAAMX,WAAW,CAACY,OAAlB,+CAAM,qBAAqBC,IAArB,EAAN,EAJT,EAKD,CAND,IAMO,2BACL,uBAAAb,WAAW,CAACY,OAAZ,sEAAqBC,IAArB,GACD,CACF,CACF,CAb0B,CAaxB,CAACX,YAAD,CAAeE,cAAf,CAbwB,CAA3B,CAcA,GAAIN,QAAQ,CAACgB,QAAT,GAAsB,iBAA1B,CAA6C,MAAO,KAAP,CAE7C,mBACE,2BACI,CAACX,WAAD,eAEI,MAAC,eAAD,EAAiB,EAAE,CAAEJ,kBAArB,CAAyC,OAAO,CAAEM,kBAAlD,wBACE,KAAC,WAAD,IADF,CAEIR,CAAC,CAAC,uBAAD,CAFL,GAHR,cAQE,KAAC,eAAD,EAAiB,GAAG,CAAEG,WAAtB,EARF,GADF,CAYD,CAlCD,CAoCA,2BAAeX,KAAK,CAAC0B,IAAN,CAAWnB,kBAAX,CAAf","sourcesContent":["import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useLocation } from 'react-router-dom';\n\n// Modals\nimport PWAInstallModal from 'modals/PWAInstallModal';\n\n// Hooks\nimport usePWAHelpers from 'hooks/usePWAHelpers';\n\n// Styles\nimport { FooterContainer, DownloadSVG } from './style';\n\nconst FooterInstallAsApp = () => {\n  const { t } = useTranslation();\n  const location = useLocation();\n  const installPwaButtonId = 'virufy-install-button';\n  const pwaModalRef = React.useRef<PWAInstallModal>(null);\n  const { handlePrompt, isInstalled, setIsInstalled } = usePWAHelpers(installPwaButtonId);\n  const handleClickInstall = React.useCallback(() => {\n    if (handlePrompt) {\n      const promise = handlePrompt();\n      if (promise) {\n        promise.then((userChoiceResult: any) => {\n          if (userChoiceResult && userChoiceResult.outcome === 'accepted') {\n            setIsInstalled(true);\n          }\n        }).catch(() => pwaModalRef.current?.show());\n      } else {\n        pwaModalRef.current?.show();\n      }\n    }\n  }, [handlePrompt, setIsInstalled]);\n  if (location.pathname !== '/welcome/step-2') return null;\n\n  return (\n    <>\n      { !isInstalled\n          && (\n            <FooterContainer id={installPwaButtonId} onClick={handleClickInstall}>\n              <DownloadSVG />\n              { t('helpVirufy:installApp')}\n            </FooterContainer>\n          )}\n      <PWAInstallModal ref={pwaModalRef} />\n    </>\n  );\n};\n\nexport default React.memo(FooterInstallAsApp);\n"]},"metadata":{},"sourceType":"module"}