{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import _objectSpread from\"/Users/arcsec/Documents/Virufy/virufy-demo.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/arcsec/Documents/Virufy/virufy-demo.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from'react';import loadable from'@loadable/component';import SlideRoutes from'react-slide-routes';import{Route,useRouteMatch,useLocation}from'react-router-dom';import{StateMachineProvider}from'little-state-machine';// Components\nimport Layout from'components/Layout/';// Style\nimport{WizardContainer,StepContainer,WizardNavControlPortal}from'./style';var AsyncLoad=loadable(function(_ref){var container=_ref.container;return import(\"containers/\".concat(container));},{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"Loading ...\"}),cacheKey:function cacheKey(_ref2){var container=_ref2.container;return container;}});function clearPath(path){return path.replace(/\\/$/,'');}var Wizard=function Wizard(_ref3){var steps=_ref3.steps,children=_ref3.children;var match=useRouteMatch();var location=useLocation();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),loadSteps=_React$useState2[0],setLoadSteps=_React$useState2[1];var pathList=React.useMemo(function(){var base=clearPath(match.url);return steps.map(function(step){return base+step.path;});},[match.url,steps]);React.useEffect(function(){setLoadSteps(true);},[]);return/*#__PURE__*/_jsx(StateMachineProvider,{children:/*#__PURE__*/_jsxs(WizardContainer,{children:[/*#__PURE__*/_jsx(StepContainer,{children:loadSteps&&/*#__PURE__*/_jsx(SlideRoutes,{location:location,timing:\"ease-in-out\",duration:500,pathList:pathList,children:steps.map(function(step){return/*#__PURE__*/_jsx(Route,{exact:true,path:Array.isArray(step.path)?step.path.map(function(s){return match.path+s;}):match.path+step.path,render:function render(){return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(AsyncLoad,_objectSpread({container:step.componentPath},step.props))});}},step.componentPath);})})}),/*#__PURE__*/_jsx(WizardNavControlPortal,{id:\"wizard-buttons\",children:children})]})});};export default/*#__PURE__*/React.memo(Wizard);","map":{"version":3,"sources":["/Users/arcsec/Documents/Virufy/virufy-demo.github.io/src/components/Wizard/Wizard.tsx"],"names":["React","loadable","SlideRoutes","Route","useRouteMatch","useLocation","StateMachineProvider","Layout","WizardContainer","StepContainer","WizardNavControlPortal","AsyncLoad","container","fallback","cacheKey","clearPath","path","replace","Wizard","steps","children","match","location","useState","loadSteps","setLoadSteps","pathList","useMemo","base","url","map","step","useEffect","Array","isArray","s","componentPath","props","memo"],"mappings":"6aAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,qBAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,oBAAxB,CACA,OAASC,KAAT,CAAgBC,aAAhB,CAA+BC,WAA/B,KAAkD,kBAAlD,CACA,OAASC,oBAAT,KAAqC,sBAArC,CAEA;AACA,MAAOC,CAAAA,MAAP,KAAmB,oBAAnB,CAEA;AACA,OACEC,eADF,CAEEC,aAFF,CAGEC,sBAHF,KAIO,SAJP,CAcA,GAAMC,CAAAA,SAAS,CAAGV,QAAQ,CAAC,kBAAGW,CAAAA,SAAH,MAAGA,SAAH,OAAmC,6BAAqBA,SAArB,EAAnC,EAAD,CAAuE,CAC/FC,QAAQ,cAAE,oCADqF,CAE/FC,QAAQ,CAAE,4BAAGF,CAAAA,SAAH,OAAGA,SAAH,OAAmCA,CAAAA,SAAnC,EAFqF,CAAvE,CAA1B,CAKA,QAASG,CAAAA,SAAT,CAAmBC,IAAnB,CAAiC,CAC/B,MAAOA,CAAAA,IAAI,CAACC,OAAL,CAAa,KAAb,CAAoB,EAApB,CAAP,CACD,CAED,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,OAA+D,IAA5DC,CAAAA,KAA4D,OAA5DA,KAA4D,CAArDC,QAAqD,OAArDA,QAAqD,CAC5E,GAAMC,CAAAA,KAAK,CAAGjB,aAAa,EAA3B,CACA,GAAMkB,CAAAA,QAAQ,CAAGjB,WAAW,EAA5B,CAF4E,oBAG1CL,KAAK,CAACuB,QAAN,CAAe,KAAf,CAH0C,oDAGrEC,SAHqE,qBAG1DC,YAH0D,qBAK5E,GAAMC,CAAAA,QAAQ,CAAG1B,KAAK,CAAC2B,OAAN,CAAc,UAAM,CACnC,GAAMC,CAAAA,IAAI,CAAGb,SAAS,CAACM,KAAK,CAACQ,GAAP,CAAtB,CACA,MAAOV,CAAAA,KAAK,CAACW,GAAN,CAAU,SAAAC,IAAI,QAAIH,CAAAA,IAAI,CAAGG,IAAI,CAACf,IAAhB,EAAd,CAAP,CACD,CAHgB,CAGd,CAACK,KAAK,CAACQ,GAAP,CAAYV,KAAZ,CAHc,CAAjB,CAKAnB,KAAK,CAACgC,SAAN,CAAgB,UAAM,CACpBP,YAAY,CAAC,IAAD,CAAZ,CACD,CAFD,CAEG,EAFH,EAIA,mBACE,KAAC,oBAAD,wBACE,MAAC,eAAD,yBACE,KAAC,aAAD,WAEID,SAAS,eACP,KAAC,WAAD,EACE,QAAQ,CAAEF,QADZ,CAEE,MAAM,CAAC,aAFT,CAGE,QAAQ,CAAE,GAHZ,CAIE,QAAQ,CAAEI,QAJZ,UAOIP,KAAK,CAACW,GAAN,CAAU,SAAAC,IAAI,qBACZ,KAAC,KAAD,EAEE,KAAK,KAFP,CAGE,IAAI,CAAEE,KAAK,CAACC,OAAN,CAAcH,IAAI,CAACf,IAAnB,EACFe,IAAI,CAACf,IAAL,CAAUc,GAAV,CAAc,SAAAK,CAAC,QAAKd,CAAAA,KAAK,CAACL,IAAN,CAAamB,CAAlB,EAAf,CADE,CAEFd,KAAK,CAACL,IAAN,CAAae,IAAI,CAACf,IALxB,CAME,MAAM,CAAE,qCACN,KAAC,MAAD,wBACE,KAAC,SAAD,gBACE,SAAS,CAAEe,IAAI,CAACK,aADlB,EAEML,IAAI,CAACM,KAFX,EADF,EADM,EANV,EACON,IAAI,CAACK,aADZ,CADY,EAAd,CAPJ,EAHN,EADF,cAkCE,KAAC,sBAAD,EACE,EAAE,CAAC,gBADL,UAGGhB,QAHH,EAlCF,GADF,EADF,CA4CD,CA1DD,CA4DA,2BAAepB,KAAK,CAACsC,IAAN,CAAWpB,MAAX,CAAf","sourcesContent":["import React from 'react';\nimport loadable from '@loadable/component';\nimport SlideRoutes from 'react-slide-routes';\nimport { Route, useRouteMatch, useLocation } from 'react-router-dom';\nimport { StateMachineProvider } from 'little-state-machine';\n\n// Components\nimport Layout from 'components/Layout/';\n\n// Style\nimport {\n  WizardContainer,\n  StepContainer,\n  WizardNavControlPortal,\n} from './style';\n\ninterface WizardProps {\n  steps: Wizard.Step[];\n}\n\ninterface AsyncLoadProps extends Partial<Wizard.StepProps> {\n  container: string;\n}\n\nconst AsyncLoad = loadable(({ container }: AsyncLoadProps) => import(`containers/${container}`), {\n  fallback: <div>Loading ...</div>,\n  cacheKey: ({ container }: AsyncLoadProps) => container,\n});\n\nfunction clearPath(path: string) {\n  return path.replace(/\\/$/, '');\n}\n\nconst Wizard = ({ steps, children }: React.PropsWithChildren<WizardProps>) => {\n  const match = useRouteMatch();\n  const location = useLocation();\n  const [loadSteps, setLoadSteps] = React.useState(false);\n\n  const pathList = React.useMemo(() => {\n    const base = clearPath(match.url);\n    return steps.map(step => base + step.path);\n  }, [match.url, steps]);\n\n  React.useEffect(() => {\n    setLoadSteps(true);\n  }, []);\n\n  return (\n    <StateMachineProvider>\n      <WizardContainer>\n        <StepContainer>\n          {\n            loadSteps && (\n              <SlideRoutes\n                location={location}\n                timing=\"ease-in-out\"\n                duration={500}\n                pathList={pathList}\n              >\n                {\n                  steps.map(step => (\n                    <Route\n                      key={step.componentPath}\n                      exact\n                      path={Array.isArray(step.path)\n                        ? step.path.map(s => (match.path + s))\n                        : match.path + step.path}\n                      render={() => (\n                        <Layout>\n                          <AsyncLoad\n                            container={step.componentPath}\n                            {...step.props}\n                          />\n                        </Layout>\n\n                      )}\n                    />\n                  ))\n                }\n              </SlideRoutes>\n            )\n          }\n        </StepContainer>\n        <WizardNavControlPortal\n          id=\"wizard-buttons\"\n        >\n          {children}\n        </WizardNavControlPortal>\n      </WizardContainer>\n    </StateMachineProvider>\n  );\n};\n\nexport default React.memo(Wizard);\n"]},"metadata":{},"sourceType":"module"}