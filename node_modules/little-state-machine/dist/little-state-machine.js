var e=require("react"),t=new(function(){function e(e){void 0===e&&(e="__LSM__"),this.name=e,this.state={},this.middleWares=[],this.storageType="undefined"!=typeof sessionStorage?window.sessionStorage:{}}var t=e.prototype;return t.updateStore=function(e){this.state=function(e,t){try{return JSON.parse(e.getItem(t))}catch(e){return null}}(this.storageType,this.name)||e},t.updateMiddleWares=function(e){return this.middleWares=e},e}()),r=e.createContext(void 0);exports.StateMachineProvider=function(n){var a=n.children,s=e.useState(t.state);return e.createElement(r.Provider,{value:{state:s[0],setState:s[1]}},a)},exports.createStore=function(e,r){void 0===r&&(r={name:"__LSM__",middleWares:[]}),r.name&&(t.name=r.name),r.storageType&&(t.storageType=r.storageType),t.updateMiddleWares(r.middleWares),t.updateStore(e)},exports.useStateMachine=function(n){var a=e.useContext(r),s=a.state,i=a.setState;return e.useMemo(function(){return{actions:n?Object.entries(n).reduce(function(e,r){var n;return Object.assign({},e,((n={})[r[0]]=function(e,r){return function(n){t.state=r(t.state,n),t.storageType.setItem(t.name,JSON.stringify(t.state)),t.middleWares.length&&(t.state=t.middleWares.reduce(function(e,t){return t(e)||e},t.state)),e(t.state)}}(i,r[1]),n))},{}):{},state:s}},[s,i,n])};
//# sourceMappingURL=little-state-machine.js.map
